<!DOCTYPE html>
<html lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<!-- 2020-11-25 Wed 15:20 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CS 160 Lecture Notes – Fall '20</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Mehmet Emre">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/tufte.css" type="text/css">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config;executed=true">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript" src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/MathJax.js"></script>
<style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style class="__css_exfil_protection_filtered_styles"></style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.0') format('opentype'); font-weight: bold}
@font-face {font-family: MathJax_Main; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.0') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Math; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.0') format('opentype'); font-style: italic}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.0') format('opentype')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">@font-face {font-family: MathJax_Typewriter; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_Typewriter-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_Typewriter-Regular.otf?V=2.7.0') format('opentype')}
</style><style type="text/css">@font-face {font-family: MathJax_AMS; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_AMS-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf?V=2.7.0') format('opentype')}
</style><style type="text/css">@font-face {font-family: MathJax_SansSerif; src: url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/woff/MathJax_SansSerif-Regular.woff?V=2.7.0') format('woff'), url('https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/fonts/HTML-CSS/TeX/otf/MathJax_SansSerif-Regular.otf?V=2.7.0') format('opentype')}
</style></head>
<body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<article id="content">
<header>
<h1 class="title">CS 160 Lecture Notes – Fall '20</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org4a09e48">1. Introduction</a>
<ul>
<li><a href="#orga3edebf">1.1. How will the quarter work?</a>
<ul>
<li><a href="#org5eb8bd6">1.1.1. Lectures</a></li>
<li><a href="#org050b4b6">1.1.2. Discussion Sections</a></li>
<li><a href="#org0f0269f">1.1.3. Office Hours</a></li>
<li><a href="#org741c9c6">1.1.4. Slack</a></li>
<li><a href="#org28f415d">1.1.5. Assessment</a></li>
<li><a href="#org95779b8">1.1.6. Prerequisites</a></li>
</ul>
</li>
<li><a href="#org5cfbc8b">1.2. Course Outline</a></li>
</ul>
</li>
<li><a href="#orgf79ff05">2. Parsing</a>
<ul>
<li><a href="#org7635696">2.1. CFG Review</a>
<ul>
<li><a href="#orgc2c2968">2.1.1. CFG as a generator</a></li>
<li><a href="#org4e01f98">2.1.2. Leftmost and rightmost derivations</a></li>
<li><a href="#org818104b">2.1.3. CFG as a recognizer</a></li>
<li><a href="#org74f207f">2.1.4. Ambiguity</a></li>
<li><a href="#org8fe3ae9">2.1.5. Determinism</a></li>
<li><a href="#orgc051967">2.1.6. Dealing with ambiguity</a></li>
<li><a href="#org3c181d6">2.1.7. Another solution</a></li>
</ul>
</li>
<li><a href="#org3fa3fc8">2.2. Parsing Strategies</a>
<ul>
<li><a href="#org8a05d9b">2.2.1. Top-down parsing</a></li>
<li><a href="#orgfca30ba">2.2.2. Bottom-up parsing</a></li>
<li><a href="#orgfb453ea">2.2.3. Strategies based on algorithms</a></li>
</ul>
</li>
<li><a href="#org77bc2d2">2.3. Recursive Descent and LL(1)</a>
<ul>
<li><a href="#org6bb4745">2.3.1. LL(1) recursive descent</a></li>
<li><a href="#org6f007f4">2.3.2. Why is it called "LL(1)"?</a></li>
</ul>
</li>
<li><a href="#org83d60ff">2.4. Transforming to LL(1)</a>
<ul>
<li><a href="#org7865ff1">2.4.1. Establishing precedence</a></li>
<li><a href="#orgaf8ae08">2.4.2. Dealing with left recursion</a></li>
<li><a href="#org507bbed">2.4.3. Lookahead, formalized</a></li>
<li><a href="#org988c754">2.4.4. Left factoring</a></li>
</ul>
</li>
<li><a href="#orgf2b0f3e">2.5. Building an AST</a>
<ul>
<li><a href="#org36f3d76">2.5.1. Example AST for arithmetic expressions</a></li>
<li><a href="#org804a2bc">2.5.2. Exercise</a></li>
</ul>
</li>
<li><a href="#orgbb25a66">2.6. Validating the AST</a>
<ul>
<li><a href="#orgf579983">2.6.1. Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9ad1912">3. Front-end wrap-up</a>
<ul>
<li><a href="#orgb48143c">3.1. More on parsing</a></li>
</ul>
</li>
<li><a href="#orga85dfba">4. Code generation, naïvely</a>
<ul>
<li><a href="#org3074808">4.1. Where code generation fits in</a>
<ul>
<li><a href="#orgac2a4e1">4.1.1. Static vs dynamic libraries</a></li>
<li><a href="#org722b2b6">4.1.2. Process layout in memory</a></li>
<li><a href="#org5bf19cb">4.1.3. alignment and padding</a></li>
</ul>
</li>
<li><a href="#orgc5958a3">4.2. Symbol table</a>
<ul>
<li><a href="#org65c7870">4.2.1. scope</a></li>
<li><a href="#org2fe015a">4.2.2. nested scope</a></li>
<li><a href="#org337408d">4.2.3. Implementation in our compiler</a></li>
<li><a href="#orgcb2cbe8">4.2.4. Specifics of scope in C♭</a></li>
</ul>
</li>
<li><a href="#orgfa5615b">4.3. Code generation strategies</a>
<ul>
<li><a href="#orge4fe6ca">4.3.1. recursive AST traversal</a></li>
<li><a href="#orgb64dd1d">4.3.2. Stack-based machines</a></li>
<li><a href="#org07cdd05">4.3.3. Register-based machines</a></li>
</ul>
</li>
<li><a href="#orgba07de5">4.4. Naïve register-based code generation</a></li>
<li><a href="#org2900b35">4.5. Variable memory locations</a></li>
<li><a href="#org14d845f">4.6. Expressions</a>
<ul>
<li><a href="#orga1f4e15">4.6.1. Arithmetic</a></li>
<li><a href="#orgc254720">4.6.2. relational / logical</a></li>
<li><a href="#orgcc9061f">4.6.3. Short-circuiting evaluation</a></li>
</ul>
</li>
<li><a href="#org65202fb">4.7. Assignments</a></li>
<li><a href="#orge206361">4.8. Conditionals</a>
<ul>
<li><a href="#orgc35583a">4.8.1. No nested scope</a></li>
<li><a href="#org37b3a5d">4.8.2. Adding nested scope</a></li>
<li><a href="#org75a7038">4.8.3. Exercise 1</a></li>
<li><a href="#orgb951fd6">4.8.4. Exercise 2 (short-circuited evaluation)</a></li>
</ul>
</li>
<li><a href="#org807111f">4.9. Loops</a>
<ul>
<li><a href="#org25714e5">4.9.1. While loops</a></li>
<li><a href="#org7cb59a0">4.9.2. For loops</a></li>
</ul>
</li>
<li><a href="#org2bdbb19">4.10. Implementing functions and calls</a>
<ul>
<li><a href="#orgb94b08a">4.10.1. A note about function scope in C♭</a></li>
<li><a href="#orgcebe179">4.10.2. Stack frame (activation record)</a></li>
<li><a href="#org1d5853b">4.10.3. calling conventions</a></li>
<li><a href="#org14fb8cb">4.10.4. example</a></li>
<li><a href="#orgf7c24b8">4.10.5. exercise</a></li>
</ul>
</li>
<li><a href="#org35f1de3">4.11. Notes on x86 assembly</a>
<ul>
<li><a href="#orgd793b08">4.11.1. Some basic x86</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb5a3265">5. Optimization: Making programs faster</a>
<ul>
<li><a href="#orgda81545">5.1. Introduction to analysis and optimization</a></li>
<li><a href="#org1ed41a0">5.2. Safety and profitability</a>
<ul>
<li><a href="#org0b40c8c">5.2.1. Safety</a></li>
<li><a href="#org930e2c3">5.2.2. Profitability</a></li>
</ul>
</li>
<li><a href="#org3992d5d">5.3. IR: 3-address code</a>
<ul>
<li><a href="#orged21de2">5.3.1. Example</a></li>
<li><a href="#orgf013a30">5.3.2. exercise</a></li>
</ul>
</li>
<li><a href="#org064a7a8">5.4. Control-flow graphs (also CFG)</a>
<ul>
<li><a href="#org2f3ff0c">5.4.1. Examples</a></li>
<li><a href="#org51979bb">5.4.2. Building a CFG</a></li>
<li><a href="#org6994b10">5.4.3. Exercise</a></li>
</ul>
</li>
<li><a href="#org806cd5a">5.5. Local optimizations</a>
<ul>
<li><a href="#orgbe6bf0f">5.5.1. Constant Folding and Arithmetic Identities</a></li>
<li><a href="#orge61e27a">5.5.2. Local value numbering</a></li>
<li><a href="#orgecc0571">5.5.3. Exercise</a></li>
</ul>
</li>
<li><a href="#org3b86369">5.6. Data Flow Analysis</a>
<ul>
<li><a href="#org0fefb1f">5.6.1. Motivation</a></li>
<li><a href="#org639c018">5.6.2. DFA fundamentals</a></li>
<li><a href="#org9ff7ce7">5.6.3. Example: Available Expressions -&gt; GCSE</a></li>
<li><a href="#org10fd380">5.6.4. The DFA framework</a></li>
</ul>
</li>
<li><a href="#org18df298">5.7. Order of optimizations</a></li>
</ul>
</li>
<li><a href="#org42dc45e">6. Runtime support: Garbage collection</a>
<ul>
<li><a href="#org3dc7a4b">6.1. New syntax</a></li>
<li><a href="#org41aaead">6.2. New frontend</a></li>
<li><a href="#orgd7d4433">6.3. New codegen</a>
<ul>
<li><a href="#org5e14f54">6.3.1. Managing memory: heap vs stack</a></li>
<li><a href="#org34ef49f">6.3.2. Symbol table</a></li>
<li><a href="#orgd94370f">6.3.3. Struct allocation</a></li>
<li><a href="#orgd90b9d7">6.3.4. Field access in expression</a></li>
<li><a href="#orgfa498e1">6.3.5. Field access on lhs of assignment</a></li>
<li><a href="#org460323e">6.3.6. Enable collecting the root set for GC</a></li>
<li><a href="#orgc1ca14d">6.3.7. Exercise</a></li>
</ul>
</li>
<li><a href="#orgfc6c6a1">6.4. Memory management schemes</a></li>
<li><a href="#orgf3d4752">6.5. Further Reading</a></li>
</ul>
</li>
</ul>
</div>
</nav>
<p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; /&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 0em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(3.859em, 1000em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mrow" id="MathJax-Span-2"></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.095em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"></math></span></span><script type="math/tex" id="MathJax-Element-1">
\newcommand\set[1]{\left\{#1\right\}}
</script>
</p>

<section id="outline-container-org4a09e48" class="outline-2">
<h2 id="org4a09e48"><span class="section-number-2">1</span> Introduction</h2>
<section class="outline-text-2" id="text-1">
</section>
<div id="outline-container-orga3edebf" class="outline-3">
<h3 id="orga3edebf"><span class="section-number-3">1.1</span> How will the quarter work?</h3>
<section class="outline-text-3" id="text-1-1">
</section>
<div id="outline-container-org5eb8bd6" class="outline-4">
<h4 id="org5eb8bd6"><span class="section-number-4">1.1.1</span> Lectures</h4>
<section class="outline-text-4" id="text-1-1-1">
<p>
In order to provide maximum flexibility to student schedules, and to
minimize possible infrastructure problems. So, the lectures are going
to be asynchronous, and there will be ~2.5 hours of videos expected to
be watched every week. This is roughly the same amount of time as
regular lectures. We are aiming to release lectures for each week on
the Monday of the week.
</p>
</section>
</div>
<div id="outline-container-org050b4b6" class="outline-4">
<h4 id="org050b4b6"><span class="section-number-4">1.1.2</span> Discussion Sections</h4>
<section class="outline-text-4" id="text-1-1-2">
<p>
Discussion sections are going to complement the lectures: The sections
will be online via Zoom and recorded. The sections are going to mainly
cover examples relevant to the current lecture and/or the current
assignment.
</p>

<p>
The Zoom link for the discussion sections:
</p>

<p>
<a href="https://ucsb.zoom.us/j/84143344381?pwd=VTNtN08rK1ZWb29OSEd2UGFyem9XQT09">https://ucsb.zoom.us/j/84143344381?pwd=VTNtN08rK1ZWb29OSEd2UGFyem9XQT09</a>
</p>

<p>
Meeting ID: 841 4334 4381
Passcode: 135207
</p>
</section>
</div>

<div id="outline-container-org0f0269f" class="outline-4">
<h4 id="org0f0269f"><span class="section-number-4">1.1.3</span> Office Hours</h4>
<section class="outline-text-4" id="text-1-1-3">
<p>
We are going to cover all weekdays with office hours, with spreading
them to accommodate different time zones. The office hours are (all in
Pacific Time):
</p>

<table>


<colgroup>
<col class="org-left">

<col class="org-right">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Day</th>
<th scope="col" class="org-right">Time</th>
<th scope="col" class="org-left">Person</th>
<th scope="col" class="org-left">Meeting Link/Info</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Monday</td>
<td class="org-right">12:30-1:30</td>
<td class="org-left">Mehmet</td>
<td class="org-left"><a href="https://meet.google.com/etu-edoi-ovz">https://meet.google.com/etu-edoi-ovz</a></td>
</tr>

<tr>
<td class="org-left">Tuesday</td>
<td class="org-right">11-12</td>
<td class="org-left">Sean</td>
<td class="org-left">Zoom Meeting ID: 889 5281 3200, Password: 815434</td>
</tr>

<tr>
<td class="org-left">Wednesday</td>
<td class="org-right">12:30-1:30</td>
<td class="org-left">Mehmet</td>
<td class="org-left"><a href="https://meet.google.com/etu-edoi-ovz">https://meet.google.com/etu-edoi-ovz</a></td>
</tr>

<tr>
<td class="org-left">Thursday</td>
<td class="org-right">3-4</td>
<td class="org-left">Lawrence</td>
<td class="org-left">Zoom Meeting ID: 319 727 3015</td>
</tr>

<tr>
<td class="org-left">Friday</td>
<td class="org-right">11-12</td>
<td class="org-left">Pingyuan</td>
<td class="org-left"><a href="https://ucsb.zoom.us/j/83978569228?pwd=MFJCOWZ1MmJIMzRkazFWNGFRaDZEZz09">Zoom Meeting Link</a></td>
</tr>
</tbody>
</table>
</section>
</div>

<div id="outline-container-org741c9c6" class="outline-4">
<h4 id="org741c9c6"><span class="section-number-4">1.1.4</span> Slack</h4>
<section class="outline-text-4" id="text-1-1-4">
<p>
We are going to use Slack as the primary communication medium. You can
ask questions on Slack (please use one thread per question), create
private Slack groups for discussion, and direct message the
instructors. Here are some <a href="https://cs.ucsb.edu/~emre/slack-tips.html">Slack tips</a> for this class.
</p>
</section>
</div>
<div id="outline-container-org28f415d" class="outline-4">
<h4 id="org28f415d"><span class="section-number-4">1.1.5</span> Assessment</h4>
<section class="outline-text-4" id="text-1-1-5">
<p>
The assessment is based on programming projects, and weekly
quizzes. There are no exams, or attendance requirement.
</p>
</section>
<ol class="org-ol">
<li><a id="org87d7d11"></a>Quizzes<br>
<section class="outline-text-5" id="text-1-1-5-1">
<p>
We deliberately do not have attendance in this course. However,
in order to make sure that you are on top of the covered
material, there are weekly quizzes. Each quiz is based on the
lectures for that week and the quizzes are intended to be simple,
and to measure basic knowledge about the material. The quiz for
each week is going to be posted by Friday, and it will be due
Saturday of the same week. The quizzes are graded in a pass/fail
manner. In order to pass a quiz, you need to get at least half of
the problems correct (rounded up).
</p>
</section>
</li>
<li><a id="org1e2b952"></a>Programing Projects<br>
<section class="outline-text-5" id="text-1-1-5-2">
<p>
The primary method of assessment for this class is the
programming projects. We are aiming for 7 programmng projects for
this class, with average time of 10 days per assignment. Since
there is no final for this class, the last programming project
will be due the end of the finals week.
</p>

<p>
The programming projects are going to be graded out of 2 points
(only integer points will be awarded to programming project).
</p>
</section>
</li>
<li><a id="orgd5b6a18"></a>Late (Slip) Day Policy<br>
<section class="outline-text-5" id="text-1-1-5-3">
<p>
There are other things going on in all of our lives. To
acommodate emergencies and conflicting deadlines, we give you 6
slip days for the class. Here are the rules for
the slip days:
</p>
<ul class="org-ul">
<li>The slip days are applied in discrete increments. So, for
example, submitting an assignment late by 2 minutes, and by 23
hours both count as using 1 slip day.</li>
<li>You can use at most 3 slip days for one assignment. The main
reason for this restriction is that the assignments usually
depend on the solution of the previous assignment, and we want
to make our solutions available as soon as possible to ensure
that your progress is not impeded by not having working parts
covered in the earlier parts of the class.</li>
<li>We do not accept late submissions to the last assignment
because of the university deadline regarding grade submission.</li>
<li>We apply grade days automatically, and if you submitted an
assignment late and do not have enough slip days, we grade the
latest submission that you have enough slip days for (if there
is any).</li>
</ul>

<p>
If you have a situation that prevents you from submitting the
coursework in time (such as a medical emergency), you can contact
the instructor. We also drop the lowest quiz grade and the lowest
assignment grade to acommodate such situations.
</p>
</section>
</li>
<li><a id="org5b7a513"></a>Grading<br>
<section class="outline-text-5" id="text-1-1-5-4">
<p>
Here is the overall rubric for the class, assuming we have all 7
programming assignments and 9 weekly quizzes. In the case that
we need to reduce the number of assignments because of some
unexpected scheduling problems, we are going to let you know about
the changes to the main rubric.
</p>

<p>
Each assignment is graded out of 2, and we discard the lowest
assignment score. So, the assignments are worth 12 points. Each
quiz is worth 0.5 points and we discard the quiz with the lowest
score. So, the quizzes are worth 4 points, and the total points
for the class is 16.
</p>

<p>
In order to pass the class, you have to:
</p>
<ul class="org-ul">
<li>Pass (get 1 out of 2) in at least 4 assignments.</li>
<li>Pass at least 5 quizzes.</li>
</ul>

<p>
The grades are assigned according to the following table:
</p>

<table>


<colgroup>
<col class="org-right">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Points</th>
<th scope="col" class="org-left">Letter Grade</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">15</td>
<td class="org-left">A</td>
</tr>

<tr>
<td class="org-right">14.5</td>
<td class="org-left">A-</td>
</tr>

<tr>
<td class="org-right">14</td>
<td class="org-left">B+</td>
</tr>

<tr>
<td class="org-right">13.5</td>
<td class="org-left">B</td>
</tr>

<tr>
<td class="org-right">13</td>
<td class="org-left">B-</td>
</tr>

<tr>
<td class="org-right">12.5</td>
<td class="org-left">C+</td>
</tr>

<tr>
<td class="org-right">12</td>
<td class="org-left">C</td>
</tr>

<tr>
<td class="org-right">11.5</td>
<td class="org-left">C-</td>
</tr>

<tr>
<td class="org-right">11</td>
<td class="org-left">D+</td>
</tr>

<tr>
<td class="org-right">10.5</td>
<td class="org-left">D</td>
</tr>

<tr>
<td class="org-right">9</td>
<td class="org-left">D-</td>
</tr>
</tbody>
</table>

<p>
Note that there is a gap between <b>D</b> and <b>D-</b> in the table above.
</p>
</section>
</li>
<li><a id="orgf435787"></a>Academic Integrity<br>
<section class="outline-text-5" id="text-1-1-5-5">
<p>
Unfortunately, this is not a pleasant topic to bring up. We need
to remind you about the university policies regarding academic
dishonesty, and to submit your own original work. You can look up
the website of Office of Student Conduct for more details on this
topic.
</p>

<p>
An important reminder is that <b>do not put your work on a public
repository</b>. There have been cases in the past where some
students found and copied other students' code in public
repositories on GitHub. Unfortunately, in such situations, it can
be tricky figuring out who copied from whom, and whether both
parties participated in this willingly. Using version control
systems is good software engineering practice, and we do not
discourage it. However, if you are using common source code
hosting sites like GitHub and GitLab, they both allow you to
create <i>private</i> repositories for free<label for="1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="1" class="margin-toggle"><span class="sidenote">The former allows
private repositories at least when you join the UCSB GitHub
organization.</span> and you should use private repositories for this
class.
</p>
</section>
</li>
</ol>
</div>
<div id="outline-container-org95779b8" class="outline-4">
<h4 id="org95779b8"><span class="section-number-4">1.1.6</span> Prerequisites</h4>
<section class="outline-text-4" id="text-1-1-6">
<p>
130A and 138 prerequisites to know:
</p>
<ul class="org-ul">
<li>C++ programming</li>
<li>Tree data structure, and tree traversals</li>
<li>Finite automata (DFA, NFA) and regular expresssions</li>
<li>Pushdown automata, and context-free grammars</li>
</ul>

<p>
Also, CS 64 is listed as a prerequisite for this class. Brushing up on
your assembly knowledge would be helpful since we are going to
generate assembly code in this class.
</p>
</section>
</div>
</div>
<div id="outline-container-org5cfbc8b" class="outline-3">
<h3 id="org5cfbc8b"><span class="section-number-3">1.2</span> Course Outline</h3>
<section class="outline-text-3" id="text-1-2">
<p>
Compilers is a vast field. We can spend the entire quarter on just
a single part of it. For example, there are graduate-level classes
on only type systems, or my main research area, program
analysis. Since this is an introductory course, we are going to
cover parts of a compiler for a simple C-like language, and dip our
toes into an assortment of topics instead.
</p>

<p>
We are going to start with a simple language <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x266D;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3" style="width: 1.357em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.149em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1001.09em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4"><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Main;">♭</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.991em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mi mathvariant="normal">♭</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">C\flat</script>, and compiler
C1. Our simple language is going to have these features (we are
going to talk about it more in detail later):
</p>

<ul class="org-ul">
<li>There is only one data type: 32-bit integers.</li>
<li>We have arithmetic and relational operations over these
integers. We treat them as Booleans for the purpose of logical
operations like ∨ (or), ∧ (and), ¬ (not).</li>
<li>We also have variables and assignment.</li>
<li>Finally, we have some basic control structures like conditionals,
loops, and functions.</li>
</ul>

<p>
You can think of this language as C without pointers, memory
allocation, or structs.
</p>

<p>
Our initial compiler for <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x266D;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-7" style="width: 1.357em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.149em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1001.09em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-8"><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-10" style="font-family: MathJax_Main;">♭</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.991em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mi mathvariant="normal">♭</mi></math></span></span><script type="math/tex" id="MathJax-Element-3">C\flat</script> is going to have 3 stages (lexing,
parsing, and code generation) <label for="2" class="margin-toggle sidenote-number"></label><input type="checkbox" id="2" class="margin-toggle"><span class="sidenote">We are going to go over what
these stages are in later lectures</span>. With these 3 stages, we are
going to have a fully working compiler that turns our programs into
machine code!
</p>

<p>
Later on, we are going to extend our compiler. We are going to
have:
</p>
<ul class="org-ul">
<li>A simpler intermediate representation of the program.</li>
<li>Compiler optimizations over this intermediate representation to
make the programs faster.</li>
</ul>

<p>
Depending on the pace of the course, we may also explore some
topics like:
</p>

<ul class="org-ul">
<li>Register allocation</li>
<li>AST-level optimizations</li>
<li>Other parsing strategies</li>
</ul>

<p>
Since <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x266D;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-11" style="width: 1.357em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.149em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1001.09em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-12"><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Main;">♭</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.991em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mi mathvariant="normal">♭</mi></math></span></span><script type="math/tex" id="MathJax-Element-4">C\flat</script> is a pretty simple language, we are going to extend
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x266D;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-15" style="width: 1.357em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.149em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1001.09em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-16"><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-18" style="font-family: MathJax_Main;">♭</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.991em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mi mathvariant="normal">♭</mi></math></span></span><script type="math/tex" id="MathJax-Element-5">C\flat</script> to create a new language Cortado. Cortado is going
to have structs, and automatic memory management. To support these
new features we are going to extend the compiler, and we are going
to implement a garbage collector.
</p>

<p>
Finally, having structs in our language means that now we have
different data types. To make sure that our programs do not have
type errors, we are going to define a type system, and a type
checker in our compiler.
</p>

<p>
Also, I am going to try including some interesting and rather
recent developments in each topic as resources to check out. You
are not expected to delve into these topics. However, if any of
these topics is interesting to you, you can contact me to discuss
it or to ask for further resources.
</p>
</section>
</div>
</section>

<section id="outline-container-orgf79ff05" class="outline-2">
<h2 id="orgf79ff05"><span class="section-number-2">2</span> Parsing</h2>
<section class="outline-text-2" id="text-2">
<p>
The tokens we get from the lexer are the terminal symbols of our
programming language. We describe the syntax of the programming
language as a context-free grammar over those terminals. Note that we
now use <a href="https://sites.cs.ucsb.edu/~emre/cs160/handouts/cflat-tokens.pdf">tokens</a> rather than ASCII characters to represent terminals in
<a href="https://sites.cs.ucsb.edu/~emre/cs160/handouts/Cflat-concrete-syntax.pdf">our concrete syntax description</a>. Although the concrete syntax
description uses lexemes for readability <label for="3" class="margin-toggle sidenote-number"></label><input type="checkbox" id="3" class="margin-toggle"><span class="sidenote"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;L&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;while&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;r&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;{&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;b&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;c&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;}&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-19" style="width: 17.348em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.943em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.448em, 1014.89em, 2.65em, -1000em); top: -2.299em; left: 0em;"><span class="mrow" id="MathJax-Span-20"><span class="texatom" id="MathJax-Span-21"><span class="mrow" id="MathJax-Span-22"><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-27" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-28" style="font-family: MathJax_Main; font-style: italic;">L</span><span class="mi" id="MathJax-Span-29" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-30" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-32" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-33" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-34"><span class="mtext" id="MathJax-Span-35" style="font-family: MathJax_Typewriter;">while&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-36"><span class="mrow" id="MathJax-Span-37"><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Main; font-style: italic;">r</span><span class="mi" id="MathJax-Span-39" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-40" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="texatom" id="MathJax-Span-42"><span class="mrow" id="MathJax-Span-43"><span class="mtext" id="MathJax-Span-44" style="font-family: MathJax_Typewriter;">&nbsp;{&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-45"><span class="mrow" id="MathJax-Span-46"><span class="mi" id="MathJax-Span-47" style="font-family: MathJax_Main; font-style: italic;">b</span><span class="mi" id="MathJax-Span-48" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-49" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-50" style="font-family: MathJax_Main; font-style: italic;">c</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Main; font-style: italic;">k</span></span></span><span class="texatom" id="MathJax-Span-52"><span class="mrow" id="MathJax-Span-53"><span class="mtext" id="MathJax-Span-54" style="font-family: MathJax_Typewriter;">&nbsp;}</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.299em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.286em; border-left: 0px solid; width: 0px; height: 1.151em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">L</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">while&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;{&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">b</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">c</mi><mi class="MJX-tex-mathit" mathvariant="italic">k</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;}</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-6">\mathit{whileLoop} ::=
\texttt{while } \mathit{rexp} \texttt{ \{ } \mathit{block} \texttt{
\}} </script> is much more readable than <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;L&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;lt;WHILE &amp;gt;&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;r&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;&amp;lt; LBRACE &amp;gt;&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;b&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;c&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;&amp;lt; RBRACE &amp;gt;&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-55" style="width: 25.342em; display: inline-block;"><span style="display: inline-block; position: relative; width: 21.816em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(3.172em, 1021.76em, 5.804em, -1000em); top: -4.023em; left: 0em;"><span class="mrow" id="MathJax-Span-56"><span style="display: inline-block; position: relative; width: 21.816em; height: 0px;"><span style="position: absolute; clip: rect(3.172em, 1004.37em, 4.374em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-57"><span class="mrow" id="MathJax-Span-58"><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-62" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-63" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-64" style="font-family: MathJax_Main; font-style: italic;">L</span><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-67" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.066em, 1021.76em, 4.38em, -1000em); top: -2.598em; left: 0em;"><span class="mo" id="MathJax-Span-68" style="font-family: MathJax_Main;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-69" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-70"><span class="mtext" id="MathJax-Span-71" style="font-family: MathJax_Typewriter;">&lt;<span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 86%; font-style: normal; font-weight: normal;">
</span>WHILE <span style="margin-left: 0.275em;"></span>&gt;&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-72"><span class="mrow" id="MathJax-Span-73"><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Main; font-style: italic;">r</span><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-76" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-77" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="texatom" id="MathJax-Span-78"><span class="mrow" id="MathJax-Span-79"><span class="mtext" id="MathJax-Span-80" style="font-family: MathJax_Typewriter;">&nbsp;&lt; <span style="margin-left: 0.275em;"></span>LBRACE <span style="margin-left: 0.275em;"></span>&gt;&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-81"><span class="mrow" id="MathJax-Span-82"><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Main; font-style: italic;">b</span><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-86" style="font-family: MathJax_Main; font-style: italic;">c</span><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Main; font-style: italic;">k</span></span></span><span class="texatom" id="MathJax-Span-88"><span class="mrow" id="MathJax-Span-89"><span class="mtext" id="MathJax-Span-90" style="font-family: MathJax_Typewriter;">&nbsp;&lt; <span style="margin-left: 0.275em;"></span>RBRACE <span style="margin-left: 0.275em;"></span>&gt;</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.945em; border-left: 0px solid; width: 0px; height: 2.811em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">L</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&lt;WHILE &gt;&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;&lt; LBRACE &gt;&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">b</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">c</mi><mi class="MJX-tex-mathit" mathvariant="italic">k</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;&lt; RBRACE &gt;</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-7"> \mathit{whileLoop} ::= \texttt{<
WHILE > } \mathit{rexp} \texttt{ < LBRACE > } \mathit{block} \texttt{
< RBRACE >} </script></span>, our terminals for the parser are tokens like
<code>&lt;ID,foo&gt;</code>, <code>&lt;ASSIGN&gt;</code>, <code>&lt;IF&gt;</code>.
</p>
</section>

<div id="outline-container-org7635696" class="outline-3">
<h3 id="org7635696"><span class="section-number-3">2.1</span> CFG Review</h3>
<section class="outline-text-3" id="text-2-1">
<p>
Let's review some CFG concepts from CS 138. By investigating how to
use CFGs to recognize programming languages, we are going to describe
parsing.
</p>
</section>

<div id="outline-container-orgc2c2968" class="outline-4">
<h4 id="orgc2c2968"><span class="section-number-4">2.1.1</span> CFG as a generator</h4>
<section class="outline-text-4" id="text-2-1-1">
<p>
Here is an example CFG with marked rules<label for="4" class="margin-toggle sidenote-number"></label><input type="checkbox" id="4" class="margin-toggle"><span class="sidenote">we will use these
numbers in our derivations to show which rules are applied when</span>
for arithmetic expressions:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;7&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;&amp;#x00F7;&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-91" style="width: 25.693em; display: inline-block;"><span style="display: inline-block; position: relative; width: 22.126em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.619em, 1021.86em, 3.364em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-92"><span class="mtable" id="MathJax-Span-93" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 21.813em; height: 0px;"><span style="position: absolute; clip: rect(2.521em, 1007.76em, 5.089em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 7.782em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1007.76em, 4.389em, -1000em); top: -4.673em; right: 0em;"><span class="mtd" id="MathJax-Span-94"><span class="mrow" id="MathJax-Span-95"><span class="texatom" id="MathJax-Span-96"><span class="mrow" id="MathJax-Span-97"><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-99" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-100" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-101" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-103" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-104" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-105" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-106" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-107" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-108" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-109" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-110" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-111" style="font-family: MathJax_Math; font-style: italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.147em, 1006.23em, 4.389em, -1000em); top: -3.323em; right: 0em;"><span class="mtd" id="MathJax-Span-160"><span class="mrow" id="MathJax-Span-161"><span class="texatom" id="MathJax-Span-162"><span class="mrow" id="MathJax-Span-163"><span class="mi" id="MathJax-Span-164" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-165" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-166" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mi" id="MathJax-Span-167" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">O</span><span class="mi" id="MathJax-Span-168" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-169" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-170" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-171" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-172" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-173" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-174" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(2.451em, 1013.94em, 5.145em, -1000em); top: -4.023em; left: 7.782em;"><span style="display: inline-block; position: relative; width: 14.031em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1013.94em, 4.445em, -1000em); top: -4.673em; left: 0em;"><span class="mtd" id="MathJax-Span-112"><span class="mrow" id="MathJax-Span-113"><span class="mi" id="MathJax-Span-114"></span><span class="mo" id="MathJax-Span-115" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mo" id="MathJax-Span-116" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-117" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-118" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-119" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-120" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-121" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-122"><span class="mrow" id="MathJax-Span-123"><span class="mo" id="MathJax-Span-124" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-125" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-126" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-127" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-128" style="font-family: MathJax_Main;">]</span><span class="texatom" id="MathJax-Span-129"><span class="mrow" id="MathJax-Span-130"><span class="mi" id="MathJax-Span-131" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-132" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-133" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-134" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-135"><span class="mrow" id="MathJax-Span-136"><span class="mi" id="MathJax-Span-137" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-138" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-139" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-140"><span class="mrow" id="MathJax-Span-141"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-143" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-144" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-145" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-146"><span class="mrow" id="MathJax-Span-147"><span class="mo" id="MathJax-Span-148" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-149" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-150" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-151" style="font-family: MathJax_Main;">3</span><span class="mo" id="MathJax-Span-152" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-153" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-154"><span class="mrow" id="MathJax-Span-155"><span class="mi" id="MathJax-Span-156" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-157" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-158" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-159" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1013em, 4.445em, -1000em); top: -3.323em; left: 0em;"><span class="mtd" id="MathJax-Span-175"><span class="mrow" id="MathJax-Span-176"><span class="mi" id="MathJax-Span-177"></span><span class="mo" id="MathJax-Span-178" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mo" id="MathJax-Span-179" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-180" style="font-family: MathJax_Main;">4</span><span class="mo" id="MathJax-Span-181" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-182" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mspace" id="MathJax-Span-183" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-184" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-185"><span class="mo" id="MathJax-Span-186" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-187" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-188" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-189" style="font-family: MathJax_Main;">5</span><span class="mo" id="MathJax-Span-190" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-191" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mspace" id="MathJax-Span-192" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-193" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-194"><span class="mo" id="MathJax-Span-195" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-196" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-197" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-198" style="font-family: MathJax_Main;">6</span><span class="mo" id="MathJax-Span-199" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-200" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mspace" id="MathJax-Span-201" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-202" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-203"><span class="mo" id="MathJax-Span-204" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-205" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-206" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-207" style="font-family: MathJax_Main;">7</span><span class="mo" id="MathJax-Span-208" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-209" style="font-family: MathJax_Main;">÷</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.169em; border-left: 0px solid; width: 0px; height: 2.917em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>∈</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mtd><mtd><mi></mi><mo>::=</mo><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mi>i</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo stretchy="false">)</mo></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>∈</mo><mi>O</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>o</mi><mi>r</mi></mtd><mtd><mi></mi><mo>::=</mo><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>+</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>−</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo><mo>×</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>÷</mo></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-8">\begin{align*}
\mathit{exp} \in Expression & ::= [1] id \;|\; [2] \mathit{exp} \, \mathit{op} \, \mathit{exp} \;|\; [3] (\mathit{exp}) \\
\mathit{op} \in Operator & ::= [4] + \;|\; [5] - \;|\; [6] \times \;|\; [7] \div
\end{align*}</script>

<p>
We can think of this CFG as a generator of strings (by applying the
derivation rules, starting from <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-210" style="width: 1.685em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.437em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1001.44em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-211"><span class="texatom" id="MathJax-Span-212"><span class="mrow" id="MathJax-Span-213"><span class="mi" id="MathJax-Span-214" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-215" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-216" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-9">\mathit{exp}</script>. Here <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-217" style="width: 1.767em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.519em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.583em, 1001.52em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-218"><span class="msubsup" id="MathJax-Span-219"><span style="display: inline-block; position: relative; width: 1.499em; height: 0px;"><span style="position: absolute; clip: rect(3.348em, 1000.94em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mo" id="MathJax-Span-220" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 1em;"><span class="mi" id="MathJax-Span-221" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 0.871em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mo stretchy="false">→</mo><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-10"> \to_n </script> means we are applying derivation rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-222" style="width: 0.741em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.616em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.6em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-223"><span class="mi" id="MathJax-Span-224" style="font-family: MathJax_Math; font-style: italic;">n</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.621em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> n </script> ):
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-225" style="width: 12.474em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.747em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-2.589em, 1010.59em, 6.571em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-226"><span class="mtable" id="MathJax-Span-227" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 10.435em; height: 0px;"><span style="position: absolute; clip: rect(4.781em, 1001.44em, 13.378em, -1000em); top: -9.253em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.435em; height: 0px;"><span style="position: absolute; clip: rect(3.409em, 1001.44em, 4.389em, -1000em); top: -7.88em; right: 0em;"><span class="mtd" id="MathJax-Span-228"><span class="mrow" id="MathJax-Span-229"><span class="texatom" id="MathJax-Span-230"><span class="mrow" id="MathJax-Span-231"><span class="mstyle" id="MathJax-Span-232" style="color: blue;"><span class="mrow" id="MathJax-Span-233" style="color: blue;"><span class="mi" id="MathJax-Span-234" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-235" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-236" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -6.58em; right: 0em;"><span class="mtd" id="MathJax-Span-263"><span class="mrow" id="MathJax-Span-264"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -5.28em; right: 0em;"><span class="mtd" id="MathJax-Span-302"><span class="mrow" id="MathJax-Span-303"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -3.98em; right: 0em;"><span class="mtd" id="MathJax-Span-337"><span class="mrow" id="MathJax-Span-338"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.68em; right: 0em;"><span class="mtd" id="MathJax-Span-367"><span class="mrow" id="MathJax-Span-368"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -1.375em; right: 0em;"><span class="mtd" id="MathJax-Span-393"><span class="mrow" id="MathJax-Span-394"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -0.07em; right: 0em;"><span class="mtd" id="MathJax-Span-414"><span class="mrow" id="MathJax-Span-415"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 9.253em;"></span></span><span style="position: absolute; clip: rect(4.999em, 1009.01em, 13.87em, -1000em); top: -9.54em; left: 1.435em;"><span style="display: inline-block; position: relative; width: 9em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1006.22em, 4.389em, -1000em); top: -7.88em; left: 0em;"><span class="mtd" id="MathJax-Span-237"><span class="mrow" id="MathJax-Span-238"><span class="mi" id="MathJax-Span-239"></span><span class="msubsup" id="MathJax-Span-240" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-241" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-242"><span class="mrow" id="MathJax-Span-243"><span class="mn" id="MathJax-Span-244" style="font-size: 70.7%; font-family: MathJax_Main;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-245" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-246"><span class="mstyle" id="MathJax-Span-247" style="color: blue;"><span class="mrow" id="MathJax-Span-248" style="color: blue;"><span class="mi" id="MathJax-Span-249" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-250" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-251" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-252" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-253"><span class="mrow" id="MathJax-Span-254"><span class="mi" id="MathJax-Span-255" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-256" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-257" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-258"><span class="mrow" id="MathJax-Span-259"><span class="mi" id="MathJax-Span-260" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-261" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-262" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.34em, 1009.01em, 4.389em, -1000em); top: -6.58em; left: 0em;"><span class="mtd" id="MathJax-Span-265"><span class="mrow" id="MathJax-Span-266"><span class="mi" id="MathJax-Span-267"></span><span class="msubsup" id="MathJax-Span-268" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-269" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-270"><span class="mrow" id="MathJax-Span-271"><span class="mn" id="MathJax-Span-272" style="font-size: 70.7%; font-family: MathJax_Main;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-273" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-274"><span class="mstyle" id="MathJax-Span-275" style="color: blue;"><span class="mrow" id="MathJax-Span-276" style="color: blue;"><span class="mi" id="MathJax-Span-277" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-278" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-279" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-280" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-281"><span class="mrow" id="MathJax-Span-282"><span class="mi" id="MathJax-Span-283" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-284" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-285" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-286"><span class="mrow" id="MathJax-Span-287"><span class="mi" id="MathJax-Span-288" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-289" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-290" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-291" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-292"><span class="mrow" id="MathJax-Span-293"><span class="mi" id="MathJax-Span-294" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-295" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-296" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-297"><span class="mrow" id="MathJax-Span-298"><span class="mi" id="MathJax-Span-299" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-300" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-301" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.34em, 1008.14em, 4.389em, -1000em); top: -5.28em; left: 0em;"><span class="mtd" id="MathJax-Span-304"><span class="mrow" id="MathJax-Span-305"><span class="mi" id="MathJax-Span-306"></span><span class="msubsup" id="MathJax-Span-307" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-308" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-309"><span class="mrow" id="MathJax-Span-310"><span class="mn" id="MathJax-Span-311" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mspace" id="MathJax-Span-313" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-314"><span class="mrow" id="MathJax-Span-315"><span class="mstyle" id="MathJax-Span-316" style="color: blue;"><span class="mrow" id="MathJax-Span-317" style="color: blue;"><span class="mi" id="MathJax-Span-318" style="font-family: MathJax_Main; font-style: italic; color: blue;">o</span><span class="mi" id="MathJax-Span-319" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-320" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-321"><span class="mrow" id="MathJax-Span-322"><span class="mi" id="MathJax-Span-323" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-324" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-325" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-326" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-327"><span class="mrow" id="MathJax-Span-328"><span class="mi" id="MathJax-Span-329" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-330" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-331" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-332"><span class="mrow" id="MathJax-Span-333"><span class="mi" id="MathJax-Span-334" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-335" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-336" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.268em, 1008.01em, 4.389em, -1000em); top: -3.98em; left: 0em;"><span class="mtd" id="MathJax-Span-339"><span class="mrow" id="MathJax-Span-340"><span class="mi" id="MathJax-Span-341"></span><span class="msubsup" id="MathJax-Span-342" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-343" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-344"><span class="mrow" id="MathJax-Span-345"><span class="mn" id="MathJax-Span-346" style="font-size: 70.7%; font-family: MathJax_Main;">5</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-347" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-348" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="texatom" id="MathJax-Span-349" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-350"><span class="mstyle" id="MathJax-Span-351" style="color: blue;"><span class="mrow" id="MathJax-Span-352" style="color: blue;"><span class="mi" id="MathJax-Span-353" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-354" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-355" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-356" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-357"><span class="mrow" id="MathJax-Span-358"><span class="mi" id="MathJax-Span-359" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-360" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-361" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-362"><span class="mrow" id="MathJax-Span-363"><span class="mi" id="MathJax-Span-364" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-365" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-366" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.268em, 1007.07em, 4.4em, -1000em); top: -2.68em; left: 0em;"><span class="mtd" id="MathJax-Span-369"><span class="mrow" id="MathJax-Span-370"><span class="mi" id="MathJax-Span-371"></span><span class="msubsup" id="MathJax-Span-372" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-373" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-374"><span class="mrow" id="MathJax-Span-375"><span class="mn" id="MathJax-Span-376" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-377" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-378" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-379" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mspace" id="MathJax-Span-380" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-381"><span class="mrow" id="MathJax-Span-382"><span class="mstyle" id="MathJax-Span-383" style="color: blue;"><span class="mrow" id="MathJax-Span-384" style="color: blue;"><span class="mi" id="MathJax-Span-385" style="font-family: MathJax_Main; font-style: italic; color: blue;">o</span><span class="mi" id="MathJax-Span-386" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-387" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-388"><span class="mrow" id="MathJax-Span-389"><span class="mi" id="MathJax-Span-390" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-391" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-392" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.268em, 1006.94em, 4.4em, -1000em); top: -1.375em; left: 0em;"><span class="mtd" id="MathJax-Span-395"><span class="mrow" id="MathJax-Span-396"><span class="mi" id="MathJax-Span-397"></span><span class="msubsup" id="MathJax-Span-398" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-399" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-400"><span class="mrow" id="MathJax-Span-401"><span class="mn" id="MathJax-Span-402" style="font-size: 70.7%; font-family: MathJax_Main;">6</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-403" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-404" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-405" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-406" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="texatom" id="MathJax-Span-407" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-408"><span class="mstyle" id="MathJax-Span-409" style="color: blue;"><span class="mrow" id="MathJax-Span-410" style="color: blue;"><span class="mi" id="MathJax-Span-411" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-412" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-413" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.268em, 1005.97em, 4.4em, -1000em); top: -0.07em; left: 0em;"><span class="mtd" id="MathJax-Span-416"><span class="mrow" id="MathJax-Span-417"><span class="mi" id="MathJax-Span-418"></span><span class="msubsup" id="MathJax-Span-419" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-420" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-421"><span class="mrow" id="MathJax-Span-422"><span class="mn" id="MathJax-Span-423" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-424" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-425" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-426" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-427" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-428" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 9.54em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -4.889em; border-left: 0px solid; width: 0px; height: 10.359em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mi>x</mi><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow></msub><mi>x</mi><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mi>x</mi><mo>−</mo><mi>y</mi><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>6</mn></mrow></msub><mi>x</mi><mo>−</mo><mi>y</mi><mo>×</mo><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mi>x</mi><mo>−</mo><mi>y</mi><mo>×</mo><mi>z</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-12">\begin{align*}
    \mathit{\color{blue}{exp}} & \to_{2} \mathit{\color{blue}{exp}} \, \mathit{op} \, \mathit{exp} \\
  & \to_{2} \mathit{\color{blue}{exp}} \, \mathit{op} \, \mathit{exp} \, \mathit{op} \, \mathit{exp} \\
  & \to_{1} x \, \mathit{\color{blue}{op}} \, \mathit{exp} \, \mathit{op} \, \mathit{exp} \\
  & \to_{5}
    x - \mathit{\color{blue}{exp}} \, \mathit{op} \, \mathit{exp} \\
  & \to_{1} x - y \, \mathit{\color{blue}{op}} \, \mathit{exp} \\
  & \to_{6} x - y \times \mathit{\color{blue}{exp}} \\
  & \to_{1} x - y \times z
\end{align*}</script>

<p>
Here, we the nonterminal we expand at each stage is in blue. After
applying these derivation rules, we say that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-429" style="width: 1.685em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.437em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1001.44em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-430"><span class="texatom" id="MathJax-Span-431"><span class="mrow" id="MathJax-Span-432"><span class="mi" id="MathJax-Span-433" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-434" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-435" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-13"> \mathit{exp} </script>
derives the string <code>"x - y × z"</code>. We could also represent the
derivation another way, as a tree (where we insert a node for each
nonterminal we expand):
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-parse-tree.png" alt="exp-parse-tree.png">

</figure>

<p>
Note that the start symbol where we begin the derivation is at the
root of the tree, and the derived string (sequence of terminals) is
read off of the leaves. A derivation tree is also called a <i>parse
tree</i>. It shows the syntactic structure of the string being derived. A
parse tree is not quite the same as an AST, parse trees encode some
information that is <i>abstracted away</i> in an AST. We will talk about
the difference between them later.
</p>

<p>
The idea of CFGs as generators is used a lot in automated test
generation to generate valid test inputs according to a grammar. It is
also one of the techniques we use to generate test programs to test
your compilers in this class.
</p>
</section>

<ol class="org-ol">
<li><a id="org25e14d6"></a>Exercise<br>
<section class="outline-text-5" id="text-2-1-1-1">
<p>
For the expression grammar above, give a parse tree for the following
input, also notice that there are multiple possible parse trees for
this input:
</p>

<p>
<code>x + y - x * z + z</code>
</p>
</section>
</li>
</ol>
</div>

<div id="outline-container-org4e01f98" class="outline-4">
<h4 id="org4e01f98"><span class="section-number-4">2.1.2</span> Leftmost and rightmost derivations</h4>
<section class="outline-text-4" id="text-2-1-2">
<p>
The derivation above is called a <i>leftmost derivation</i> because we
always expanded the leftmost nonterminal. We could choose to expand
any nonterminal in any order. For example, we could do a rightmost
derivation to derive the same string:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mstyle mathcolor=&quot;blue&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mstyle&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-436" style="width: 11.44em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.828em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-2.589em, 1009.66em, 6.571em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-437"><span class="mtable" id="MathJax-Span-438" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.502em; height: 0px;"><span style="position: absolute; clip: rect(4.781em, 1001.44em, 13.378em, -1000em); top: -9.253em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.435em; height: 0px;"><span style="position: absolute; clip: rect(3.409em, 1001.44em, 4.389em, -1000em); top: -7.88em; right: 0em;"><span class="mtd" id="MathJax-Span-439"><span class="mrow" id="MathJax-Span-440"><span class="texatom" id="MathJax-Span-441"><span class="mrow" id="MathJax-Span-442"><span class="mstyle" id="MathJax-Span-443" style="color: blue;"><span class="mrow" id="MathJax-Span-444" style="color: blue;"><span class="mi" id="MathJax-Span-445" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-446" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-447" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -6.58em; right: 0em;"><span class="mtd" id="MathJax-Span-474"><span class="mrow" id="MathJax-Span-475"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -5.28em; right: 0em;"><span class="mtd" id="MathJax-Span-498"><span class="mrow" id="MathJax-Span-499"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -3.98em; right: 0em;"><span class="mtd" id="MathJax-Span-519"><span class="mrow" id="MathJax-Span-520"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.68em; right: 0em;"><span class="mtd" id="MathJax-Span-550"><span class="mrow" id="MathJax-Span-551"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -1.375em; right: 0em;"><span class="mtd" id="MathJax-Span-577"><span class="mrow" id="MathJax-Span-578"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -0.07em; right: 0em;"><span class="mtd" id="MathJax-Span-601"><span class="mrow" id="MathJax-Span-602"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 9.253em;"></span></span><span style="position: absolute; clip: rect(4.999em, 1008.07em, 13.87em, -1000em); top: -9.54em; left: 1.435em;"><span style="display: inline-block; position: relative; width: 8.067em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1006.22em, 4.389em, -1000em); top: -7.88em; left: 0em;"><span class="mtd" id="MathJax-Span-448"><span class="mrow" id="MathJax-Span-449"><span class="mi" id="MathJax-Span-450"></span><span class="msubsup" id="MathJax-Span-451" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-452" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-453"><span class="mrow" id="MathJax-Span-454"><span class="mn" id="MathJax-Span-455" style="font-size: 70.7%; font-family: MathJax_Main;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-456" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-457"><span class="mi" id="MathJax-Span-458" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-459" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-460" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-461" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-462"><span class="mrow" id="MathJax-Span-463"><span class="mi" id="MathJax-Span-464" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-465" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-466" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-467"><span class="mrow" id="MathJax-Span-468"><span class="mstyle" id="MathJax-Span-469" style="color: blue;"><span class="mrow" id="MathJax-Span-470" style="color: blue;"><span class="mi" id="MathJax-Span-471" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-472" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-473" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.34em, 1005.24em, 4.389em, -1000em); top: -6.58em; left: 0em;"><span class="mtd" id="MathJax-Span-476"><span class="mrow" id="MathJax-Span-477"><span class="mi" id="MathJax-Span-478"></span><span class="msubsup" id="MathJax-Span-479" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-480" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-481"><span class="mrow" id="MathJax-Span-482"><span class="mn" id="MathJax-Span-483" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-484" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-485"><span class="mi" id="MathJax-Span-486" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-487" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-488" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-489" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-490"><span class="mrow" id="MathJax-Span-491"><span class="mstyle" id="MathJax-Span-492" style="color: blue;"><span class="mrow" id="MathJax-Span-493" style="color: blue;"><span class="mi" id="MathJax-Span-494" style="font-family: MathJax_Main; font-style: italic; color: blue;">o</span><span class="mi" id="MathJax-Span-495" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-496" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-497" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.34em, 1005.44em, 4.389em, -1000em); top: -5.28em; left: 0em;"><span class="mtd" id="MathJax-Span-500"><span class="mrow" id="MathJax-Span-501"><span class="mi" id="MathJax-Span-502"></span><span class="msubsup" id="MathJax-Span-503" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-504" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-505"><span class="mrow" id="MathJax-Span-506"><span class="mn" id="MathJax-Span-507" style="font-size: 70.7%; font-family: MathJax_Main;">6</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-508" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-509"><span class="mstyle" id="MathJax-Span-510" style="color: blue;"><span class="mrow" id="MathJax-Span-511" style="color: blue;"><span class="mi" id="MathJax-Span-512" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-513" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-514" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-515" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-516" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mspace" id="MathJax-Span-517" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-518" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.34em, 1008.07em, 4.389em, -1000em); top: -3.98em; left: 0em;"><span class="mtd" id="MathJax-Span-521"><span class="mrow" id="MathJax-Span-522"><span class="mi" id="MathJax-Span-523"></span><span class="msubsup" id="MathJax-Span-524" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-525" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-526"><span class="mrow" id="MathJax-Span-527"><span class="mn" id="MathJax-Span-528" style="font-size: 70.7%; font-family: MathJax_Main;">2</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-529" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-530"><span class="mi" id="MathJax-Span-531" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-533" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-534" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-535"><span class="mrow" id="MathJax-Span-536"><span class="mi" id="MathJax-Span-537" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-538" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-539" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-540"><span class="mrow" id="MathJax-Span-541"><span class="mstyle" id="MathJax-Span-542" style="color: blue;"><span class="mrow" id="MathJax-Span-543" style="color: blue;"><span class="mi" id="MathJax-Span-544" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-545" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-546" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mo" id="MathJax-Span-547" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mspace" id="MathJax-Span-548" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-549" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.34em, 1007.13em, 4.4em, -1000em); top: -2.68em; left: 0em;"><span class="mtd" id="MathJax-Span-552"><span class="mrow" id="MathJax-Span-553"><span class="mi" id="MathJax-Span-554"></span><span class="msubsup" id="MathJax-Span-555" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-556" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-557"><span class="mrow" id="MathJax-Span-558"><span class="mn" id="MathJax-Span-559" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-560" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-561"><span class="mi" id="MathJax-Span-562" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-563" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-564" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-565" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-566"><span class="mrow" id="MathJax-Span-567"><span class="mstyle" id="MathJax-Span-568" style="color: blue;"><span class="mrow" id="MathJax-Span-569" style="color: blue;"><span class="mi" id="MathJax-Span-570" style="font-family: MathJax_Main; font-style: italic; color: blue;">o</span><span class="mi" id="MathJax-Span-571" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-572" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-573" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-574" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mspace" id="MathJax-Span-575" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-576" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.268em, 1007.33em, 4.4em, -1000em); top: -1.375em; left: 0em;"><span class="mtd" id="MathJax-Span-579"><span class="mrow" id="MathJax-Span-580"><span class="mi" id="MathJax-Span-581"></span><span class="msubsup" id="MathJax-Span-582" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-583" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-584"><span class="mrow" id="MathJax-Span-585"><span class="mn" id="MathJax-Span-586" style="font-size: 70.7%; font-family: MathJax_Main;">5</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="texatom" id="MathJax-Span-587" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-588"><span class="mstyle" id="MathJax-Span-589" style="color: blue;"><span class="mrow" id="MathJax-Span-590" style="color: blue;"><span class="mi" id="MathJax-Span-591" style="font-family: MathJax_Main; font-style: italic; color: blue;">e</span><span class="mi" id="MathJax-Span-592" style="font-family: MathJax_Main; font-style: italic; color: blue;">x</span><span class="mi" id="MathJax-Span-593" style="font-family: MathJax_Main; font-style: italic; color: blue;">p</span></span></span></span></span><span class="mspace" id="MathJax-Span-594" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-595" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mspace" id="MathJax-Span-596" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-597" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-598" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mspace" id="MathJax-Span-599" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-600" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.268em, 1005.97em, 4.4em, -1000em); top: -0.07em; left: 0em;"><span class="mtd" id="MathJax-Span-603"><span class="mrow" id="MathJax-Span-604"><span class="mi" id="MathJax-Span-605"></span><span class="msubsup" id="MathJax-Span-606" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.34em, 1000.94em, 4.206em, -1000em); top: -4.023em; left: 0em;"><span class="mo" id="MathJax-Span-607" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.873em; left: 1em;"><span class="texatom" id="MathJax-Span-608"><span class="mrow" id="MathJax-Span-609"><span class="mn" id="MathJax-Span-610" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-611" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-612" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-613" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-614" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-615" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 9.54em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -4.889em; border-left: 0px solid; width: 0px; height: 10.359em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mi>z</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>6</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mo>×</mo><mspace width="thinmathspace"></mspace><mi>z</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mo>×</mo><mspace width="thinmathspace"></mspace><mi>z</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mi>y</mi><mo>×</mo><mspace width="thinmathspace"></mspace><mi>z</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>5</mn></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mstyle mathcolor="blue"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mstyle></mrow><mspace width="thinmathspace"></mspace><mo>−</mo><mspace width="thinmathspace"></mspace><mi>y</mi><mo>×</mo><mspace width="thinmathspace"></mspace><mi>z</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><msub><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow></msub><mi>x</mi><mo>−</mo><mi>y</mi><mo>×</mo><mi>z</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-14">\begin{align*}
    \mathit{\color{blue}{exp}} & \to_{2} \mathit{exp} \, \mathit{op} \, \mathit{\color{blue}{exp}} \\
  & \to_{1} \mathit{exp} \, \mathit{\color{blue}{op}} \, z \\
  & \to_{6} \mathit{\color{blue}{exp}} \, \times \, z \\
  & \to_{2} \mathit{exp} \, \mathit{op} \, \mathit{\color{blue}{exp}} \times \, z \\
  & \to_{1} \mathit{exp} \, \mathit{\color{blue}{op}} \, y \times \, z \\
  & \to_{5} \mathit{\color{blue}{exp}} \, - \, y \times \, z \\
  & \to_{1} x - y \times z
\end{align*}</script>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-parse-tree.png" alt="exp-parse-tree.png">

</figure>

<p>
Notice that, we still get the same parse tree. So, the parse tree is
independent of the order of derivation.
</p>
</section>
</div>

<div id="outline-container-org818104b" class="outline-4">
<h4 id="org818104b"><span class="section-number-4">2.1.3</span> CFG as a recognizer</h4>
<section class="outline-text-4" id="text-2-1-3">
<p>
We can also think of a CFG as a recognizer, rather than a generator:
Given an input string, is there a derivation from the start symbol to
that string? For example:
</p>

<p>
Input string: <code>x - y × z</code>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mo&gt;?&lt;/mo&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-616" style="width: 8.951em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.718em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.182em, 1007.72em, 2.545em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-617"><span class="texatom" id="MathJax-Span-618"><span class="mrow" id="MathJax-Span-619"><span class="mi" id="MathJax-Span-620" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-621" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-622" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="msubsup" id="MathJax-Span-623" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.762em; height: 0px;"><span style="position: absolute; clip: rect(3.348em, 1000.94em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mo" id="MathJax-Span-624" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 1em;"><span class="texatom" id="MathJax-Span-625"><span class="mrow" id="MathJax-Span-626"><span class="mo" id="MathJax-Span-627" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span class="mo" id="MathJax-Span-628" style="font-size: 70.7%; font-family: MathJax_Main;">?</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mi" id="MathJax-Span-629" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mo" id="MathJax-Span-630" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-631" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-632" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-633" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.285em; border-left: 0px solid; width: 0px; height: 1.39em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><msup><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mo>∗</mo><mo>?</mo></mrow></msup><mi>x</mi><mo>−</mo><mi>y</mi><mo>×</mo><mi>z</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-15">
\mathit{exp} \to^{*?} x - y \times z
</script>
</p>

<p>
For this case, the answer is yes and we have <a href="https://sites.cs.ucsb.edu/~emre/cs160/figures/exp-parse-tree.png">the parse tree</a> as the
evidence. This idea is the essence of parsing: Proving that a string
is recognized by a grammar by producing a parse tree showing the
derivation.
</p>
</section>
</div>

<div id="outline-container-org74f207f" class="outline-4">
<h4 id="org74f207f"><span class="section-number-4">2.1.4</span> Ambiguity</h4>
<section class="outline-text-4" id="text-2-1-4">
<p>
There is a fly in the ointment, the same one we ran into with lexing:
ambiguity. A grammar is <b>ambiguous</b> if there exists at least one
string that has more than one parse tree.
</p>

<p>
Let's take the first example grammar and the string <code>"x - y * z"</code>:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-parse-tree.png" alt="exp-parse-tree.png">

</figure>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-parse-tree2.png" alt="exp-parse-tree2.png">

</figure>

<p>
This is a problem for programming languages: The two parse trees have
different order of operations, so they may evaluate to different
values. For example, let's evaluate both parse trees under the
environment <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x21A6;&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x21A6;&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x21A6;&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-634" style="width: 9.977em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.58em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.417em, 1008.53em, 2.545em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-635"><span class="mi" id="MathJax-Span-636" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-637" style="font-family: MathJax_Main; padding-left: 0.278em;">↦</span><span class="mn" id="MathJax-Span-638" style="font-family: MathJax_Main; padding-left: 0.278em;">3</span><span class="mo" id="MathJax-Span-639" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-640" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-641" style="font-family: MathJax_Main; padding-left: 0.278em;">↦</span><span class="mn" id="MathJax-Span-642" style="font-family: MathJax_Main; padding-left: 0.278em;">4</span><span class="mo" id="MathJax-Span-643" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-644" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-645" style="font-family: MathJax_Main; padding-left: 0.278em;">↦</span><span class="mn" id="MathJax-Span-646" style="font-family: MathJax_Main; padding-left: 0.278em;">5</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.285em; border-left: 0px solid; width: 0px; height: 1.118em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mo stretchy="false">↦</mo><mn>3</mn><mo>,</mo><mi>y</mi><mo stretchy="false">↦</mo><mn>4</mn><mo>,</mo><mi>z</mi><mo stretchy="false">↦</mo><mn>5</mn></math></span></span><script type="math/tex" id="MathJax-Element-16"> x \mapsto 3, y \mapsto 4, z \mapsto 5 </script>:
</p>

<p>
For the first parse tree,
</p>

<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-parse-tree-eval.png" alt="exp-parse-tree-eval.png">

</figure>

<p>
which evaluates to <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;15&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-647" style="width: 6.775em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.829em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.428em, 1005.78em, 2.422em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-648"><span class="mo" id="MathJax-Span-649" style="font-family: MathJax_Main;">−</span><span class="mn" id="MathJax-Span-650" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-651" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mn" id="MathJax-Span-652" style="font-family: MathJax_Main; padding-left: 0.222em;">5</span><span class="mo" id="MathJax-Span-653" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-654" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mn" id="MathJax-Span-655" style="font-family: MathJax_Main;">15</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.143em; border-left: 0px solid; width: 0px; height: 0.963em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>−</mo><mn>1</mn><mo>∗</mo><mn>5</mn><mo>=</mo><mo>−</mo><mn>15</mn></math></span></span><script type="math/tex" id="MathJax-Element-17"> -1 * 5 = -15 </script>. For the second parse tree,
</p>

<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-parse-tree-eval2.png" alt="exp-parse-tree-eval2.png">

</figure>

<p>
which evaluates to <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;20&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;17&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-656" style="width: 6.775em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.829em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.418em, 1005.81em, 2.422em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-657"><span class="mn" id="MathJax-Span-658" style="font-family: MathJax_Main;">3</span><span class="mo" id="MathJax-Span-659" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mn" id="MathJax-Span-660" style="font-family: MathJax_Main; padding-left: 0.222em;">20</span><span class="mo" id="MathJax-Span-661" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mo" id="MathJax-Span-662" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mn" id="MathJax-Span-663" style="font-family: MathJax_Main;">17</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.143em; border-left: 0px solid; width: 0px; height: 0.975em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mo>−</mo><mn>20</mn><mo>=</mo><mo>−</mo><mn>17</mn></math></span></span><script type="math/tex" id="MathJax-Element-18"> 3 - 20 = -17 </script>. So, the syntactic structure of
the program influences its meaning. This is similar to ambiguous
sentences in English. Consider "She saw the man with a telescope",
depending on how we parse this sentence we can get either of these
meanings:
</p>

<ul class="org-ul">
<li>She used a telescope to see the man.</li>
<li>She saw the man, who was holding a telescope.</li>
</ul>

<p>
This is an important problem to resolve, we do not want our programs'
results to be undetermined and depend on the whim of the
compiler. This problem may come up in many places. A famous example is
the /dangling <code>else</code> / problem. Consider the following grammar for <code>if</code>
statements with an optional <code>else</code> part:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;else&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;a&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;g&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-664" style="width: 19.83em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.069em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.03em, 1016.9em, 4.013em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-665"><span class="mtable" id="MathJax-Span-666" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 16.748em; height: 0px;"><span style="position: absolute; clip: rect(2.155em, 1002.45em, 5.775em, -1000em); top: -4.253em; left: 0em;"><span style="display: inline-block; position: relative; width: 2.447em; height: 0px;"><span style="position: absolute; clip: rect(3.225em, 1002.45em, 4.206em, -1000em); top: -5.322em; right: 0em;"><span class="mtd" id="MathJax-Span-667"><span class="mrow" id="MathJax-Span-668"><span class="mspace" id="MathJax-Span-669" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-670"><span class="mrow" id="MathJax-Span-671"><span class="mi" id="MathJax-Span-672" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-673" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-674" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-675" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-676" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -4.022em; right: 0em;"><span class="mtd" id="MathJax-Span-714"><span class="mrow" id="MathJax-Span-715"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.673em; right: 0em;"><span class="mtd" id="MathJax-Span-744"><span class="mrow" id="MathJax-Span-745"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.253em;"></span></span><span style="position: absolute; clip: rect(2.443em, 1014.3em, 6.312em, -1000em); top: -4.54em; left: 2.447em;"><span style="display: inline-block; position: relative; width: 14.301em; height: 0px;"><span style="position: absolute; clip: rect(3.225em, 1014.3em, 4.389em, -1000em); top: -5.322em; left: 0em;"><span class="mtd" id="MathJax-Span-677"><span class="mrow" id="MathJax-Span-678"><span class="mi" id="MathJax-Span-679"></span><span class="mo" id="MathJax-Span-680" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-681" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-682" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-683"><span class="mtext" id="MathJax-Span-684" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-685" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-686"><span class="mrow" id="MathJax-Span-687"><span class="mi" id="MathJax-Span-688" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-689" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-690" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-691" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-692"><span class="mrow" id="MathJax-Span-693"><span class="mtext" id="MathJax-Span-694" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-695" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-696"><span class="mrow" id="MathJax-Span-697"><span class="mi" id="MathJax-Span-698" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-699" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-700" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-701" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-702" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-703"><span class="mrow" id="MathJax-Span-704"><span class="mtext" id="MathJax-Span-705" style="font-family: MathJax_Typewriter;">else</span></span></span><span class="mspace" id="MathJax-Span-706" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-707"><span class="mrow" id="MathJax-Span-708"><span class="mi" id="MathJax-Span-709" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-710" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-711" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-712" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-713" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1008.14em, 4.444em, -1000em); top: -4.022em; left: 0em;"><span class="mtd" id="MathJax-Span-716"><span class="mrow" id="MathJax-Span-717"><span class="mi" id="MathJax-Span-718"></span><span class="texatom" id="MathJax-Span-719"><span class="mrow" id="MathJax-Span-720"><span class="mo" id="MathJax-Span-721" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-722" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-723"><span class="mrow" id="MathJax-Span-724"><span class="mtext" id="MathJax-Span-725" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-726" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-727"><span class="mrow" id="MathJax-Span-728"><span class="mi" id="MathJax-Span-729" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-730" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-731" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-732" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-733"><span class="mrow" id="MathJax-Span-734"><span class="mtext" id="MathJax-Span-735" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-736" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-737"><span class="mrow" id="MathJax-Span-738"><span class="mi" id="MathJax-Span-739" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-740" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-741" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-742" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-743" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.43em, 4.444em, -1000em); top: -2.673em; left: 0em;"><span class="mtd" id="MathJax-Span-746"><span class="mrow" id="MathJax-Span-747"><span class="mi" id="MathJax-Span-748"></span><span class="texatom" id="MathJax-Span-749"><span class="mrow" id="MathJax-Span-750"><span class="mo" id="MathJax-Span-751" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-752" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-753"><span class="mrow" id="MathJax-Span-754"><span class="mi" id="MathJax-Span-755" style="font-family: MathJax_Main; font-style: italic;">a</span><span class="mi" id="MathJax-Span-756" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-757" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-758" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-759" style="font-family: MathJax_Main; font-style: italic;">g</span><span class="mi" id="MathJax-Span-760" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-761" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-762" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-763" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-764" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.54em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.922em; border-left: 0px solid; width: 0px; height: 4.423em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">else</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">a</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-19">\begin{align*}
\; \mathit{stmt} \; & ::= \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{stmt} \; \texttt{else} \; \mathit{stmt} \; \\
     & | \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{stmt} \; \\
     & | \; \mathit{assignment} \\
\end{align*}</script>

<p>
Now consider the following program:
</p>

<pre class="code"><code>a := 1;
if x then if y then a := 2; else a := 3;
</code></pre>

<p>
Suppose <code>x</code> is false, what is the value of <code>a</code>?
</p>

<p>
Answer: it depends on how we parse the program, and which <code>if</code>
statement the <code>else</code> block belongs to. If we parse the second line
like the following, then the <code>a := 3</code> statement will be executed
(because <code>x</code> is false, the else part of the blue <code>if</code> statement is
executed). So, the value of <code>a</code> will be 3 after running the program:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/dangling-else-tree-1.png" alt="dangling-else-tree-1.png">

</figure>

<p>
Note that I did not draw the subtrees for the assignments for the sake
of brevity. Another valid parse tree is the one below, note that now
the <code>else</code> block belongs to the red if statement:
</p>



<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/dangling-else-tree-2.png" alt="dangling-else-tree-2.png">

</figure>

<p>
Now, since <code>x</code> is false, nothing in the red <code>if</code> statement is executed
so the final value of <code>a</code> is <code>1</code>. So, we got different results for the
same program! Moreover, parts of the program that are executed are
different. This is highly unintuitive and unreliable, so we are going
to work on how to circumvent ambiguity in the next section.
</p>
</section>

<ol class="org-ol">
<li><a id="org8f39fd3"></a>Exercise<br>
<section class="outline-text-5" id="text-2-1-4-1">
<p>
For the expression grammar above, and input from the previous exercise (which is also below), give two more parse trees.
</p>

<p>
<code>x + y - x * z + z</code>
</p>

<p>
for each of the three parse trees, give the result assuming x = 1, y = 2, z = 3.
</p>
</section>
</li>
</ol>
</div>

<div id="outline-container-org8fe3ae9" class="outline-4">
<h4 id="org8fe3ae9"><span class="section-number-4">2.1.5</span> Determinism</h4>
<section class="outline-text-4" id="text-2-1-5">
<p>
So, ambiguity prevents us from giving one exact meaning to our
programs. Maybe we can try preventing ambiguity. Unfortunately, it
turns out that determining whether a grammar is ambiguous is
undecidable. However, we there is a characteristic that guarantees
<i>unambiguity</i>, and is decidable efficiently: <b>determinism</b>.
</p>

<p>
Determinism is easiest to explain with pushdown automata (PDA). Recall
that a PDA is a finite automaton with a stack; the transitions between
states can depend on both the current input symbol, and the symbol on
top of the stack. Also recall that, unlike DFA and NFA which are
equivalent, deterministic PDA (DPDA) and nondeterministic PDA are not
equivalent: PDA are strictly more powerful than DPDA. A PDA is
deterministic if the finite automaton part can make exactly one
transition from a state for a given input symbol &amp; top of stack.
</p>

<p>
We know from 138 that PDA are equivalent to CFGs: We can transform PDA
→ CFG and CFG → PDA while recognizing the same language. Since DPDA
are weaker, there must be some CFGs that cannot be expressed as
DPDA. It turns out that this includes all ambiguous CFGs (along with
some unambiguous ones as well).
</p>

<p>
A CFG that can be expressed as a DPDA is called a DCFG. DCFGs are
guaranteed to be unambiguous, and there is a well-defined algorithm to
check whether a grammar is a DCFG or not. Here is a Venn diagram
showing the relationship between the languages recognized by these:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/Lecture%25208-Venn%2520Diagram.jpeg" alt="Lecture%208-Venn%20Diagram.jpeg">

</figure>
</section>
</div>

<div id="outline-container-orgc051967" class="outline-4">
<h4 id="orgc051967"><span class="section-number-4">2.1.6</span> Dealing with ambiguity</h4>
<section class="outline-text-4" id="text-2-1-6">
<p>
Remember that ambiguity is a characteristic of the grammar, not the
language: the same language can have multiple grammars that describe
it, and some of them may be ambiguous while others are not.<label for="5" class="margin-toggle sidenote-number"></label><input type="checkbox" id="5" class="margin-toggle"><span class="sidenote">For
example, the grammar for the "dangling else" problem above is
ambiguous but there are unambiguous grammars for that language.</span>
Though, there are languages such that all grammars describing them are
ambiguous, but this does not happen for programming language grammars
in practice.
</p>


<p>
What this means is that even if we start with an ambiguous grammar for
our language <label for="6" class="margin-toggle sidenote-number"></label><input type="checkbox" id="6" class="margin-toggle"><span class="sidenote">such as the concrete grammar given in the handout,
which is definitely ambiguous as it contains the part of the
arithmetic expressions above which we showed is ambiguous</span>, we can
transform that grammar into a new, deterministic (and thus
unambiguous) grammar that describes the same language. of course this
cannot work for all context-sensitive languages because DCFGs are
strictly weaker than CFGs, but again it's true for practical
programming languages.
</p>

<p>
Also, sometimes (like in the case of our classroom programming
languages) programming language designers deliberately choose a syntax
that is parser-friendly to generate better error messages. So, our
general strategy will be to take the original, potentially ambiguous
grammar and transform it to be deterministic while still describing
the same language. if it turns out that the original language cannot be
described with a DCFG then we will have to change that language so that
it can be.
</p>

<p>
Let's look at the "dangling else" grammar again:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;else&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;a&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;g&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-765" style="width: 19.83em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.069em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.03em, 1016.9em, 4.013em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-766"><span class="mtable" id="MathJax-Span-767" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 16.748em; height: 0px;"><span style="position: absolute; clip: rect(2.155em, 1002.45em, 5.775em, -1000em); top: -4.253em; left: 0em;"><span style="display: inline-block; position: relative; width: 2.447em; height: 0px;"><span style="position: absolute; clip: rect(3.225em, 1002.45em, 4.206em, -1000em); top: -5.322em; right: 0em;"><span class="mtd" id="MathJax-Span-768"><span class="mrow" id="MathJax-Span-769"><span class="mspace" id="MathJax-Span-770" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-771"><span class="mrow" id="MathJax-Span-772"><span class="mi" id="MathJax-Span-773" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-774" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-775" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-776" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-777" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -4.022em; right: 0em;"><span class="mtd" id="MathJax-Span-815"><span class="mrow" id="MathJax-Span-816"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.673em; right: 0em;"><span class="mtd" id="MathJax-Span-845"><span class="mrow" id="MathJax-Span-846"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.253em;"></span></span><span style="position: absolute; clip: rect(2.443em, 1014.3em, 6.312em, -1000em); top: -4.54em; left: 2.447em;"><span style="display: inline-block; position: relative; width: 14.301em; height: 0px;"><span style="position: absolute; clip: rect(3.225em, 1014.3em, 4.389em, -1000em); top: -5.322em; left: 0em;"><span class="mtd" id="MathJax-Span-778"><span class="mrow" id="MathJax-Span-779"><span class="mi" id="MathJax-Span-780"></span><span class="mo" id="MathJax-Span-781" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-782" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-783" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-784"><span class="mtext" id="MathJax-Span-785" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-786" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-787"><span class="mrow" id="MathJax-Span-788"><span class="mi" id="MathJax-Span-789" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-790" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-791" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-792" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-793"><span class="mrow" id="MathJax-Span-794"><span class="mtext" id="MathJax-Span-795" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-796" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-797"><span class="mrow" id="MathJax-Span-798"><span class="mi" id="MathJax-Span-799" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-800" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-801" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-802" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-803" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-804"><span class="mrow" id="MathJax-Span-805"><span class="mtext" id="MathJax-Span-806" style="font-family: MathJax_Typewriter;">else</span></span></span><span class="mspace" id="MathJax-Span-807" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-808"><span class="mrow" id="MathJax-Span-809"><span class="mi" id="MathJax-Span-810" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-811" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-812" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-813" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-814" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1008.14em, 4.444em, -1000em); top: -4.022em; left: 0em;"><span class="mtd" id="MathJax-Span-817"><span class="mrow" id="MathJax-Span-818"><span class="mi" id="MathJax-Span-819"></span><span class="texatom" id="MathJax-Span-820"><span class="mrow" id="MathJax-Span-821"><span class="mo" id="MathJax-Span-822" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-823" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-824"><span class="mrow" id="MathJax-Span-825"><span class="mtext" id="MathJax-Span-826" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-827" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-828"><span class="mrow" id="MathJax-Span-829"><span class="mi" id="MathJax-Span-830" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-831" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-832" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-833" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-834"><span class="mrow" id="MathJax-Span-835"><span class="mtext" id="MathJax-Span-836" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-837" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-838"><span class="mrow" id="MathJax-Span-839"><span class="mi" id="MathJax-Span-840" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-841" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-842" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-843" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-844" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.43em, 4.444em, -1000em); top: -2.673em; left: 0em;"><span class="mtd" id="MathJax-Span-847"><span class="mrow" id="MathJax-Span-848"><span class="mi" id="MathJax-Span-849"></span><span class="texatom" id="MathJax-Span-850"><span class="mrow" id="MathJax-Span-851"><span class="mo" id="MathJax-Span-852" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-853" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-854"><span class="mrow" id="MathJax-Span-855"><span class="mi" id="MathJax-Span-856" style="font-family: MathJax_Main; font-style: italic;">a</span><span class="mi" id="MathJax-Span-857" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-858" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-859" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-860" style="font-family: MathJax_Main; font-style: italic;">g</span><span class="mi" id="MathJax-Span-861" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-862" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-863" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-864" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-865" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.54em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.922em; border-left: 0px solid; width: 0px; height: 4.423em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">else</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">a</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-20">\begin{align*}
\; \mathit{stmt} \; & ::= \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{stmt} \; \texttt{else} \; \mathit{stmt} \; \\
     & | \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{stmt} \; \\
     & | \; \mathit{assignment} \\
\end{align*}</script>

<p>
the ambiguous input with two parse trees was:
</p>

<pre class="code"><code>a := 1;
if x then if y then a := 2; else a := 3;
</code></pre>

<p>
We can transform the grammar as follows:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;E&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;else&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;a&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;g&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd /&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;E&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;if&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;then&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;E&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;else&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;E&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;a&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;s&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;g&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;m&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;n&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-866" style="width: 25.463em; display: inline-block;"><span style="display: inline-block; position: relative; width: 21.954em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-2.005em, 1021.79em, 5.987em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-867"><span class="mtable" id="MathJax-Span-868" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 21.648em; height: 0px;"><span style="position: absolute; clip: rect(4.146em, 1003.91em, 11.715em, -1000em); top: -8.218em; left: 0em;"><span style="display: inline-block; position: relative; width: 3.895em; height: 0px;"><span style="position: absolute; clip: rect(3.225em, 1002.45em, 4.206em, -1000em); top: -7.296em; right: 0em;"><span class="mtd" id="MathJax-Span-869"><span class="mrow" id="MathJax-Span-870"><span class="mspace" id="MathJax-Span-871" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-872"><span class="mrow" id="MathJax-Span-873"><span class="mi" id="MathJax-Span-874" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-875" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-876" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-877" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-878" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -5.996em; right: 0em;"><span class="mtd" id="MathJax-Span-920"><span class="mrow" id="MathJax-Span-921"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -4.647em; right: 0em;"><span class="mtd" id="MathJax-Span-950"><span class="mrow" id="MathJax-Span-951"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -3.298em; right: 0em;"><span class="mtd" id="MathJax-Span-971"><span class="mrow" id="MathJax-Span-972"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.157em, 1003.91em, 4.206em, -1000em); top: -1.998em; right: 0em;"><span class="mtd" id="MathJax-Span-975"><span class="mrow" id="MathJax-Span-976"><span class="mspace" id="MathJax-Span-977" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-978"><span class="mrow" id="MathJax-Span-979"><span class="mi" id="MathJax-Span-980" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-981" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-982" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-983" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-984" style="font-family: MathJax_Main; font-style: italic;">E</span><span class="mi" id="MathJax-Span-985" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-986" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-987" style="font-family: MathJax_Main; font-style: italic;">e</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -0.698em; right: 0em;"><span class="mtd" id="MathJax-Span-1033"><span class="mrow" id="MathJax-Span-1034"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.218em;"></span></span><span style="position: absolute; clip: rect(4.423em, 1017.75em, 12.309em, -1000em); top: -8.563em; left: 3.895em;"><span style="display: inline-block; position: relative; width: 17.753em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1016.03em, 4.389em, -1000em); top: -7.296em; left: 0em;"><span class="mtd" id="MathJax-Span-879"><span class="mrow" id="MathJax-Span-880"><span class="mi" id="MathJax-Span-881"></span><span class="mo" id="MathJax-Span-882" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-883" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-884" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-885"><span class="mtext" id="MathJax-Span-886" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-887" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-888"><span class="mrow" id="MathJax-Span-889"><span class="mi" id="MathJax-Span-890" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-891" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-892" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-893" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-894"><span class="mrow" id="MathJax-Span-895"><span class="mtext" id="MathJax-Span-896" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-897" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-898"><span class="mrow" id="MathJax-Span-899"><span class="mi" id="MathJax-Span-900" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-901" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-902" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-903" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-904" style="font-family: MathJax_Main; font-style: italic;">E</span><span class="mi" id="MathJax-Span-905" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-906" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-907" style="font-family: MathJax_Main; font-style: italic;">e</span></span></span><span class="mspace" id="MathJax-Span-908" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-909"><span class="mrow" id="MathJax-Span-910"><span class="mtext" id="MathJax-Span-911" style="font-family: MathJax_Typewriter;">else</span></span></span><span class="mspace" id="MathJax-Span-912" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-913"><span class="mrow" id="MathJax-Span-914"><span class="mi" id="MathJax-Span-915" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-916" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-917" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-918" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-919" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1008.14em, 4.444em, -1000em); top: -5.996em; left: 0em;"><span class="mtd" id="MathJax-Span-922"><span class="mrow" id="MathJax-Span-923"><span class="mi" id="MathJax-Span-924"></span><span class="texatom" id="MathJax-Span-925"><span class="mrow" id="MathJax-Span-926"><span class="mo" id="MathJax-Span-927" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-928" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-929"><span class="mrow" id="MathJax-Span-930"><span class="mtext" id="MathJax-Span-931" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-932" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-933"><span class="mrow" id="MathJax-Span-934"><span class="mi" id="MathJax-Span-935" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-936" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-937" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-938" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-939"><span class="mrow" id="MathJax-Span-940"><span class="mtext" id="MathJax-Span-941" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-942" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-943"><span class="mrow" id="MathJax-Span-944"><span class="mi" id="MathJax-Span-945" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-946" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-947" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-948" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span><span class="mspace" id="MathJax-Span-949" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.43em, 4.444em, -1000em); top: -4.647em; left: 0em;"><span class="mtd" id="MathJax-Span-952"><span class="mrow" id="MathJax-Span-953"><span class="mi" id="MathJax-Span-954"></span><span class="texatom" id="MathJax-Span-955"><span class="mrow" id="MathJax-Span-956"><span class="mo" id="MathJax-Span-957" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-958" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-959"><span class="mrow" id="MathJax-Span-960"><span class="mi" id="MathJax-Span-961" style="font-family: MathJax_Main; font-style: italic;">a</span><span class="mi" id="MathJax-Span-962" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-963" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-964" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-965" style="font-family: MathJax_Main; font-style: italic;">g</span><span class="mi" id="MathJax-Span-966" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-967" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-968" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-969" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-970" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -3.298em; left: 0em;"><span class="mtd" id="MathJax-Span-973"><span class="mrow" id="MathJax-Span-974"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.157em, 1017.75em, 4.389em, -1000em); top: -1.998em; left: 0em;"><span class="mtd" id="MathJax-Span-988"><span class="mrow" id="MathJax-Span-989"><span class="mi" id="MathJax-Span-990"></span><span class="mo" id="MathJax-Span-991" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-992" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-993" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-994"><span class="mtext" id="MathJax-Span-995" style="font-family: MathJax_Typewriter;">if</span></span></span><span class="mspace" id="MathJax-Span-996" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-997"><span class="mrow" id="MathJax-Span-998"><span class="mi" id="MathJax-Span-999" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1000" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1001" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-1002" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1003"><span class="mrow" id="MathJax-Span-1004"><span class="mtext" id="MathJax-Span-1005" style="font-family: MathJax_Typewriter;">then</span></span></span><span class="mspace" id="MathJax-Span-1006" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1007"><span class="mrow" id="MathJax-Span-1008"><span class="mi" id="MathJax-Span-1009" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-1010" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1011" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1012" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-1013" style="font-family: MathJax_Main; font-style: italic;">E</span><span class="mi" id="MathJax-Span-1014" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1015" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1016" style="font-family: MathJax_Main; font-style: italic;">e</span></span></span><span class="mspace" id="MathJax-Span-1017" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1018"><span class="mrow" id="MathJax-Span-1019"><span class="mtext" id="MathJax-Span-1020" style="font-family: MathJax_Typewriter;">else</span></span></span><span class="mspace" id="MathJax-Span-1021" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1022"><span class="mrow" id="MathJax-Span-1023"><span class="mi" id="MathJax-Span-1024" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-1025" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1026" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1027" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-1028" style="font-family: MathJax_Main; font-style: italic;">E</span><span class="mi" id="MathJax-Span-1029" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-1030" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1031" style="font-family: MathJax_Main; font-style: italic;">e</span></span></span><span class="mspace" id="MathJax-Span-1032" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.43em, 4.444em, -1000em); top: -0.698em; left: 0em;"><span class="mtd" id="MathJax-Span-1035"><span class="mrow" id="MathJax-Span-1036"><span class="mi" id="MathJax-Span-1037"></span><span class="texatom" id="MathJax-Span-1038"><span class="mrow" id="MathJax-Span-1039"><span class="mo" id="MathJax-Span-1040" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1041" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1042"><span class="mrow" id="MathJax-Span-1043"><span class="mi" id="MathJax-Span-1044" style="font-family: MathJax_Main; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1045" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1046" style="font-family: MathJax_Main; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1047" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1048" style="font-family: MathJax_Main; font-style: italic;">g</span><span class="mi" id="MathJax-Span-1049" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1050" style="font-family: MathJax_Main; font-style: italic;">m</span><span class="mi" id="MathJax-Span-1051" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1052" style="font-family: MathJax_Main; font-style: italic;">n</span><span class="mi" id="MathJax-Span-1053" style="font-family: MathJax_Main; font-style: italic;">t</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.563em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -4.212em; border-left: 0px solid; width: 0px; height: 9.004em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">E</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">else</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">a</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow></mtd></mtr><mtr><mtd></mtd><mtd></mtd></mtr><mtr><mtd><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">E</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi></mrow></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">if</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">then</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">E</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">else</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">E</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi></mrow><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">a</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">s</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">g</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">m</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">n</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-21">\begin{align*}
\; \mathit{stmt} \; & ::= \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{withElse} \; \texttt{else} \; \mathit{stmt} \; \\
     & | \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{stmt} \; \\
     & | \; \mathit{assignment} \\
& \\
\; \mathit{withElse} & ::= \; \texttt{if} \; \mathit{exp} \; \texttt{then} \; \mathit{withElse} \; \texttt{else} \; \mathit{withElse} \; \\
   & | \; \mathit{assignment}
\end{align*}</script>

<p>
Notice that this grammar recognizes the same language as the naïve
grammar above. However, this grammar does not have a way to associate
the <code>else</code> block with the outermost (the first) <code>if</code> statement (if we
have an <code>else</code> block bound to an if statement, then the <code>then</code> block
inside can contain only if statements with <code>else</code> statements). So,
only the first way of parsing the program is valid. So, this grammar
does not have the ambiguity the first one has<label for="7" class="margin-toggle sidenote-number"></label><input type="checkbox" id="7" class="margin-toggle"><span class="sidenote">The technique in
this grammar is what C uses to resolve this ambiguity.</span>. However, this
grammar limits the programmer: we cannot specify that we want the
<code>else</code> to be bound to the outer <code>if</code>. A more complete grammar resolves
this problem by adding braces to delimit the blocks, indeed both our
language C♭ and C use braces to overcome this restriction.
</p>
</section>

<ol class="org-ol">
<li><a id="org9e6a820"></a>Exercise<br>
<section class="outline-text-5" id="text-2-1-6-1">
<p>
Given the following input, show that it has at least two parse trees
using the original conditional grammar and that it has a single parse
tree using the new conditional grammar.
</p>

<pre class="code"><code>if x then if y then if z then a := 1; else a := 2; else a := 3;
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-org3c181d6" class="outline-4">
<h4 id="org3c181d6"><span class="section-number-4">2.1.7</span> Another solution</h4>
<section class="outline-text-4" id="text-2-1-7">
<p>
There is another solution to resolve ambiguity: Changing the language
itself (i.e., the concrete syntax) to not have the ambiguity in the
first place rather than trying to find an unambiguous grammar:
</p>

<ul class="org-ul">
<li>Change the arithmetic expressions to require explicit parentheses</li>
<li>Delimit <code>if</code> statements with a terminating token like <code>endif</code></li>
<li>etc.</li>
</ul>

<p>
Some languages like the Lisp family carry this idea to an extreme and
use parentheses everywhere to make everything unambiguous. This makes
writing a parser trivial, and removes the consideration for stuff like
operator precedence. For example, the expression <code>if x &lt; y then a :=
2;</code> could be represented like the following in a Lisp:
</p>

<pre class="code"><code>(if (&lt; x y)
    (:= a 2))
</code></pre>

<p>
However, programmers commonly dislike this solution because it makes
them type more, and humans are more familiar with the standard
mathematical notation. since programmers are the main consumers of
programming languages, this means that most languages have to work at
dealing with ambiguity without messing with the language syntax too
much.
</p>
</section>
</div>
</div>

<div id="outline-container-org3fa3fc8" class="outline-3">
<h3 id="org3fa3fc8"><span class="section-number-3">2.2</span> Parsing Strategies</h3>
<section class="outline-text-3" id="text-2-2">
<p>
So now we know what parsing is, but how do we do it? Let's survey the
landscape before we drill down on LL(k), the specific strategy we will
be discussing (and implementing) for this class. There are many
different strategies, but they can all be divided into two basic
approaches: <i>top-down</i> and <i>bottom-up</i>. Let's look at the example
expression grammar from before:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mn&gt;7&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mo&gt;&amp;#x00F7;&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1054" style="width: 25.693em; display: inline-block;"><span style="display: inline-block; position: relative; width: 22.126em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.619em, 1021.86em, 3.364em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1055"><span class="mtable" id="MathJax-Span-1056" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 21.813em; height: 0px;"><span style="position: absolute; clip: rect(2.521em, 1007.76em, 5.089em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 7.782em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1007.76em, 4.389em, -1000em); top: -4.673em; right: 0em;"><span class="mtd" id="MathJax-Span-1057"><span class="mrow" id="MathJax-Span-1058"><span class="texatom" id="MathJax-Span-1059"><span class="mrow" id="MathJax-Span-1060"><span class="mi" id="MathJax-Span-1061" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1062" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1063" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-1064" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mi" id="MathJax-Span-1065" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-1066" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1067" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-1068" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1069" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1070" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1071" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-1072" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1073" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1074" style="font-family: MathJax_Math; font-style: italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.147em, 1006.23em, 4.389em, -1000em); top: -3.323em; right: 0em;"><span class="mtd" id="MathJax-Span-1123"><span class="mrow" id="MathJax-Span-1124"><span class="texatom" id="MathJax-Span-1125"><span class="mrow" id="MathJax-Span-1126"><span class="mi" id="MathJax-Span-1127" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1128" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-1129" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mi" id="MathJax-Span-1130" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">O</span><span class="mi" id="MathJax-Span-1131" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-1132" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1133" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-1134" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1135" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-1136" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1137" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(2.451em, 1013.94em, 5.145em, -1000em); top: -4.023em; left: 7.782em;"><span style="display: inline-block; position: relative; width: 14.031em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1013.94em, 4.445em, -1000em); top: -4.673em; left: 0em;"><span class="mtd" id="MathJax-Span-1075"><span class="mrow" id="MathJax-Span-1076"><span class="mi" id="MathJax-Span-1077"></span><span class="mo" id="MathJax-Span-1078" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mo" id="MathJax-Span-1079" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-1080" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-1081" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1082" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1083" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-1084" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1085"><span class="mrow" id="MathJax-Span-1086"><span class="mo" id="MathJax-Span-1087" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1088" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1089" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-1090" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-1091" style="font-family: MathJax_Main;">]</span><span class="texatom" id="MathJax-Span-1092"><span class="mrow" id="MathJax-Span-1093"><span class="mi" id="MathJax-Span-1094" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1095" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1096" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-1097" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1098"><span class="mrow" id="MathJax-Span-1099"><span class="mi" id="MathJax-Span-1100" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-1101" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-1102" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1103"><span class="mrow" id="MathJax-Span-1104"><span class="mi" id="MathJax-Span-1105" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1106" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1107" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mspace" id="MathJax-Span-1108" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1109"><span class="mrow" id="MathJax-Span-1110"><span class="mo" id="MathJax-Span-1111" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1112" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1113" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-1114" style="font-family: MathJax_Main;">3</span><span class="mo" id="MathJax-Span-1115" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1116" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-1117"><span class="mrow" id="MathJax-Span-1118"><span class="mi" id="MathJax-Span-1119" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-1120" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-1121" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-1122" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1013em, 4.445em, -1000em); top: -3.323em; left: 0em;"><span class="mtd" id="MathJax-Span-1138"><span class="mrow" id="MathJax-Span-1139"><span class="mi" id="MathJax-Span-1140"></span><span class="mo" id="MathJax-Span-1141" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mo" id="MathJax-Span-1142" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mn" id="MathJax-Span-1143" style="font-family: MathJax_Main;">4</span><span class="mo" id="MathJax-Span-1144" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1145" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mspace" id="MathJax-Span-1146" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1147" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-1148"><span class="mo" id="MathJax-Span-1149" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1150" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1151" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-1152" style="font-family: MathJax_Main;">5</span><span class="mo" id="MathJax-Span-1153" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1154" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mspace" id="MathJax-Span-1155" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1156" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-1157"><span class="mo" id="MathJax-Span-1158" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1159" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1160" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-1161" style="font-family: MathJax_Main;">6</span><span class="mo" id="MathJax-Span-1162" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1163" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mspace" id="MathJax-Span-1164" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1165" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-1166"><span class="mo" id="MathJax-Span-1167" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1168" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1169" style="font-family: MathJax_Main;">[</span><span class="mn" id="MathJax-Span-1170" style="font-family: MathJax_Main;">7</span><span class="mo" id="MathJax-Span-1171" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1172" style="font-family: MathJax_Main;">÷</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.169em; border-left: 0px solid; width: 0px; height: 2.917em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>∈</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi></mtd><mtd><mi></mi><mo>::=</mo><mo stretchy="false">[</mo><mn>1</mn><mo stretchy="false">]</mo><mi>i</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>2</mn><mo stretchy="false">]</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>3</mn><mo stretchy="false">]</mo><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo stretchy="false">)</mo></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>∈</mo><mi>O</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>o</mi><mi>r</mi></mtd><mtd><mi></mi><mo>::=</mo><mo stretchy="false">[</mo><mn>4</mn><mo stretchy="false">]</mo><mo>+</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>5</mn><mo stretchy="false">]</mo><mo>−</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>6</mn><mo stretchy="false">]</mo><mo>×</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">[</mo><mn>7</mn><mo stretchy="false">]</mo><mo>÷</mo></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-22">\begin{align*}
\mathit{exp} \in Expression & ::= [1] id \;|\; [2] \mathit{exp} \, \mathit{op} \, \mathit{exp} \;|\; [3] (\mathit{exp}) \\
\mathit{op} \in Operator & ::= [4] + \;|\; [5] - \;|\; [6] \times \;|\; [7] \div
\end{align*}</script>

<p>
and some input like "x - y * z". Our goal is to create a parse tree
(for now do not worry about the fact that this grammar is ambiguous).
</p>
</section>
<div id="outline-container-org8a05d9b" class="outline-4">
<h4 id="org8a05d9b"><span class="section-number-4">2.2.1</span> Top-down parsing</h4>
<section class="outline-text-4" id="text-2-2-1">
<p>
We start from the root of the parse tree and work our way down to the
leaves, selecting productions s.t. when we get to the leaves they will
match the string. this seems like it involves a lot of guess-work, but
clever versions of this approach won't need to guess anything.
</p>

<p>
See the lecture 9 video for top-down parsing in action. We are going
to use a top-down parsing strategy in this class. However, let's
discuss other parsing strategies first.
</p>
</section>
</div>
<div id="outline-container-orgfca30ba" class="outline-4">
<h4 id="orgfca30ba"><span class="section-number-4">2.2.2</span> Bottom-up parsing</h4>
<section class="outline-text-4" id="text-2-2-2">
<p>
Start from the leaves (i.e., the input string) and work our way up the
tree, picking productions in reverse.
</p>

<p>
See the lecture 9 video for bottom-up parsing in action.
</p>
</section>
</div>
<div id="outline-container-orgfb453ea" class="outline-4">
<h4 id="orgfb453ea"><span class="section-number-4">2.2.3</span> Strategies based on algorithms</h4>
<section class="outline-text-4" id="text-2-2-3">
<p>
the parsing strategies can also be divided based on which grammars
they actually work for. there are parsing algorithms that will handle
any CFG: CYK, Earley, GLL, GLR, …
</p>

<p>
these algorithms are all <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1173" style="width: 2.999em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.586em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.26em, 1002.49em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1174"><span class="mi" id="MathJax-Span-1175" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-1176" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-1177"><span style="display: inline-block; position: relative; width: 1.029em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.58em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1178" style="font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.345em; left: 0.6em;"><span class="mn" id="MathJax-Span-1179" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-1180" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.352em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-23"> O(n^3) </script>, which is way too expensive to be
desirable for compilers that operate on large programs (millions of
lines of code). they also result in parse forests instead of parse
trees because of ambiguity, which means that after parsing we need
some way to deterministically select which parse tree we actually
want.
</p>

<p>
GLL and GLR are actually somewhat recent additions that have the nice
property that their complexity depends on the grammar: if the grammar
is unambiguous they are <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1181" style="width: 2.506em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.135em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1002.04em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1182"><span class="mi" id="MathJax-Span-1183" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-1184" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1185" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-1186" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-24"> O(n) </script>; the more ambiguous the grammar is
the more the asymptotic complexity grows until it hits <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1187" style="width: 2.999em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.586em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.26em, 1002.49em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1188"><span class="mi" id="MathJax-Span-1189" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-1190" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-1191"><span style="display: inline-block; position: relative; width: 1.029em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.58em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1192" style="font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.345em; left: 0.6em;"><span class="mn" id="MathJax-Span-1193" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-1194" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.352em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>3</mn></msup><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-25"> O(n^3)
</script>. this means that we can have grammars that are only a little bit
ambiguous (which can be convenient in some cases) without a big
penalty. however, they are fairly complicated algorithms and even when
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1195" style="width: 2.506em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.135em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1002.04em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1196"><span class="mi" id="MathJax-Span-1197" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-1198" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1199" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-1200" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-26"> O(n) </script> the constant factor is pretty high. still, there are
commercial frontends for languages like C++ that use GLL or GLR. Also,
ANTLR (a popular parser generator) generates parsers based on a variant
of LL(*) with techniques from GLR from a given grammar.
</p>

<p>
Classically, compilers focus on parsing algorithms for deterministic
grammars (DCFGs). There is a classic parsing algorithm called
LR<label for="8" class="margin-toggle sidenote-number"></label><input type="checkbox" id="8" class="margin-toggle"><span class="sidenote">LR stands for <i>Left-to-right, Rightmost derivation in reverse</i></span>,
a bottom-up algorithm, that can work for any deterministic grammar.
</p>

<p>
There is another classic parsing algorithm called LL(<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1201" style="width: 0.618em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.534em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.4em, 1000.52em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1202"><span class="mi" id="MathJax-Span-1203" style="font-family: MathJax_Math; font-style: italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.913em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-27">k</script>) <label for="9" class="margin-toggle sidenote-number"></label><input type="checkbox" id="9" class="margin-toggle"><span class="sidenote">LL
stands for <i>Left-to-right, Leftmost derivation</i> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1204" style="width: 0.63em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.522em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.448em, 1000.5em, 2.467em, -1000em); top: -2.299em; left: 0em;"><span class="mrow" id="MathJax-Span-1205"><span class="mi" id="MathJax-Span-1206" style="font-family: MathJax_Math; font-style: italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.299em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-28"> k </script> is called
lookahead and determines how much peeking ahead the parser needs</span>, a
top-down algorithm, that works for a large subset of deterministic
grammars. The different in expressiveness between LL(<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1207" style="width: 0.618em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.534em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.4em, 1000.52em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1208"><span class="mi" id="MathJax-Span-1209" style="font-family: MathJax_Math; font-style: italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.913em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-29">k</script>) and LR is
exactly due to the fact that LR is bottom-up and LL(<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1210" style="width: 0.618em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.534em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.4em, 1000.52em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1211"><span class="mi" id="MathJax-Span-1212" style="font-family: MathJax_Math; font-style: italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.913em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-30">k</script>) is
top-down. Specifically, we have the following relationship between the
classes of languages recognized by these algorithms:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x228A;&lt;/mo&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x228A;&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;&amp;#x228A;&lt;/mo&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mo&gt;&amp;#x228A;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1213" style="width: 18.279em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.747em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.644em, 1015.55em, 3.339em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1214"><span class="mtable" id="MathJax-Span-1215" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 15.418em; height: 0px;"><span style="position: absolute; clip: rect(2.476em, 1015.38em, 4.942em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 15.418em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1015.38em, 4.445em, -1000em); top: -4.648em; right: 0em;"><span class="mtd" id="MathJax-Span-1216"><span class="mrow" id="MathJax-Span-1217"><span class="mi" id="MathJax-Span-1218" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-1219" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mo" id="MathJax-Span-1220" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-1221" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-1222" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1223" style="font-family: MathJax_AMS; padding-left: 0.278em;">⊊</span><span class="mi" id="MathJax-Span-1224" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">L</span><span class="mi" id="MathJax-Span-1225" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mo" id="MathJax-Span-1226" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-1227" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-1228" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1229" style="font-family: MathJax_AMS; padding-left: 0.278em;">⊊</span><span class="mo" id="MathJax-Span-1230" style="font-family: MathJax_Main; padding-left: 0.278em;">…</span><span class="mo" id="MathJax-Span-1231" style="font-family: MathJax_AMS; padding-left: 0.278em;">⊊</span><span class="mi" id="MathJax-Span-1232" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">L</span><span class="mi" id="MathJax-Span-1233" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mo" id="MathJax-Span-1234" style="font-family: MathJax_AMS; padding-left: 0.278em;">⊊</span><span class="mi" id="MathJax-Span-1235" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-1236" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mi" id="MathJax-Span-1237" style="font-family: MathJax_Math; font-style: italic;">L</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.146em, 1009.2em, 4.217em, -1000em); top: -3.298em; right: 0em;"><span class="mtd" id="MathJax-Span-1238"><span class="mrow" id="MathJax-Span-1239"><span class="mi" id="MathJax-Span-1240" style="font-family: MathJax_Math; font-style: italic;">G</span><span class="mi" id="MathJax-Span-1241" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-1242" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mo" id="MathJax-Span-1243" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1244" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">G</span><span class="mi" id="MathJax-Span-1245" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-1246" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mo" id="MathJax-Span-1247" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-1248" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-1249" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mi" id="MathJax-Span-1250" style="font-family: MathJax_Math; font-style: italic;">L</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.14em; border-left: 0px solid; width: 0px; height: 2.859em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>L</mi><mi>L</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>⊊</mo><mi>L</mi><mi>L</mi><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo><mo>⊊</mo><mo>…</mo><mo>⊊</mo><mi>L</mi><mi>R</mi><mo>⊊</mo><mi>C</mi><mi>F</mi><mi>L</mi></mtd></mtr><mtr><mtd><mi>G</mi><mi>L</mi><mi>L</mi><mo>=</mo><mi>G</mi><mi>L</mi><mi>R</mi><mo>=</mo><mi>C</mi><mi>F</mi><mi>L</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-31">\begin{align*}
LL(1) \subsetneq LL(2) \subsetneq \ldots \subsetneq LR \subsetneq CFL \\
GLL = GLR = CFL
\end{align*}</script>

<p>
Even though LL(k) is not as expressive as LR, it's still a popular
choice and one that can work for most programming languages. for
example, both GCC and Clang/LLVM use parsers based on LL(k) for their
C/C++ frontends. We will see why it is a popular choice once we
describe how it works.
</p>
</section>
</div>
</div>
<div id="outline-container-org77bc2d2" class="outline-3">
<h3 id="org77bc2d2"><span class="section-number-3">2.3</span> Recursive Descent and LL(1)</h3>
<section class="outline-text-3" id="text-2-3">
<p>
We are going to build an "almost LL(1)" parser for C♭ <label for="10" class="margin-toggle sidenote-number"></label><input type="checkbox" id="10" class="margin-toggle" checked="checked"><span class="sidenote">There is
only one part of the grammar that is not LL(1) and it turns out to be
LL(2) so our parser is still an LL(k) parser</span>. Before attempting to do
so, let's understand how LL parsing works. Then, we can discuss how to
transform a grammar (such as the one in the handout) into something
suitable for LL(1).
</p>


<p>
A common implementation strategy for top-down parsers in general is
called <b>recursive descent</b>. there are other ways to implement them,
but recursive descent is used a lot. i will describe a naive recursive
descent implementation first, then show how LL(1) can make it
efficient.
</p>

<p>
To illustrate the concepts, let's use the following CFG:
</p>

<p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1251" style="width: 10.552em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.072em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1009.07em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1252"><span class="mi" id="MathJax-Span-1253" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-1254" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1255" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1256" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1257" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mspace" id="MathJax-Span-1258" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1259" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-1260" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1261" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mspace" id="MathJax-Span-1262" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1263"><span class="mrow" id="MathJax-Span-1264"><span class="mo" id="MathJax-Span-1265" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1266" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1267" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-1268" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1269" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-1270" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1271" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-1272" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1273"><span class="mrow" id="MathJax-Span-1274"><span class="mo" id="MathJax-Span-1275" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1276" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1277" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>S</mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>a</mi><mspace width="thinmathspace"></mspace><mi>S</mi><mspace width="thinmathspace"></mspace><mi>a</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>b</mi><mspace width="thinmathspace"></mspace><mi>S</mi><mspace width="thinmathspace"></mspace><mi>b</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>c</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-32">
S \; ::= \; a \, S \, a \; | \; b \, S \, b \; | \; c
</script>
</p>


<p>
We know that we can convert any CFG into an equivalent PDA (there are,
in fact, a number of possible transformations). we will use the
transformation that yields a top-down strategy (here we add
derivations as translation rules, and the stack holds the nodes of the
parse tree (i.e., the nonterminals) that we have not put the children
of yet):
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/top-down-pda1.png" alt="top-down-pda1.png">

</figure>

<p>
Here, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1278" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1279"><span class="msubsup" id="MathJax-Span-1280"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1281" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1282" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-33"> q_0 </script> is the starting state, <code>$</code> is the end-of-stack marker,
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1283" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1284"><span class="msubsup" id="MathJax-Span-1285"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1286" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1287" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-34"> q_2 </script> is the accepting state, and the transition labeled "x/y→z"
means "on input <code>x</code>, pop <code>y</code> from the top of the stack and push <code>z</code> to
the stack".
</p>

<p>
Note that this is not a DPDA because there are multiple possible
transitions we can have from <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1288" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1289"><span class="msubsup" id="MathJax-Span-1290"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1291" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1292" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-35"> q_1 </script> when there is an <code>S</code> on top of
the stack. For now, we will assume that we have an oracle which tells
us the right choice to make. Let's see what happens with the input
<code>abcba</code>. We will go from <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1293" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1294"><span class="msubsup" id="MathJax-Span-1295"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1296" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1297" style="font-size: 70.7%; font-family: MathJax_Main;">0</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-36"> q_0 </script> to <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1298" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1299"><span class="msubsup" id="MathJax-Span-1300"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1301" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1302" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-37"> q_1 </script>, consume the input,
then go to the accepting state. The interesting part is what happens
to the stack while we are in <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1303" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1304"><span class="msubsup" id="MathJax-Span-1305"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1306" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1307" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-38"> q_1 </script> (here "[xyz]abc" means we
consumed "xyz" from the input and the stack has the nodes "abc"):
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1308" style="width: 6.555em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.632em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-3.406em, 1005.44em, 7.389em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1309"><span class="mtable" id="MathJax-Span-1310" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 5.318em; height: 0px;"><span style="position: absolute; clip: rect(5.54em, 1000.65em, 15.989em, -1000em); top: -11.092em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.645em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.65em, 4.217em, -1000em); top: -8.698em; right: 0em;"><span class="mtd" id="MathJax-Span-1311"><span class="mrow" id="MathJax-Span-1312"><span class="mi" id="MathJax-Span-1313" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -7.398em; right: 0em;"><span class="mtd" id="MathJax-Span-1321"><span class="mrow" id="MathJax-Span-1322"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -6.048em; right: 0em;"><span class="mtd" id="MathJax-Span-1332"><span class="mrow" id="MathJax-Span-1333"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -4.698em; right: 0em;"><span class="mtd" id="MathJax-Span-1345"><span class="mrow" id="MathJax-Span-1346"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -3.348em; right: 0em;"><span class="mtd" id="MathJax-Span-1358"><span class="mrow" id="MathJax-Span-1359"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -1.998em; right: 0em;"><span class="mtd" id="MathJax-Span-1371"><span class="mrow" id="MathJax-Span-1372"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -0.648em; right: 0em;"><span class="mtd" id="MathJax-Span-1384"><span class="mrow" id="MathJax-Span-1385"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: 0.702em; right: 0em;"><span class="mtd" id="MathJax-Span-1397"><span class="mrow" id="MathJax-Span-1398"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 11.092em;"></span></span><span style="position: absolute; clip: rect(5.827em, 1004.65em, 16.527em, -1000em); top: -11.379em; left: 0.645em;"><span style="display: inline-block; position: relative; width: 4.673em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1003.24em, 4.217em, -1000em); top: -8.698em; left: 0em;"><span class="mtd" id="MathJax-Span-1314"><span class="mrow" id="MathJax-Span-1315"><span class="mi" id="MathJax-Span-1316"></span><span class="mo" id="MathJax-Span-1317" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-1318" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-1319" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-1320" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1003.79em, 4.445em, -1000em); top: -7.398em; left: 0em;"><span class="mtd" id="MathJax-Span-1323"><span class="mrow" id="MathJax-Span-1324"><span class="mi" id="MathJax-Span-1325"></span><span class="mo" id="MathJax-Span-1326" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1327" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1328" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-1329" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1330" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-1331" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1004.65em, 4.445em, -1000em); top: -6.048em; left: 0em;"><span class="mtd" id="MathJax-Span-1334"><span class="mrow" id="MathJax-Span-1335"><span class="mi" id="MathJax-Span-1336"></span><span class="mo" id="MathJax-Span-1337" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1338" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1339" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-1340" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1341" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1342" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-1343" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1344" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1004.65em, 4.445em, -1000em); top: -4.698em; left: 0em;"><span class="mtd" id="MathJax-Span-1347"><span class="mrow" id="MathJax-Span-1348"><span class="mi" id="MathJax-Span-1349"></span><span class="mo" id="MathJax-Span-1350" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1351" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1352" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1353" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mo" id="MathJax-Span-1354" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1355" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-1356" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1357" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1004.44em, 4.445em, -1000em); top: -3.348em; left: 0em;"><span class="mtd" id="MathJax-Span-1360"><span class="mrow" id="MathJax-Span-1361"><span class="mi" id="MathJax-Span-1362"></span><span class="mo" id="MathJax-Span-1363" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1364" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1365" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1366" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mo" id="MathJax-Span-1367" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1368" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1369" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1370" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1004.44em, 4.445em, -1000em); top: -1.998em; left: 0em;"><span class="mtd" id="MathJax-Span-1373"><span class="mrow" id="MathJax-Span-1374"><span class="mi" id="MathJax-Span-1375"></span><span class="mo" id="MathJax-Span-1376" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1377" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1378" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1379" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1380" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mo" id="MathJax-Span-1381" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1382" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1383" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1004.44em, 4.445em, -1000em); top: -0.648em; left: 0em;"><span class="mtd" id="MathJax-Span-1386"><span class="mrow" id="MathJax-Span-1387"><span class="mi" id="MathJax-Span-1388"></span><span class="mo" id="MathJax-Span-1389" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1390" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1391" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1392" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1393" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1394" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mo" id="MathJax-Span-1395" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1396" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1004.34em, 4.445em, -1000em); top: 0.702em; left: 0em;"><span class="mtd" id="MathJax-Span-1399"><span class="mrow" id="MathJax-Span-1400"><span class="mi" id="MathJax-Span-1401"></span><span class="mo" id="MathJax-Span-1402" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1403" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1404" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-1405" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1406" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1407" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1408" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-1409" style="font-family: MathJax_Main;">]</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 11.379em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -5.838em; border-left: 0px solid; width: 0px; height: 12.255em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>S</mi></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mi>a</mi><mi>S</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mi>S</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mi>b</mi><mi>S</mi><mi>b</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mi>b</mi><mo stretchy="false">]</mo><mi>S</mi><mi>b</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mi>b</mi><mo stretchy="false">]</mo><mi>c</mi><mi>b</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mi>b</mi><mi>c</mi><mo stretchy="false">]</mo><mi>b</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mi>b</mi><mi>c</mi><mi>b</mi><mo stretchy="false">]</mo><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mi>b</mi><mi>c</mi><mi>b</mi><mi>a</mi><mo stretchy="false">]</mo></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-39">\begin{align*}
S & \to aSa \\
 & \to [a]Sa \\
 & \to [a]bSba \\
 & \to [ab]Sba \\
 & \to [ab]cba \\
 & \to [abc]ba \\
 & \to [abcb]a \\
 & \to [abcba]
\end{align*}</script>

<p>
The stack is going through a derivation of the string: We start by
pushing the start symbol, then one of two things happens:
</p>

<ol class="org-ol">
<li>the top symbol is a terminal, so we try to match it against the
input</li>
<li>the top symbol is a nonterminal, so we expand it</li>
</ol>

<p>
This builds a derivation starting from the start symbol and working
towards the input string, i.e., a top-down strategy. In fact, because
of the way we're pushing things on the stack we're always going to
expand the leftmost nonterminal, so we're getting a leftmost
derivation.
</p>

<p>
What if we didn't have the oracle to tell us the right choice? then we
would need to guess, and if we guess wrong we would have to backtrack:
Roll everything back to a previous guess and guess something
different.
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;bold&quot;&gt;failure: backtrack\!&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1410" style="width: 14.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.126em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.031em, 1011.87em, 4.014em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1411"><span class="mtable" id="MathJax-Span-1412" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 11.797em; height: 0px;"><span style="position: absolute; clip: rect(2.19em, 1000.65em, 5.89em, -1000em); top: -4.368em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.645em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.65em, 4.217em, -1000em); top: -5.323em; right: 0em;"><span class="mtd" id="MathJax-Span-1413"><span class="mrow" id="MathJax-Span-1414"><span class="mi" id="MathJax-Span-1415" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -4.023em; right: 0em;"><span class="mtd" id="MathJax-Span-1423"><span class="mrow" id="MathJax-Span-1424"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.673em; right: 0em;"><span class="mtd" id="MathJax-Span-1434"><span class="mrow" id="MathJax-Span-1435"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.368em;"></span></span><span style="position: absolute; clip: rect(2.42em, 1011.06em, 6.37em, -1000em); top: -4.598em; left: 0.645em;"><span style="display: inline-block; position: relative; width: 11.152em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1003.24em, 4.217em, -1000em); top: -5.323em; left: 0em;"><span class="mtd" id="MathJax-Span-1416"><span class="mrow" id="MathJax-Span-1417"><span class="mi" id="MathJax-Span-1418"></span><span class="mo" id="MathJax-Span-1419" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-1420" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-1421" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-1422" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1003.79em, 4.445em, -1000em); top: -4.023em; left: 0em;"><span class="mtd" id="MathJax-Span-1425"><span class="mrow" id="MathJax-Span-1426"><span class="mi" id="MathJax-Span-1427"></span><span class="mo" id="MathJax-Span-1428" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mo" id="MathJax-Span-1429" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-1430" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-1431" style="font-family: MathJax_Main;">]</span><span class="mi" id="MathJax-Span-1432" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-1433" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1011.06em, 4.445em, -1000em); top: -2.673em; left: 0em;"><span class="mtd" id="MathJax-Span-1436"><span class="mrow" id="MathJax-Span-1437"><span class="mi" id="MathJax-Span-1438"></span><span class="mo" id="MathJax-Span-1439" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="texatom" id="MathJax-Span-1440" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-1441"><span class="mtext" id="MathJax-Span-1442" style="font-family: MathJax_Main; font-weight: bold;">failure: backtrack\!</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.598em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.923em; border-left: 0px solid; width: 0px; height: 4.425em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>S</mi></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mi>a</mi><mi>S</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mi>S</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="bold">failure: backtrack\!</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-40">\begin{align*}
S & \to aSa \\
 & \to [a]Sa \\
 & \to \textbf{failure: backtrack\!}
\end{align*}</script>

<p>
Notice that the PDA stack is what's keeping track of the derivation
and what we need to match with the input. It turns out that we do not
actually need to explicitly translate the CFG into a PDA to parse the
input; Instead we can take advantage of the implicit call stack
(a.k.a. function stack) that progamming languages use to enable
function calls and <i>recursion</i>. <label for="11" class="margin-toggle sidenote-number"></label><input type="checkbox" id="11" class="margin-toggle"><span class="sidenote">Every time we recursively call a
function we get a new instance of all the parameters and local
variables. This happens because the parameters and locals are stored
on the call stack; whenever a function is called a new "stack frame"
is pushed onto the stack; whenever a function returns its stack frame
is popped off of the stack.</span>
</p>

<p>
We can use the call stack as the PDA stack so we can track the
derivation without creating an explicit PDA. This is the core idea
behind recursive descent:
</p>

<p>
Create a set of mutually recursive functions, one per
nonterminal. Each function <code>A()</code> will have a case for each rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mi&gt;&amp;#x03B3;&lt;/mi&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1443" style="width: 6.693em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.747em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1005.67em, 2.556em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1444"><span class="mi" id="MathJax-Span-1445" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1446" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1447" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">α</span><span class="mi" id="MathJax-Span-1448" style="font-family: MathJax_Math; font-style: italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.007em;"></span></span><span class="mi" id="MathJax-Span-1449" style="font-family: MathJax_Math; font-style: italic;">γ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.025em;"></span></span><span class="mo" id="MathJax-Span-1450" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.298em; border-left: 0px solid; width: 0px; height: 1.176em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mi>α</mi><mi>β</mi><mi>γ</mi><mo>…</mo></math></span></span><script type="math/tex" id="MathJax-Element-41"> A
::= \alpha\beta\gamma \ldots </script>. When the function is called it will
try each case in turn until successful (or it runs out of cases and
signals failure).
</p>

<p>
Suppose we're in a case for the rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1451" style="width: 8.623em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.43em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1007.43em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1452"><span class="mi" id="MathJax-Span-1453" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1454" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="msubsup" id="MathJax-Span-1455" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.069em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1456" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mn" id="MathJax-Span-1457" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1458"><span style="display: inline-block; position: relative; width: 1.069em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1459" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mn" id="MathJax-Span-1460" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-1461" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="msubsup" id="MathJax-Span-1462" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.139em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1463" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mi" id="MathJax-Span-1464" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 1.109em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><msub><mi>α</mi><mn>1</mn></msub><msub><mi>α</mi><mn>2</mn></msub><mo>…</mo><msub><mi>α</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-42"> A ::= \alpha_1 \alpha_2 \ldots
\alpha_n </script>, where each <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1465" style="width: 0.782em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.657em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.62em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1466"><span class="mi" id="MathJax-Span-1467" style="font-family: MathJax_Math; font-style: italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.621em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-43"> \alpha </script> may be a terminal or
nonterminal. Loop starting from <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1468" style="width: 2.547em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.176em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.428em, 1002.1em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1469"><span class="mi" id="MathJax-Span-1470" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-1471" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-1472" style="font-family: MathJax_Main; padding-left: 0.278em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.881em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>=</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-44"> i = 1 </script>:
</p>

<ol class="org-ol">
<li>if <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1473" style="width: 1.11em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.944em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.94em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1474"><span class="msubsup" id="MathJax-Span-1475"><span style="display: inline-block; position: relative; width: 0.959em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1476" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mi" id="MathJax-Span-1477" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 0.791em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>α</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-45"> \alpha_i </script> is a terminal, try to match it to the current input
character.
<ol class="org-ol">
<li>if successful, consume the character and set <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;:=&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1478" style="width: 4.682em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.023em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.428em, 1003.95em, 2.422em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1479"><span class="mi" id="MathJax-Span-1480" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-1481" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1482" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">i</span><span class="mo" id="MathJax-Span-1483" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-1484" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.143em; border-left: 0px solid; width: 0px; height: 0.963em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>:=</mo><mi>i</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-46"> i := i+1 </script>.</li>
<li>if failed, backtrack to the state when the function was entered
and try the next case.</li>
</ol></li>

<li>if <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1485" style="width: 1.11em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.944em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.94em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1486"><span class="msubsup" id="MathJax-Span-1487"><span style="display: inline-block; position: relative; width: 0.959em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1488" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mi" id="MathJax-Span-1489" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 0.791em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>α</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-47"> \alpha_i </script> is a nonterminal, call the corresponding function.
<ol class="org-ol">
<li>if the function returns successfully, set <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;:=&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1490" style="width: 4.682em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.023em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.428em, 1003.95em, 2.422em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1491"><span class="mi" id="MathJax-Span-1492" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-1493" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1494" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">i</span><span class="mo" id="MathJax-Span-1495" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mn" id="MathJax-Span-1496" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.143em; border-left: 0px solid; width: 0px; height: 0.963em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi><mo>:=</mo><mi>i</mi><mo>+</mo><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-48"> i := i+1 </script>.</li>
<li>if the function signals an error, backtrack to the state when
the function was entered and try the next case.</li>
</ol></li>
</ol>

<p>
Since <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1497" style="width: 4.312em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.695em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1003.7em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1498"><span class="msubsup" id="MathJax-Span-1499"><span style="display: inline-block; position: relative; width: 1.069em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1500" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mn" id="MathJax-Span-1501" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-1502" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="msubsup" id="MathJax-Span-1503" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.139em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.6em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1504" style="font-family: MathJax_Math; font-style: italic;">α</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.64em;"><span class="mi" id="MathJax-Span-1505" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 0.791em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>α</mi><mn>1</mn></msub><mo>…</mo><msub><mi>α</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-49"> \alpha_1 \ldots \alpha_n </script> is often short, we implement the
iterations of the loop above explicitly for most cases. Let's look at
our example again:
</p>

<p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1506" style="width: 10.552em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.072em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1009.07em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1507"><span class="mi" id="MathJax-Span-1508" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-1509" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1510" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1511" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1512" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mspace" id="MathJax-Span-1513" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1514" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-1515" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1516" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mspace" id="MathJax-Span-1517" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1518"><span class="mrow" id="MathJax-Span-1519"><span class="mo" id="MathJax-Span-1520" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1521" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1522" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-1523" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1524" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-1525" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1526" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-1527" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1528"><span class="mrow" id="MathJax-Span-1529"><span class="mo" id="MathJax-Span-1530" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1531" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1532" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>S</mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>a</mi><mspace width="thinmathspace"></mspace><mi>S</mi><mspace width="thinmathspace"></mspace><mi>a</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>b</mi><mspace width="thinmathspace"></mspace><mi>S</mi><mspace width="thinmathspace"></mspace><mi>b</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>c</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-50">
S \; ::= \; a \, S \, a \; | \; b \, S \, b \; | \; c
</script>
</p>

<p>
We have only one nonterminal <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1533" style="width: 0.782em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.657em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1000.66em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1534"><span class="mi" id="MathJax-Span-1535" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-51"> S </script>, so we will have only one
recursive function <code>S()</code> (note that this is just pseudocode):
</p>

<pre class="code"><code><span style="color: #0000ff;">S</span>() {
   old_input_pos = curr_input_pos;

   <span style="color: #a020f0;">try</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">case: aSa</span>
       match(a);
       S();
       match(a);
   } <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">try</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">case: bSb</span>
       curr_input_pos = old_input_pos;
       match(b);
       S();
       match(b);
   } <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">try</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">case: c</span>
       curr_input_pos = old_input_pos;
       match(c);
   } <span style="color: #a020f0;">else</span> {
       <span style="color: #a020f0;">throw</span> failure;
   }
}

<span style="color: #0000ff;">match</span>(token) {
  <span style="color: #a020f0;">if</span> (token == input[curr_input_pos]) { curr_input_pos++; }
  <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">throw</span> failure;
}
</code></pre>

<p>
Here, <code>try { ... } else { ... }</code> means, "try the first block, if it
throws a failure, try the else block".
</p>

<p>
Let's see what happens with input <code>abcba</code> (here each indentation shows
code inside a new stack frame):
</p>

<pre class="code"><code>call S()
  enter case 1
  match(a): success
  call S()
    enter case 1
    match(a): failure
    enter case 2
    match(b): success
    call S()
      enter case 1
      match(a): failure
      enter case 2
      match(b): failure
      enter case 3
      match(c): success
    return from S()
    match(b): success
  return from S()
  match(a): success
return from S()
</code></pre>

<p>
The obvious problem with this approach is that it's extremely
inefficient: Exponential in the size of the input because we create
choices and possibility of backtracking potentially at each input
position (in fact, for some grammars<label for="12" class="margin-toggle sidenote-number"></label><input type="checkbox" id="12" class="margin-toggle"><span class="sidenote">Like <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1536" style="width: 7.265em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.27em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.392em, 1006.22em, 2.705em, -1000em); top: -2.299em; left: 0em;"><span class="mrow" id="MathJax-Span-1537"><span class="mi" id="MathJax-Span-1538" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1539" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1540" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1541" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1542" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="texatom" id="MathJax-Span-1543"><span class="mrow" id="MathJax-Span-1544"><span class="mo" id="MathJax-Span-1545" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1546" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.299em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.349em; border-left: 0px solid; width: 0px; height: 1.28em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi><mo>::=</mo><mi>E</mi><mo>+</mo><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-52"> E ::= E + E | x </script>
for example.</span> it never terminates at all). The solution we are going
to use for the exponential time complexity is LL(1) parsing:
</p>
</section>

<div id="outline-container-org6bb4745" class="outline-4">
<h4 id="org6bb4745"><span class="section-number-4">2.3.1</span> LL(1) recursive descent</h4>
<section class="outline-text-4" id="text-2-3-1">
<p>
Let's go back to our PDA for our example grammar. Note that we can
make it a DPDA by adding something called <i>lookahead</i>. First, recall
our original PDA:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/top-down-pda1.png" alt="top-down-pda1.png">

</figure>

<p>
We are going to add extra states that will apply the appropriate
transition after reading a lookahead symbol:
</p>



<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/top-down-pda2.png" alt="top-down-pda2.png">

</figure>

<p>
Here, the transitions from <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1547" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1548"><span class="msubsup" id="MathJax-Span-1549"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1550" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1551" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-53"> q_1 </script> to <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1552" style="width: 4.025em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.448em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1003.45em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1553"><span class="msubsup" id="MathJax-Span-1554"><span style="display: inline-block; position: relative; width: 0.895em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1555" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mi" id="MathJax-Span-1556" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">a</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-1557" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-1558" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 0.824em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1559" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mi" id="MathJax-Span-1560" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">b</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-1561" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-1562" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 0.827em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1563" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mi" id="MathJax-Span-1564" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">c</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mi>a</mi></msub><mo>,</mo><msub><mi>q</mi><mi>b</mi></msub><mo>,</mo><msub><mi>q</mi><mi>c</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-54"> q_a, q_b, q_c </script> read the
lookahead symbol, then we transition to the only state that is valid
based on the lookahead symbol we read and update the stack. Then, when
we go back to <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1565" style="width: 1.028em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.862em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.86em, 2.534em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1566"><span class="msubsup" id="MathJax-Span-1567"><span style="display: inline-block; position: relative; width: 0.875em; height: 0px;"><span style="position: absolute; clip: rect(3.417em, 1000.46em, 4.299em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-1568" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.446em;"><span class="mn" id="MathJax-Span-1569" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.273em; border-left: 0px solid; width: 0px; height: 0.833em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>q</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-55"> q_1 </script>, we remove the lookahead symbol from the
stack.  Try running the PDA above on the input "abcba". It's
completely deterministic! What does that mean for the recursive
descent version? It means no backtracking:
</p>

<pre class="code"><code><span style="color: #0000ff;">S</span>() {
   <span style="color: #a020f0;">if</span> (next_token <span style="color: #228b22;">is</span> <span style="color: #a0522d;">a</span>) { <span style="color: #b22222;">// </span><span style="color: #b22222;">case: aSa</span>
       match(a);
       S();
       match(a);
   } <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (next_token <span style="color: #228b22;">is</span> <span style="color: #a0522d;">b</span>) { <span style="color: #b22222;">// </span><span style="color: #b22222;">case: bSb</span>
       match(b);
       S();
       match(b);
   } <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span> (next_token <span style="color: #228b22;">is</span> <span style="color: #a0522d;">c</span>) { <span style="color: #b22222;">// </span><span style="color: #b22222;">case: c</span>
       match(c);
   } <span style="color: #a020f0;">else</span> {
       <span style="color: #a020f0;">throw</span> failure;
   }
}

<span style="color: #0000ff;">match</span>(token) {
  <span style="color: #a020f0;">if</span> (token == input[curr_input_pos]) { curr_input_pos++; }
  <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">throw</span> failure;
}
</code></pre>

<p>
Let's run the code above and see what happens on input "abcba":
</p>

<pre class="code"><code>call S()
  enter case 1
  match(a): success
  call S()
    enter case 2
    match(b): success
    call S()
      enter case 3
      match(c): success
    return from S()
    match(b): success
  return from S()
  match(a): success
return from S()
</code></pre>
<p>
As we can see, there are no failures or backtracking.
</p>
</section>

<ol class="org-ol">
<li><a id="org59097aa"></a>Special case: ε<br>
<section class="outline-text-5" id="text-2-3-1-1">
<p>
When we have an ε production, there is no lookahead character to
read. So, we just treat it as the default case (i.e., the thing to do
if none of the other cases are true). Because of the structure of an
LL(1) grammar, this is guaranteed to be safe. Example:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1570" style="width: 7.72em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.65em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.645em, 1006.48em, 3.289em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1571"><span class="mtable" id="MathJax-Span-1572" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 6.333em; height: 0px;"><span style="position: absolute; clip: rect(2.494em, 1000.76em, 4.805em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-1573"><span class="mrow" id="MathJax-Span-1574"><span class="mi" id="MathJax-Span-1575" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-1591"><span class="mrow" id="MathJax-Span-1592"><span class="mi" id="MathJax-Span-1593" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.46em, 1005.57em, 5.054em, -1000em); top: -3.982em; left: 0.759em;"><span style="display: inline-block; position: relative; width: 5.574em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1005.57em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-1576"><span class="mrow" id="MathJax-Span-1577"><span class="mi" id="MathJax-Span-1578"></span><span class="mspace" id="MathJax-Span-1579" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1580" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1581" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1582" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-1583" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mspace" id="MathJax-Span-1584" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1585"><span class="mrow" id="MathJax-Span-1586"><span class="mo" id="MathJax-Span-1587" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1588" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1589" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-1590" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.92em, 4.354em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-1594"><span class="mrow" id="MathJax-Span-1595"><span class="mi" id="MathJax-Span-1596"></span><span class="mspace" id="MathJax-Span-1597" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1598" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1599" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1600" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">w</span><span class="mi" id="MathJax-Span-1601" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mspace" id="MathJax-Span-1602" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1603"><span class="mrow" id="MathJax-Span-1604"><span class="mo" id="MathJax-Span-1605" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1606" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1607"><span class="mrow" id="MathJax-Span-1608"><span class="mo" id="MathJax-Span-1609" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.148em; border-left: 0px solid; width: 0px; height: 2.877em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>x</mi><mi>y</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>B</mi><mi>z</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>w</mi><mi>y</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-56">\begin{align*}
A & \; ::= \; xy \; | \; Bz\\
B & \; ::= \; wy \; | \; ε\\
\end{align*}</script>

<p>
Here is the implementation:
</p>

<pre class="code"><code>A() {
  if (next_token is x) { match(x); match(y); }
  else { B(); match(z); }
}

B() {
  if (next_token is w) { match(w); match(y); }
}
</code></pre>
</section>
</li>

<li><a id="orgf2778ee"></a>Wrap-up<br>
<section class="outline-text-5" id="text-2-3-1-2">
<p>
A grammar with the property that we can use 1 token of lookahead to
make it completely deterministic is an LL(1) grammar. We will
formalize this property soon and show how we can try to transform a
grammar so that it has this property. It doesn't work for all grammars
(even all deterministic grammars), but it works often enough.
</p>
</section>
</li>

<li><a id="org187d7e5"></a>Exercise<br>
<section class="outline-text-5" id="text-2-3-1-3">
<p>
Given the following grammar:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;Q&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;Q&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;Q&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1610" style="width: 14.616em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.603em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-1.379em, 1012.44em, 5.312em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1611"><span class="mtable" id="MathJax-Span-1612" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 12.273em; height: 0px;"><span style="position: absolute; clip: rect(3.601em, 1000.76em, 9.948em, -1000em); top: -7.102em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.791em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.65em, 4.127em, -1000em); top: -6.654em; right: 0em;"><span class="mtd" id="MathJax-Span-1613"><span class="mrow" id="MathJax-Span-1614"><span class="mi" id="MathJax-Span-1615" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.75em, 4.105em, -1000em); top: -5.305em; right: 0em;"><span class="mtd" id="MathJax-Span-1648"><span class="mrow" id="MathJax-Span-1649"><span class="mi" id="MathJax-Span-1650" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.155em, 1000.74em, 4.299em, -1000em); top: -3.956em; right: 0em;"><span class="mtd" id="MathJax-Span-1674"><span class="mrow" id="MathJax-Span-1675"><span class="mi" id="MathJax-Span-1676" style="font-family: MathJax_Math; font-style: italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.126em, -1000em); top: -2.607em; right: 0em;"><span class="mtd" id="MathJax-Span-1691"><span class="mrow" id="MathJax-Span-1692"><span class="mi" id="MathJax-Span-1693" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -1.258em; right: 0em;"><span class="mtd" id="MathJax-Span-1709"><span class="mrow" id="MathJax-Span-1710"><span class="mi" id="MathJax-Span-1711" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.102em;"></span></span><span style="position: absolute; clip: rect(3.844em, 1011.48em, 10.485em, -1000em); top: -7.389em; left: 0.791em;"><span style="display: inline-block; position: relative; width: 11.482em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1011.48em, 4.354em, -1000em); top: -6.654em; left: 0em;"><span class="mtd" id="MathJax-Span-1616"><span class="mrow" id="MathJax-Span-1617"><span class="mi" id="MathJax-Span-1618"></span><span class="mspace" id="MathJax-Span-1619" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1620" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1621" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1622" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-1623" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-1624" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-1625" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1626"><span class="mrow" id="MathJax-Span-1627"><span class="mo" id="MathJax-Span-1628" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1629" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1630" style="font-family: MathJax_Math; font-style: italic;">Q</span><span class="mi" id="MathJax-Span-1631" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mspace" id="MathJax-Span-1632" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1633"><span class="mrow" id="MathJax-Span-1634"><span class="mo" id="MathJax-Span-1635" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1636" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1637" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1638" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-1639" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-1640" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1641"><span class="mrow" id="MathJax-Span-1642"><span class="mo" id="MathJax-Span-1643" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1644" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1645" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-1646" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-1647" style="font-family: MathJax_Math; font-style: italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1007.55em, 4.354em, -1000em); top: -5.305em; left: 0em;"><span class="mtd" id="MathJax-Span-1651"><span class="mrow" id="MathJax-Span-1652"><span class="mi" id="MathJax-Span-1653"></span><span class="mspace" id="MathJax-Span-1654" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1655" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1656" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1657" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">Q</span><span class="mi" id="MathJax-Span-1658" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mspace" id="MathJax-Span-1659" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1660"><span class="mrow" id="MathJax-Span-1661"><span class="mo" id="MathJax-Span-1662" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1663" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1664" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mi" id="MathJax-Span-1665" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mspace" id="MathJax-Span-1666" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1667"><span class="mrow" id="MathJax-Span-1668"><span class="mo" id="MathJax-Span-1669" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1670" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1671"><span class="mrow" id="MathJax-Span-1672"><span class="mo" id="MathJax-Span-1673" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.01em, 4.354em, -1000em); top: -3.956em; left: 0em;"><span class="mtd" id="MathJax-Span-1677"><span class="mrow" id="MathJax-Span-1678"><span class="mi" id="MathJax-Span-1679"></span><span class="mspace" id="MathJax-Span-1680" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1681" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1682" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1683" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mi" id="MathJax-Span-1684" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mspace" id="MathJax-Span-1685" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1686"><span class="mrow" id="MathJax-Span-1687"><span class="mo" id="MathJax-Span-1688" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1689" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1690" style="font-family: MathJax_Math; font-style: italic;">b</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.14em, 4.354em, -1000em); top: -2.607em; left: 0em;"><span class="mtd" id="MathJax-Span-1694"><span class="mrow" id="MathJax-Span-1695"><span class="mi" id="MathJax-Span-1696"></span><span class="mspace" id="MathJax-Span-1697" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1698" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1699" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1700" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-1701" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1702"><span class="mrow" id="MathJax-Span-1703"><span class="mo" id="MathJax-Span-1704" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1705" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1706" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1707" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-1708" style="font-family: MathJax_Math; font-style: italic;">c</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.54em, 4.354em, -1000em); top: -1.258em; left: 0em;"><span class="mtd" id="MathJax-Span-1712"><span class="mrow" id="MathJax-Span-1713"><span class="mi" id="MathJax-Span-1714"></span><span class="mspace" id="MathJax-Span-1715" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1716" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-1717" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1718" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">e</span><span class="mi" id="MathJax-Span-1719" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mspace" id="MathJax-Span-1720" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1721"><span class="mrow" id="MathJax-Span-1722"><span class="mo" id="MathJax-Span-1723" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1724" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1725" style="font-family: MathJax_Math; font-style: italic;">R</span><span class="mi" id="MathJax-Span-1726" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.389em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -3.496em; border-left: 0px solid; width: 0px; height: 7.571em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>S</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>a</mi><mi>P</mi><mi>b</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>Q</mi><mi>c</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>c</mi><mi>R</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>T</mi><mi>c</mi><mi>P</mi></mtd></mtr><mtr><mtd><mi>P</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>Q</mi><mi>R</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>T</mi><mi>R</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr><mtr><mtd><mi>Q</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>f</mi><mi>R</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>b</mi></mtd></mtr><mtr><mtd><mi>R</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>d</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>g</mi><mi>b</mi><mi>c</mi></mtd></mtr><mtr><mtd><mi>T</mi></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>e</mi><mi>a</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>R</mi><mi>a</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-57">\begin{align*}
S & \; ::= \; aPb \; | \; Qc \; | \; cRd \; | \; TcP\\
P & \; ::= \; QR \; | \; TR \; | \; ε\\
Q & \; ::= \; fR \; | \; b\\
R & \; ::= \; d \; | \; gbc\\
T & \; ::= \; ea \; | \; Ra
\end{align*}</script>

<p>
write pseudocode for a recursive descent LL(1) parser, then trace it
for the inputs "afgbcdb" and "daceagbc".
</p>
</section>
</li>
</ol>
</div>
<div id="outline-container-org6f007f4" class="outline-4">
<h4 id="org6f007f4"><span class="section-number-4">2.3.2</span> Why is it called "LL(1)"?</h4>
<section class="outline-text-4" id="text-2-3-2">
<p>
If we look at the operation of the LL(1) parser, we can observe the
following:
</p>

<ol class="org-ol">
<li>it reads the input from left to right.</li>
<li>it tracks a leftmost derivation.</li>
<li>it uses 1 token of lookahead.</li>
</ol>

<p>
thus, it is "[L]eft-to-right, [L]eftmost derivation, [1] token of
lookahead", or LL(1). We can actually use any constant number of
lookahead symbols, though the more we use the more expensive things
get; the general class is called LL(k). There are more general
algorithms (like the one used by earlier versions of ANTLR) called
LL(*) that use a DFA for lookahead instead of a constant number of
tokens.
</p>
</section>
</div>
</div>
<div id="outline-container-org83d60ff" class="outline-3">
<h3 id="org83d60ff"><span class="section-number-3">2.4</span> Transforming to LL(1)</h3>
<section class="outline-text-3" id="text-2-4">
<p>
We know now how to implement a suitable grammar using a recursive
descent LL(1) parser; now we will talk about how to make a grammar
suitable. There are 3 problems that we are going to tackle in this
section:
</p>

<ol class="org-ol">
<li>Resolving some ambiguity by encoding operator precedence in our
grammar.</li>
<li>Making sure that the parser terminates by preventing infinite
recursion.</li>
<li>Making sure that the parser can choose which production to use
after reading one token by making the grammar predictive.</li>
</ol>

<p>
Note that, so far we have not covered how to build an actual parse tree
or AST, we have just returned a Boolean (or thrown a failure); we will
ignore building the AST for now. Once we have a suitable grammar, we
are going to tweak it to build the AST.
</p>
</section>
<div id="outline-container-org7865ff1" class="outline-4">
<h4 id="org7865ff1"><span class="section-number-4">2.4.1</span> Establishing precedence</h4>
<section class="outline-text-4" id="text-2-4-1">
<p>
The initial grammar we picked was a grammar for arithmetic
expressions. Here is a shorter version of it that has only addition
and multiplication (for the sake of keeping the transformations later
short):
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1727" style="width: 15.463em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.333em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.294em, 1013.07em, 2.689em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1728"><span class="mtable" id="MathJax-Span-1729" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 13.015em; height: 0px;"><span style="position: absolute; clip: rect(3.126em, 1012.92em, 4.47em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 13.015em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1012.92em, 4.445em, -1000em); top: -3.998em; right: 0em;"><span class="mtd" id="MathJax-Span-1730"><span class="mrow" id="MathJax-Span-1731"><span class="mi" id="MathJax-Span-1732" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1733" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-1734" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-1735"><span class="mi" id="MathJax-Span-1736" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1737" style="font-family: MathJax_Main; font-style: italic;">d</span></span></span><span class="mspace" id="MathJax-Span-1738" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1739"><span class="mrow" id="MathJax-Span-1740"><span class="mo" id="MathJax-Span-1741" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1742" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1743" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1744" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1745" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mspace" id="MathJax-Span-1746" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1747"><span class="mrow" id="MathJax-Span-1748"><span class="mo" id="MathJax-Span-1749" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1750" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1751" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1752" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-1753" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mspace" id="MathJax-Span-1754" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1755"><span class="mrow" id="MathJax-Span-1756"><span class="mo" id="MathJax-Span-1757" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1758" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-1759" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1760" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1761" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.386em; border-left: 0px solid; width: 0px; height: 1.351em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>E</mi><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">d</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>E</mi><mo>+</mo><mi>E</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>E</mi><mo>×</mo><mi>E</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-58">\begin{align*}
E ::= \mathit{id} \; | \; E + E \; | \; E \times E \; | \; (E)
\end{align*}</script>

<p>
The cause of ambiguity with that grammar was that the grammar
did not specify which operators have precedence over another, so it
allowed parsing a string such as <code>x + y × z</code> in two ways:
</p>

<ul class="org-ul">
<li><code>(x + y) × z</code></li>
<li><code>x + (y × z)</code></li>
</ul>

<p>
We need to enforce only one of these two interpretations to
disambiguate the input. We do this by specifying the relative
precedence of the operators. For example, conventionally,
multiplication has higher precedence than addition, so we would parse
the input string as <code>x + (y × z)</code>. There are several strategies that
have been developed to enforce precedence in a grammar.<label for="13" class="margin-toggle sidenote-number"></label><input type="checkbox" id="13" class="margin-toggle"><span class="sidenote">For
example, by specifying it along with the grammar and handling
precedence separately in the parser. One example of this is <i>Shunting
Yard Algorithm</i>.</span> We are going to opt for a classical solution that
involves modifying the grammar itself, and encoding the precedence
into the structure of the grammar.
</p>

<p>
Firstly, we are going to decide the precedence of operators. In our
case, let's choose the standard order of precedence (higher to lower):
<code>{()}</code> &gt; <code>{×,÷}</code> &gt; <code>{+,-}</code>.
</p>

<p>
Then, we are going to create a nonterminal for each level of
precedence. We can re-use our original nonterminal for the lowest
level of precedence. Let's use nonterminals with some mnemonics from
arithmetic: E (expression) for the lowest precedence operator <code>+</code>, T
(term) for the next one <code>×</code>, and F (factor) for the highest one, the
parentheses. Nowe we are going to <i>factor out</i> the operations into the
appropriate nonterminal for their level of precedence:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1762" style="width: 10.29em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.851em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.055em, 1008.68em, 4.038em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1763"><span class="mtable" id="MathJax-Span-1764" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 8.533em; height: 0px;"><span style="position: absolute; clip: rect(2.466em, 1008.53em, 6.509em, -1000em); top: -4.713em; left: 0em;"><span style="display: inline-block; position: relative; width: 8.533em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1008.53em, 4.444em, -1000em); top: -5.347em; right: 0em;"><span class="mtd" id="MathJax-Span-1765"><span class="mrow" id="MathJax-Span-1766"><span class="mi" id="MathJax-Span-1767" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1768" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-1769" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-1770"><span class="mi" id="MathJax-Span-1771" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1772" style="font-family: MathJax_Main; font-style: italic;">d</span></span></span><span class="mspace" id="MathJax-Span-1773" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1774"><span class="mrow" id="MathJax-Span-1775"><span class="mo" id="MathJax-Span-1776" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1777" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1778" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1779" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1780" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mspace" id="MathJax-Span-1781" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1782"><span class="mrow" id="MathJax-Span-1783"><span class="mo" id="MathJax-Span-1784" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1785" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1786" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1006.85em, 4.444em, -1000em); top: -3.998em; right: 0em;"><span class="mtd" id="MathJax-Span-1787"><span class="mrow" id="MathJax-Span-1788"><span class="mi" id="MathJax-Span-1789" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mo" id="MathJax-Span-1790" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1791" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mo" id="MathJax-Span-1792" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-1793" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mspace" id="MathJax-Span-1794" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1795"><span class="mrow" id="MathJax-Span-1796"><span class="mo" id="MathJax-Span-1797" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1798" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1799" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.88em, 4.445em, -1000em); top: -2.649em; right: 0em;"><span class="mtd" id="MathJax-Span-1800"><span class="mrow" id="MathJax-Span-1801"><span class="mi" id="MathJax-Span-1802" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mo" id="MathJax-Span-1803" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mo" id="MathJax-Span-1804" style="font-family: MathJax_Main; padding-left: 0.278em;">(</span><span class="mi" id="MathJax-Span-1805" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1806" style="font-family: MathJax_Main;">)</span><span class="mspace" id="MathJax-Span-1807" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1808"><span class="mrow" id="MathJax-Span-1809"><span class="mo" id="MathJax-Span-1810" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1811" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1812" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1813" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.713em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.951em; border-left: 0px solid; width: 0px; height: 4.481em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>E</mi><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">d</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>E</mi><mo>+</mo><mi>T</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>T</mi></mtd></mtr><mtr><mtd><mi>T</mi><mo>::=</mo><mi>T</mi><mo>×</mo><mi>F</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>F</mi></mtd></mtr><mtr><mtd><mi>F</mi><mo>::=</mo><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>i</mi><mi>d</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-59">\begin{align*}
E ::= \mathit{id} \; | \; E + T \; | \; T \\
T ::= T \times F \; | \;  F \\
F ::= (E) \; | \; id
\end{align*}</script>

<p>
Notice the following properties:
</p>

<ol class="org-ol">
<li><p>
Each nonterminal rule that applies an operator has one operand that
is the same nonterminal again and the other is the next highest
precedence level nonterminal
</p>

<p>
This allows the expression to have multiple of the same precedence
level operators in a row. Choosing which side is which controls the
associativity of the operator: Having the same nonterminal on the
left makes the operator left associative; having it on the right
makes the operator right associative.
</p></li>

<li><p>
Each nonterminal (except the highest precedence, F) allows for
applying an operator at the level of predecence or directly falling
through to the next level.
</p>

<p>
This allows the expression to not have any operators at the lower
precedence level, e.g., an expression that doesn't have + in it.
</p></li>

<li><p>
the base cases for expressions (identifiers, constants, etc) are
always at the highest level of precedence.
</p>

<p>
this allows the expression to just be an identifier or constant
without any operators at all.
</p></li>
</ol>

<p>
Let's look at some examples:
</p>

<ol class="org-ol">
<li>x + y × z</li>
<li>x + y + z</li>
<li>x × y + z</li>
<li>(x + y) × z</li>
</ol>

<p>
To be added after lectures: Draw the only valid parse tree for each
</p>

<p>
We have looked at this using arithmetic operators as our examples, but
it applies in many other situations, including the following:
</p>

<ol class="org-ol">
<li>relational and logical operators:
<code>!(x &lt; y) &amp;&amp; (z &lt; y)</code></li>

<li>subscript operators:
<code>a + b[i]</code></li>

<li>type casts:
<code>(double)a / b</code></li>
</ol>
</section>

<ol class="org-ol">
<li><a id="orga45c1b9"></a>Exercise<br>
<section class="outline-text-5" id="text-2-4-1-1">
<p>
Here is a toy grammar:
</p>

<pre class="code"><code>A ::= A R A | p A | a
R ::= w | x | y | z
</code></pre>

<p>
Suppose we define the following precedence levels: {p} &gt; {w,x} &gt;
{y,z}.  And say that the operators are left associative. Rewrite the
grammar to enforce the correct prededence, then verify the following
example inputs are handled correctly:
</p>

<pre class="code"><code>  p a y a w a z a x a ==&gt; (((p a) y (a w a)) z (a x a))
a z p a w p a x a y a ==&gt; ((a z (((p a) w (p a)) x a)) y a)
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code>A ::= A y B | A z B | B
B ::= B w C | B x C | C
C ::= p C | a
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-orgaf8ae08" class="outline-4">
<h4 id="orgaf8ae08"><span class="section-number-4">2.4.2</span> Dealing with left recursion</h4>
<section class="outline-text-4" id="text-2-4-2">
<p>
Once we have established precedence, we have another problem to worry
about: nontermination. This problem is an artifact of the way we are
implementing the parser using recursive descent, i.e., implementing
the PDA implicitly using recursive function calls. Consider the
factored grammar from before:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;d&lt;/mi&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1814" style="width: 10.29em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.851em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.055em, 1008.68em, 4.038em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-1815"><span class="mtable" id="MathJax-Span-1816" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 8.533em; height: 0px;"><span style="position: absolute; clip: rect(2.466em, 1008.53em, 6.509em, -1000em); top: -4.713em; left: 0em;"><span style="display: inline-block; position: relative; width: 8.533em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1008.53em, 4.444em, -1000em); top: -5.347em; right: 0em;"><span class="mtd" id="MathJax-Span-1817"><span class="mrow" id="MathJax-Span-1818"><span class="mi" id="MathJax-Span-1819" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1820" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-1821" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-1822"><span class="mi" id="MathJax-Span-1823" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1824" style="font-family: MathJax_Main; font-style: italic;">d</span></span></span><span class="mspace" id="MathJax-Span-1825" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1826"><span class="mrow" id="MathJax-Span-1827"><span class="mo" id="MathJax-Span-1828" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1829" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1830" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1831" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-1832" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mspace" id="MathJax-Span-1833" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1834"><span class="mrow" id="MathJax-Span-1835"><span class="mo" id="MathJax-Span-1836" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1837" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1838" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1006.85em, 4.444em, -1000em); top: -3.998em; right: 0em;"><span class="mtd" id="MathJax-Span-1839"><span class="mrow" id="MathJax-Span-1840"><span class="mi" id="MathJax-Span-1841" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mo" id="MathJax-Span-1842" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1843" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="mo" id="MathJax-Span-1844" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-1845" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mspace" id="MathJax-Span-1846" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1847"><span class="mrow" id="MathJax-Span-1848"><span class="mo" id="MathJax-Span-1849" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1850" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1851" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.88em, 4.445em, -1000em); top: -2.649em; right: 0em;"><span class="mtd" id="MathJax-Span-1852"><span class="mrow" id="MathJax-Span-1853"><span class="mi" id="MathJax-Span-1854" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mo" id="MathJax-Span-1855" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mo" id="MathJax-Span-1856" style="font-family: MathJax_Main; padding-left: 0.278em;">(</span><span class="mi" id="MathJax-Span-1857" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-1858" style="font-family: MathJax_Main;">)</span><span class="mspace" id="MathJax-Span-1859" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1860"><span class="mrow" id="MathJax-Span-1861"><span class="mo" id="MathJax-Span-1862" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1863" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1864" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-1865" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.713em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.951em; border-left: 0px solid; width: 0px; height: 4.481em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>E</mi><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">d</mi></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>E</mi><mo>+</mo><mi>T</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>T</mi></mtd></mtr><mtr><mtd><mi>T</mi><mo>::=</mo><mi>T</mi><mo>×</mo><mi>F</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>F</mi></mtd></mtr><mtr><mtd><mi>F</mi><mo>::=</mo><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>i</mi><mi>d</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-60">\begin{align*}
E ::= \mathit{id} \; | \; E + T \; | \; T \\
T ::= T \times F \; | \;  F \\
F ::= (E) \; | \; id
\end{align*}</script>

<p>
Assume that we implement this using a recursive descent parser, as
explained in a previous lecture, and let's see what happens on an
example input "x + y × z".
</p>

<pre class="code"><code>call E()
  enter case E + T
  call E()
    enter case E + T
    call E()
    ...
</code></pre>

<p>
Notice that we just keep recursively calling <code>E()</code> forever (or until we
get a stack overflow). Why does this happen?
</p>

<p>
Answer: Because there is a recursive cycle in the grammar <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1866" style="width: 4.107em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.53em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.402em, 1003.53em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1867"><span class="mi" id="MathJax-Span-1868" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="msubsup" id="MathJax-Span-1869" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.348em, 1000.94em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mo" id="MathJax-Span-1870" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.345em; left: 1em;"><span class="texatom" id="MathJax-Span-1871"><span class="mrow" id="MathJax-Span-1872"><span class="mo" id="MathJax-Span-1873" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mi" id="MathJax-Span-1874" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.91em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi><msup><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mo>∗</mo></mrow></msup><mi>E</mi></math></span></span><script type="math/tex" id="MathJax-Element-61"> E \to^{*} E
</script> that does not consume any input tokens, i.e., there is no call to
<code>match()</code> between invocations of <code>E()</code>.
</p>

<p>
This is an example of what's called <i>left recursion</i>. a grammar is
left recursive if there exists a derivation <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1875" style="width: 4.764em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.105em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1004.07em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1876"><span class="mi" id="MathJax-Span-1877" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="msubsup" id="MathJax-Span-1878" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.348em, 1000.94em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mo" id="MathJax-Span-1879" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.345em; left: 1em;"><span class="texatom" id="MathJax-Span-1880"><span class="mrow" id="MathJax-Span-1881"><span class="mo" id="MathJax-Span-1882" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mi" id="MathJax-Span-1883" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-1884" style="font-family: MathJax_Math; font-style: italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><msup><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mo>∗</mo></mrow></msup><mi>A</mi><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-62"> A \to^{*} A \alpha </script>
for some nonterminal <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1885" style="width: 0.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.739em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1000.72em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1886"><span class="mi" id="MathJax-Span-1887" style="font-family: MathJax_Math; font-style: italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.926em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-63"> A </script>. Any recursive descent parser may fail to
terminate for a left recursive grammar.
</p>
</section>

<ol class="org-ol">
<li><a id="org33384aa"></a>Direct, indirect, and hidden left recursion<br>
<section class="outline-text-6" id="text-2-4-2-0-1">
<p>
We can define three different kinds of left recursion (though some
texts lump the second two into a single category):
</p>

<dl class="org-dl">
<dt>Direct left recursion</dt><dd>there is a production of the form <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1888" style="width: 4.682em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.023em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1003.99em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1889"><span class="mi" id="MathJax-Span-1890" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1891" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1892" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-1893" style="font-family: MathJax_Math; font-style: italic;">α</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mi>A</mi><mi>α</mi></math></span></span><script type="math/tex" id="MathJax-Element-64"> A ::=
     A \alpha </script>. There are two examples of direct left recursion in
the previous grammar example.</dd>

<dt>Indirect left recursion</dt><dd>there is a set of mutually recursive productions the allow a left-recursive derivation.
<ul class="org-ul">
<li><p>
Example:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1894" style="width: 8.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.594em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1007.37em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1895"><span class="mtable" id="MathJax-Span-1896" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.242em; height: 0px;"><span style="position: absolute; clip: rect(2.302em, 1007.18em, 6.019em, -1000em); top: -4.475em; left: 0em;"><span style="display: inline-block; position: relative; width: 7.242em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.8em, 4.354em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-1897"><span class="mrow" id="MathJax-Span-1898"><span class="mi" id="MathJax-Span-1899" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1900" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1901" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-1902" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1903"><span class="mrow" id="MathJax-Span-1904"><span class="mo" id="MathJax-Span-1905" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1906" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1907"><span class="mrow" id="MathJax-Span-1908"><span class="mtext" id="MathJax-Span-1909" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.79em, 4.354em, -1000em); top: -3.932em; right: 0em;"><span class="mtd" id="MathJax-Span-1910"><span class="mrow" id="MathJax-Span-1911"><span class="mi" id="MathJax-Span-1912" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-1913" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1914" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-1915" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1916"><span class="mrow" id="MathJax-Span-1917"><span class="mo" id="MathJax-Span-1918" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1919" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1920"><span class="mrow" id="MathJax-Span-1921"><span class="mtext" id="MathJax-Span-1922" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1007.18em, 4.127em, -1000em); top: -2.583em; right: 0em;"><span class="mtd" id="MathJax-Span-1923"><span class="mrow" id="MathJax-Span-1924"><span class="mi" id="MathJax-Span-1925" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-1926" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1927" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mspace" id="MathJax-Span-1928" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1929"><span class="mrow" id="MathJax-Span-1930"><span class="mtext" id="MathJax-Span-1931" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.475em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi><mo>::=</mo><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi><mo>::=</mo><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi><mo>::=</mo><mi>A</mi><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-65">\begin{align*}
  A ::= B \; | \; \texttt{alice} \\
  B ::= C \; | \; \texttt{bob} \\
  C ::= A \, \texttt{charlie}
\end{align*}</script>

<p>
Consider the derivation <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1932" style="width: 13.22em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.371em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1011.31em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1933"><span class="mi" id="MathJax-Span-1934" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1935" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-1936" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mo" id="MathJax-Span-1937" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-1938" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-1939" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-1940" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-1941"><span class="mrow" id="MathJax-Span-1942"><span class="mtext" id="MathJax-Span-1943" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo stretchy="false">→</mo><mi>B</mi><mo stretchy="false">→</mo><mi>C</mi><mo stretchy="false">→</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-66"> A \to B \to C \to A \texttt{charlie}
    </script>. It is left-recursive.
</p></li>
</ul></dd>

<dt>Hidden left recursion</dt><dd>like indirect except there is an epsilon rule that hides the left recursion.
<ul class="org-ul">
<li><p>
Example:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;dave&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;&amp;#x03B5;&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1944" style="width: 9.567em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.251em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.68em, 1008.02em, 4.613em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1945"><span class="mtable" id="MathJax-Span-1946" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.903em; height: 0px;"><span style="position: absolute; clip: rect(3.147em, 1007.84em, 8.39em, -1000em); top: -5.993em; left: 0em;"><span style="display: inline-block; position: relative; width: 7.903em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.8em, 4.354em, -1000em); top: -5.955em; right: 0em;"><span class="mtd" id="MathJax-Span-1947"><span class="mrow" id="MathJax-Span-1948"><span class="mi" id="MathJax-Span-1949" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1950" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1951" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-1952" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1953"><span class="mrow" id="MathJax-Span-1954"><span class="mo" id="MathJax-Span-1955" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1956" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1957"><span class="mrow" id="MathJax-Span-1958"><span class="mtext" id="MathJax-Span-1959" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.79em, 4.354em, -1000em); top: -4.606em; right: 0em;"><span class="mtd" id="MathJax-Span-1960"><span class="mrow" id="MathJax-Span-1961"><span class="mi" id="MathJax-Span-1962" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-1963" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1964" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-1965" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1966"><span class="mrow" id="MathJax-Span-1967"><span class="mo" id="MathJax-Span-1968" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1969" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1970"><span class="mrow" id="MathJax-Span-1971"><span class="mtext" id="MathJax-Span-1972" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1007.84em, 4.127em, -1000em); top: -3.257em; right: 0em;"><span class="mtd" id="MathJax-Span-1973"><span class="mrow" id="MathJax-Span-1974"><span class="mi" id="MathJax-Span-1975" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-1976" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-1977" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">D</span><span class="mi" id="MathJax-Span-1978" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="texatom" id="MathJax-Span-1979"><span class="mrow" id="MathJax-Span-1980"><span class="mtext" id="MathJax-Span-1981" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1006.08em, 4.354em, -1000em); top: -1.957em; right: 0em;"><span class="mtd" id="MathJax-Span-1982"><span class="mrow" id="MathJax-Span-1983"><span class="mi" id="MathJax-Span-1984" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mo" id="MathJax-Span-1985" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-1986" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-1987"><span class="mtext" id="MathJax-Span-1988" style="font-family: MathJax_Typewriter;">dave</span></span></span><span class="mspace" id="MathJax-Span-1989" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-1990"><span class="mrow" id="MathJax-Span-1991"><span class="mo" id="MathJax-Span-1992" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-1993" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-1994" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.993em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.685em; border-left: 0px solid; width: 0px; height: 5.95em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi><mo>::=</mo><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi><mo>::=</mo><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi><mo>::=</mo><mi>D</mi><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr><mtr><mtd><mi>D</mi><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">dave</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>ε</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-67">\begin{align*}
  A ::= B \; | \; \texttt{alice} \\
  B ::= C \; | \; \texttt{bob} \\
  C ::= DA \texttt{charlie} \\
  D ::= \texttt{dave} \; | \; \varepsilon
\end{align*}</script>

<p>
Consider the derivation <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1995" style="width: 21.102em; display: inline-block;"><span style="display: inline-block; position: relative; width: 18.186em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1018.13em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-1996"><span class="mi" id="MathJax-Span-1997" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-1998" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-1999" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mo" id="MathJax-Span-2000" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2001" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2002" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2003" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">D</span><span class="mi" id="MathJax-Span-2004" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="texatom" id="MathJax-Span-2005"><span class="mrow" id="MathJax-Span-2006"><span class="mtext" id="MathJax-Span-2007" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mo" id="MathJax-Span-2008" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2009" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2010"><span class="mrow" id="MathJax-Span-2011"><span class="mtext" id="MathJax-Span-2012" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo stretchy="false">→</mo><mi>B</mi><mo stretchy="false">→</mo><mi>C</mi><mo stretchy="false">→</mo><mi>D</mi><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mo stretchy="false">→</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-68"> A \to B \to C \to DA \texttt{charlie}
    \to A \texttt{charlie} </script>.
</p></li>
</ul></dd>
</dl>

<p>
In order to create an LL(1) recursive descent parser for a grammar, we
must transform the grammar to remove all left recursion. We will cover
how to remove each kind of left recursion below.
</p>
</section>
</li>

<li><a id="org82a9745"></a>Removing direct left recursion<br>
<section class="outline-text-6" id="text-2-4-2-0-2">
<p>
Direct left recursion is the easiest to fix: any left-recursive
production can be changed to an equivalent right-recursive set of
rules as follows:
</p>

<p>
Given:
</p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B3;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2013" style="width: 8.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.102em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.319em, 1006.96em, 2.614em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2014"><span class="mtable" id="MathJax-Span-2015" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 6.781em; height: 0px;"><span style="position: absolute; clip: rect(3.134em, 1006.81em, 4.38em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 6.781em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.81em, 4.354em, -1000em); top: -3.956em; right: 0em;"><span class="mtd" id="MathJax-Span-2016"><span class="mrow" id="MathJax-Span-2017"><span class="mi" id="MathJax-Span-2018" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2019" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-2020" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2021"><span class="mrow" id="MathJax-Span-2022"><span class="mo" id="MathJax-Span-2023" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mspace" id="MathJax-Span-2024" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2025"><span class="mrow" id="MathJax-Span-2026"><span class="mo" id="MathJax-Span-2027" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2028" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2029"><span class="mrow" id="MathJax-Span-2030"><span class="mo" id="MathJax-Span-2031" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span class="mspace" id="MathJax-Span-2032" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2033"><span class="mrow" id="MathJax-Span-2034"><span class="mo" id="MathJax-Span-2035" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2036" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2037"><span class="mrow" id="MathJax-Span-2038"><span class="mo" id="MathJax-Span-2039" style="font-family: MathJax_Math; font-style: italic;">γ</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.366em; border-left: 0px solid; width: 0px; height: 1.312em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi><mo>::=</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>γ</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-69">\begin{align*}
 A ::= Aα \; | \; β \; | \; γ
\end{align*}</script>

<p>
where the greek letters are sequences of terminals and nonterminals
<b>not starting with A</b>. this grammar specifies "βα* or γα*". We can
transform it into a non-left-recursive grammar that specifies the same
language:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B3;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2040" style="width: 8.541em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.348em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.636em, 1007.18em, 3.298em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2041"><span class="mtable" id="MathJax-Span-2042" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.033em; height: 0px;"><span style="position: absolute; clip: rect(2.494em, 1001.02em, 4.814em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-2043"><span class="mrow" id="MathJax-Span-2044"><span class="mi" id="MathJax-Span-2045" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1001.02em, 4.105em, -1000em); top: -3.273em; right: 0em;"><span class="mtd" id="MathJax-Span-2068"><span class="mrow" id="MathJax-Span-2069"><span class="msup" id="MathJax-Span-2070"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2071" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2072" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.401em, 1006.01em, 5.063em, -1000em); top: -3.982em; left: 1.019em;"><span style="display: inline-block; position: relative; width: 6.013em; height: 0px;"><span style="position: absolute; clip: rect(3.05em, 1006.01em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-2046"><span class="mrow" id="MathJax-Span-2047"><span class="mi" id="MathJax-Span-2048"></span><span class="mo" id="MathJax-Span-2049" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2050" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2051" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2052"><span class="mo" id="MathJax-Span-2053" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span class="msup" id="MathJax-Span-2054"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2055" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2056" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2057" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2058"><span class="mrow" id="MathJax-Span-2059"><span class="mo" id="MathJax-Span-2060" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2061" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2062"><span class="mrow" id="MathJax-Span-2063"><span class="mo" id="MathJax-Span-2064" style="font-family: MathJax_Math; font-style: italic;">γ</span></span></span><span class="msup" id="MathJax-Span-2065"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2066" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2067" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1004.98em, 4.354em, -1000em); top: -3.273em; left: 0em;"><span class="mtd" id="MathJax-Span-2073"><span class="mrow" id="MathJax-Span-2074"><span class="mi" id="MathJax-Span-2075"></span><span class="mo" id="MathJax-Span-2076" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2077" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2078" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2079"><span class="mo" id="MathJax-Span-2080" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msup" id="MathJax-Span-2081"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2082" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2083" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2084" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2085"><span class="mrow" id="MathJax-Span-2086"><span class="mo" id="MathJax-Span-2087" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2088" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2089"><span class="mrow" id="MathJax-Span-2090"><span class="mo" id="MathJax-Span-2091" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.159em; border-left: 0px solid; width: 0px; height: 2.898em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><msup><mi>A</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>γ</mo></mrow><msup><mi>A</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>A</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msup><mi>A</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-70">\begin{align*}
    A  & ::= \, βA' \; | \; γA' \\
    A' & ::= \, αA' \; | \; ε
\end{align*}</script>

<p>
We are expressing the same strings in different ways. A left recursive
rule must have some non-recursive base case like β and γ
above<label for="14" class="margin-toggle sidenote-number"></label><input type="checkbox" id="14" class="margin-toggle"><span class="sidenote">otherwise it would be non-productive as it cannot
terminate</span>; The left recursion is saying that we can repeat the
recursive part as many times as we want (α above) and then finish with
the base cases. The rewritten rules says the same thing, but puts the
recursion on the right instead of the left. This means that a
recursive descent parser must consume a terminal from the input before
making the recursive call. So, since the input is finite, the parser
must terminate.
</p>

<p>
Note that we assume α is not ε. If <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03B1;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;&amp;#x03B5;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2092" style="width: 2.835em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.422em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.642em, 1002.38em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2093"><span class="mi" id="MathJax-Span-2094" style="font-family: MathJax_Math; font-style: italic;">α</span><span class="mo" id="MathJax-Span-2095" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-2096" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">ε</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.645em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>α</mi><mo>=</mo><mi>ε</mi></math></span></span><script type="math/tex" id="MathJax-Element-71"> \alpha = \varepsilon </script>, then we
have the rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2097" style="width: 3.984em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.407em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1003.38em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2098"><span class="mi" id="MathJax-Span-2099" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2100" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-2101" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.926em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-72"> A ::= A </script>, which we can trivially delete.
</p>

<p>
What if we have multiple left-recursive rules for A? We are going to
show how to deal with 2 left-recursive rules, the idea generalizes for
an arbitrary number of left-recursive rules. Given:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B3;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2102" style="width: 8.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.102em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.319em, 1006.96em, 2.614em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2103"><span class="mtable" id="MathJax-Span-2104" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 6.781em; height: 0px;"><span style="position: absolute; clip: rect(3.134em, 1006.81em, 4.38em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 6.781em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.81em, 4.354em, -1000em); top: -3.956em; right: 0em;"><span class="mtd" id="MathJax-Span-2105"><span class="mrow" id="MathJax-Span-2106"><span class="mi" id="MathJax-Span-2107" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2108" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-2109" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2110"><span class="mrow" id="MathJax-Span-2111"><span class="mo" id="MathJax-Span-2112" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mspace" id="MathJax-Span-2113" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2114"><span class="mrow" id="MathJax-Span-2115"><span class="mo" id="MathJax-Span-2116" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2117" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2118"><span class="mrow" id="MathJax-Span-2119"><span class="mo" id="MathJax-Span-2120" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span class="mspace" id="MathJax-Span-2121" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2122"><span class="mrow" id="MathJax-Span-2123"><span class="mo" id="MathJax-Span-2124" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2125" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2126"><span class="mrow" id="MathJax-Span-2127"><span class="mo" id="MathJax-Span-2128" style="font-family: MathJax_Math; font-style: italic;">γ</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.366em; border-left: 0px solid; width: 0px; height: 1.312em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi><mo>::=</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>γ</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-73">\begin{align*}
 A ::= Aα \; | \; β \; | \; γ
\end{align*}</script>

<p>
Then:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B3;&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2129" style="width: 10.839em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.319em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.66em, 1009.11em, 3.273em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2130"><span class="mtable" id="MathJax-Span-2131" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 8.972em; height: 0px;"><span style="position: absolute; clip: rect(2.518em, 1001.02em, 4.789em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -4.606em; right: 0em;"><span class="mtd" id="MathJax-Span-2132"><span class="mrow" id="MathJax-Span-2133"><span class="mi" id="MathJax-Span-2134" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1001.02em, 4.105em, -1000em); top: -3.298em; right: 0em;"><span class="mtd" id="MathJax-Span-2143"><span class="mrow" id="MathJax-Span-2144"><span class="msup" id="MathJax-Span-2145"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2146" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2147" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.425em, 1007.92em, 5.038em, -1000em); top: -3.982em; left: 1.019em;"><span style="display: inline-block; position: relative; width: 7.953em; height: 0px;"><span style="position: absolute; clip: rect(3.05em, 1003.08em, 4.105em, -1000em); top: -4.606em; left: 0em;"><span class="mtd" id="MathJax-Span-2135"><span class="mrow" id="MathJax-Span-2136"><span class="mi" id="MathJax-Span-2137"></span><span class="mo" id="MathJax-Span-2138" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2139" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msup" id="MathJax-Span-2140" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2141" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2142" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1007.92em, 4.354em, -1000em); top: -3.298em; left: 0em;"><span class="mtd" id="MathJax-Span-2148"><span class="mrow" id="MathJax-Span-2149"><span class="mi" id="MathJax-Span-2150"></span><span class="mo" id="MathJax-Span-2151" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2152" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2153" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2154"><span class="mo" id="MathJax-Span-2155" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msup" id="MathJax-Span-2156"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2157" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2158" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2159" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2160"><span class="mrow" id="MathJax-Span-2161"><span class="mo" id="MathJax-Span-2162" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2163" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2164"><span class="mrow" id="MathJax-Span-2165"><span class="mo" id="MathJax-Span-2166" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span class="msup" id="MathJax-Span-2167"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2168" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2169" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2170" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2171"><span class="mrow" id="MathJax-Span-2172"><span class="mo" id="MathJax-Span-2173" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2174" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2175"><span class="mrow" id="MathJax-Span-2176"><span class="mo" id="MathJax-Span-2177" style="font-family: MathJax_Math; font-style: italic;">γ</span></span></span><span class="texatom" id="MathJax-Span-2178"><span class="mrow" id="MathJax-Span-2179"><span class="mo" id="MathJax-Span-2180" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.13em; border-left: 0px solid; width: 0px; height: 2.841em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><msup><mi>A</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>A</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msup><mi>A</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><msup><mi>A</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>γ</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-74">\begin{align*}
    A  & ::= \, A' \\
    A' & ::= \, αA' \; | \; βA' \; | \; γε
\end{align*}</script>

<p>
Again, there always has to be at least one rule that is not left
recursive or we can trivially delete all the rules because the
non-terminal is non-productive.
</p>
</section>

<ol class="org-ol">
<li><a id="org31e86c1"></a>Example 1<br>
<section class="outline-text-7" id="text-2-4-2-0-2-1">
<pre class="code"><code>E ::= E + T | E - T | T
T ::= (E) | id
</code></pre>

<p>
Becomes
</p>

<pre class="code"><code>E  ::= T E'
E' ::= + T E' | - T E' | ε
T  ::= (E) | id
</code></pre>
</section>

<ol class="org-ol">
<li><a id="orged2c53b"></a>Exercise<br>
<section class="outline-text-8" id="text-2-4-2-0-2-1-1">
<p>
Go through parsing the input <code>x + y - z</code>. Notice that the operators
are right-associative after the transformation.
</p>
</section>
</li>
</ol>
</li>

<li><a id="org7e07098"></a>Example 2<br>
<section class="outline-text-7" id="text-2-4-2-0-2-2">
<pre class="code"><code>E ::= E + F | F
F ::= F * G | G
G ::= (E) | id
</code></pre>

<p>
Becomes
</p>

<pre class="code"><code>E  ::= FE'
E' ::= + FE' | ε
F  ::= GF'
F' ::= * GF' | ε
G  ::= (E) | id
</code></pre>
</section>

<ol class="org-ol">
<li><a id="org0d6bb66"></a>Exercise<br>
<section class="outline-text-8" id="text-2-4-2-0-2-2-1">
<p>
Go through parsing the input <code>x + y * z</code>.
</p>
</section>
</li>
</ol>
</li>
</ol>
</li>

<li><a id="org67c88a5"></a>Removing indirect left recursion<br>
<section class="outline-text-6" id="text-2-4-2-0-3">
<p>
There are several possible strategies for removing indirect
recursion. We are going to look at a classical strategy. The basic
idea is (1) to inline productions to turn the indirect recursion into
direct recursion, then (2) apply the transformation that removes
direct recursion.
</p>

<p>
Let's see an example of that in action:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2181" style="width: 8.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.594em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1007.37em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2182"><span class="mtable" id="MathJax-Span-2183" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.242em; height: 0px;"><span style="position: absolute; clip: rect(2.295em, 1000.76em, 5.978em, -1000em); top: -4.433em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-2184"><span class="mrow" id="MathJax-Span-2185"><span class="mi" id="MathJax-Span-2186" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.932em; right: 0em;"><span class="mtd" id="MathJax-Span-2201"><span class="mrow" id="MathJax-Span-2202"><span class="mi" id="MathJax-Span-2203" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -2.583em; right: 0em;"><span class="mtd" id="MathJax-Span-2218"><span class="mrow" id="MathJax-Span-2219"><span class="mi" id="MathJax-Span-2220" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span><span style="position: absolute; clip: rect(2.261em, 1006.42em, 5.962em, -1000em); top: -4.433em; left: 0.76em;"><span style="display: inline-block; position: relative; width: 6.482em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.281em; left: 0em;"><span class="mtd" id="MathJax-Span-2187"><span class="mrow" id="MathJax-Span-2188"><span class="mi" id="MathJax-Span-2189"></span><span class="mo" id="MathJax-Span-2190" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2191" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2192" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-2193" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2194"><span class="mrow" id="MathJax-Span-2195"><span class="mo" id="MathJax-Span-2196" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2197" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2198"><span class="mrow" id="MathJax-Span-2199"><span class="mtext" id="MathJax-Span-2200" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.932em; left: 0em;"><span class="mtd" id="MathJax-Span-2204"><span class="mrow" id="MathJax-Span-2205"><span class="mi" id="MathJax-Span-2206"></span><span class="mo" id="MathJax-Span-2207" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2208" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2209" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2210" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2211"><span class="mrow" id="MathJax-Span-2212"><span class="mo" id="MathJax-Span-2213" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2214" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2215"><span class="mrow" id="MathJax-Span-2216"><span class="mtext" id="MathJax-Span-2217" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1006.42em, 4.111em, -1000em); top: -2.583em; left: 0em;"><span class="mtd" id="MathJax-Span-2221"><span class="mrow" id="MathJax-Span-2222"><span class="mi" id="MathJax-Span-2223"></span><span class="mo" id="MathJax-Span-2224" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2225" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2226" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2227"><span class="mrow" id="MathJax-Span-2228"><span class="mtext" id="MathJax-Span-2229" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-75">\begin{align*}
A & ::= \, B \; | \; \texttt{alice}\\
B & ::= \, C \; | \; \texttt{bob}\\
C & ::= \, A \texttt{charlie}
\end{align*}</script>

<p>
We can start from <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2230" style="width: 0.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.739em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1000.72em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2231"><span class="mi" id="MathJax-Span-2232" style="font-family: MathJax_Math; font-style: italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.926em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-76"> A </script>, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2233" style="width: 0.905em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.78em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1000.78em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2234"><span class="mi" id="MathJax-Span-2235" style="font-family: MathJax_Math; font-style: italic;">B</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.888em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-77">B </script>, or <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-78-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2236" style="width: 0.905em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.78em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1000.78em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2237"><span class="mi" id="MathJax-Span-2238" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-78"> C </script> to expose the indirect
left recursion:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-79-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2239" style="width: 22.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 19.048em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.044em, 1018.82em, 3.89em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2240"><span class="mtable" id="MathJax-Span-2241" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 18.722em; height: 0px;"><span style="position: absolute; clip: rect(2.262em, 1018.66em, 5.847em, -1000em); top: -4.351em; left: 0em;"><span style="display: inline-block; position: relative; width: 18.722em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1011.3em, 4.127em, -1000em); top: -5.232em; right: 0em;"><span class="mtd" id="MathJax-Span-2242"><span class="mrow" id="MathJax-Span-2243"><span class="mi" id="MathJax-Span-2244" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2245" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2246" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mo" id="MathJax-Span-2247" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2248" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2249" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2250" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2251"><span class="mrow" id="MathJax-Span-2252"><span class="mtext" id="MathJax-Span-2253" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1014.99em, 4.127em, -1000em); top: -3.932em; right: 0em;"><span class="mtd" id="MathJax-Span-2254"><span class="mrow" id="MathJax-Span-2255"><span class="mi" id="MathJax-Span-2256" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-2257" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2258" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2259" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2260" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2261"><span class="mrow" id="MathJax-Span-2262"><span class="mtext" id="MathJax-Span-2263" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mo" id="MathJax-Span-2264" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2265" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="texatom" id="MathJax-Span-2266"><span class="mrow" id="MathJax-Span-2267"><span class="mtext" id="MathJax-Span-2268" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1018.66em, 4.127em, -1000em); top: -2.632em; right: 0em;"><span class="mtd" id="MathJax-Span-2269"><span class="mrow" id="MathJax-Span-2270"><span class="mi" id="MathJax-Span-2271" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2272" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2273" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2274"><span class="mrow" id="MathJax-Span-2275"><span class="mtext" id="MathJax-Span-2276" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mo" id="MathJax-Span-2277" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2278" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="texatom" id="MathJax-Span-2279"><span class="mrow" id="MathJax-Span-2280"><span class="mtext" id="MathJax-Span-2281" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mo" id="MathJax-Span-2282" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-2283" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="texatom" id="MathJax-Span-2284"><span class="mrow" id="MathJax-Span-2285"><span class="mtext" id="MathJax-Span-2286" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.351em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.846em; border-left: 0px solid; width: 0px; height: 4.271em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi><mo stretchy="false">→</mo><mi>B</mi><mo stretchy="false">→</mo><mi>C</mi><mo stretchy="false">→</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi><mo stretchy="false">→</mo><mi>C</mi><mo stretchy="false">→</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mo stretchy="false">→</mo><mi>B</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi><mo stretchy="false">→</mo><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mo stretchy="false">→</mo><mi>B</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mo stretchy="false">→</mo><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-79">\begin{align*}
A \to B \to C \to A \texttt{charlie}\\
B \to C \to A \texttt{charlie} \to B \texttt{charlie}\\
C \to A \texttt{charlie} \to B \texttt{charlie} \to C \texttt{charlie}
\end{align*}</script>

<p>
We are going to inline productions for one of the nonterminals. It
doesn't matter which one we choose, as long as we break the left
recursive cycle. Let's pick A and inline once:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-80-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2287" style="width: 11.332em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.77em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1009.54em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2288"><span class="mtable" id="MathJax-Span-2289" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.444em; height: 0px;"><span style="position: absolute; clip: rect(2.295em, 1000.76em, 5.978em, -1000em); top: -4.433em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-2290"><span class="mrow" id="MathJax-Span-2291"><span class="mi" id="MathJax-Span-2292" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.932em; right: 0em;"><span class="mtd" id="MathJax-Span-2315"><span class="mrow" id="MathJax-Span-2316"><span class="mi" id="MathJax-Span-2317" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -2.583em; right: 0em;"><span class="mtd" id="MathJax-Span-2332"><span class="mrow" id="MathJax-Span-2333"><span class="mi" id="MathJax-Span-2334" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span><span style="position: absolute; clip: rect(2.261em, 1008.62em, 5.962em, -1000em); top: -4.433em; left: 0.76em;"><span style="display: inline-block; position: relative; width: 8.684em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1008.62em, 4.354em, -1000em); top: -5.281em; left: 0em;"><span class="mtd" id="MathJax-Span-2293"><span class="mrow" id="MathJax-Span-2294"><span class="mi" id="MathJax-Span-2295"></span><span class="mo" id="MathJax-Span-2296" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2297" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2298" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2299" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2300"><span class="mrow" id="MathJax-Span-2301"><span class="mo" id="MathJax-Span-2302" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2303" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2304"><span class="mrow" id="MathJax-Span-2305"><span class="mtext" id="MathJax-Span-2306" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="mspace" id="MathJax-Span-2307" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2308"><span class="mrow" id="MathJax-Span-2309"><span class="mo" id="MathJax-Span-2310" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2311" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2312"><span class="mrow" id="MathJax-Span-2313"><span class="mtext" id="MathJax-Span-2314" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.932em; left: 0em;"><span class="mtd" id="MathJax-Span-2318"><span class="mrow" id="MathJax-Span-2319"><span class="mi" id="MathJax-Span-2320"></span><span class="mo" id="MathJax-Span-2321" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2322" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2323" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2324" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2325"><span class="mrow" id="MathJax-Span-2326"><span class="mo" id="MathJax-Span-2327" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2328" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2329"><span class="mrow" id="MathJax-Span-2330"><span class="mtext" id="MathJax-Span-2331" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1006.42em, 4.111em, -1000em); top: -2.583em; left: 0em;"><span class="mtd" id="MathJax-Span-2335"><span class="mrow" id="MathJax-Span-2336"><span class="mi" id="MathJax-Span-2337"></span><span class="mo" id="MathJax-Span-2338" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2339" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2340" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2341"><span class="mrow" id="MathJax-Span-2342"><span class="mtext" id="MathJax-Span-2343" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-80">\begin{align*}
    A & ::= \, C \; | \; \texttt{bob} \; | \; \texttt{alice}\\
    B & ::= \, C \; | \; \texttt{bob}\\
    C & ::= \, A \texttt{charlie}
\end{align*}</script>

<p>
Then inline again:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-81-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2344" style="width: 15.601em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.424em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1013.2em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2345"><span class="mtable" id="MathJax-Span-2346" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 13.109em; height: 0px;"><span style="position: absolute; clip: rect(2.295em, 1000.76em, 5.978em, -1000em); top: -4.433em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-2347"><span class="mrow" id="MathJax-Span-2348"><span class="mi" id="MathJax-Span-2349" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.932em; right: 0em;"><span class="mtd" id="MathJax-Span-2375"><span class="mrow" id="MathJax-Span-2376"><span class="mi" id="MathJax-Span-2377" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -2.583em; right: 0em;"><span class="mtd" id="MathJax-Span-2392"><span class="mrow" id="MathJax-Span-2393"><span class="mi" id="MathJax-Span-2394" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span><span style="position: absolute; clip: rect(2.261em, 1012.29em, 5.962em, -1000em); top: -4.433em; left: 0.76em;"><span style="display: inline-block; position: relative; width: 12.349em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1012.29em, 4.354em, -1000em); top: -5.281em; left: 0em;"><span class="mtd" id="MathJax-Span-2350"><span class="mrow" id="MathJax-Span-2351"><span class="mi" id="MathJax-Span-2352"></span><span class="mo" id="MathJax-Span-2353" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2354" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2355" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2356"><span class="mrow" id="MathJax-Span-2357"><span class="mtext" id="MathJax-Span-2358" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-2359" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2360"><span class="mrow" id="MathJax-Span-2361"><span class="mo" id="MathJax-Span-2362" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2363" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2364"><span class="mrow" id="MathJax-Span-2365"><span class="mtext" id="MathJax-Span-2366" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="mspace" id="MathJax-Span-2367" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2368"><span class="mrow" id="MathJax-Span-2369"><span class="mo" id="MathJax-Span-2370" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2371" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2372"><span class="mrow" id="MathJax-Span-2373"><span class="mtext" id="MathJax-Span-2374" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.932em; left: 0em;"><span class="mtd" id="MathJax-Span-2378"><span class="mrow" id="MathJax-Span-2379"><span class="mi" id="MathJax-Span-2380"></span><span class="mo" id="MathJax-Span-2381" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2382" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2383" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2384" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2385"><span class="mrow" id="MathJax-Span-2386"><span class="mo" id="MathJax-Span-2387" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2388" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2389"><span class="mrow" id="MathJax-Span-2390"><span class="mtext" id="MathJax-Span-2391" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1006.42em, 4.111em, -1000em); top: -2.583em; left: 0em;"><span class="mtd" id="MathJax-Span-2395"><span class="mrow" id="MathJax-Span-2396"><span class="mi" id="MathJax-Span-2397"></span><span class="mo" id="MathJax-Span-2398" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2399" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2400" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2401"><span class="mrow" id="MathJax-Span-2402"><span class="mtext" id="MathJax-Span-2403" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-81">\begin{align*}
    A & ::= \, A \texttt{charlie} \; | \; \texttt{bob} \; | \; \texttt{alice}\\
    B & ::= \, C \; | \; \texttt{bob}\\
    C & ::= \, A \texttt{charlie}
\end{align*}</script>

<p>
Then remove the direct left recursion:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-82-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2404" style="width: 12.153em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.468em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.689em, 1010.3em, 4.622em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2405"><span class="mtable" id="MathJax-Span-2406" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 10.149em; height: 0px;"><span style="position: absolute; clip: rect(2.976em, 1001.02em, 8.016em, -1000em); top: -5.788em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.955em; right: 0em;"><span class="mtd" id="MathJax-Span-2407"><span class="mrow" id="MathJax-Span-2408"><span class="mi" id="MathJax-Span-2409" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1001.02em, 4.105em, -1000em); top: -4.598em; right: 0em;"><span class="mtd" id="MathJax-Span-2432"><span class="mrow" id="MathJax-Span-2433"><span class="msup" id="MathJax-Span-2434"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2435" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2436" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.249em; right: 0em;"><span class="mtd" id="MathJax-Span-2456"><span class="mrow" id="MathJax-Span-2457"><span class="mi" id="MathJax-Span-2458" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -1.9em; right: 0em;"><span class="mtd" id="MathJax-Span-2473"><span class="mrow" id="MathJax-Span-2474"><span class="mi" id="MathJax-Span-2475" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.788em;"></span></span><span style="position: absolute; clip: rect(2.965em, 1009.13em, 8.082em, -1000em); top: -5.87em; left: 1.019em;"><span style="display: inline-block; position: relative; width: 9.129em; height: 0px;"><span style="position: absolute; clip: rect(3.05em, 1009.13em, 4.354em, -1000em); top: -5.955em; left: 0em;"><span class="mtd" id="MathJax-Span-2410"><span class="mrow" id="MathJax-Span-2411"><span class="mi" id="MathJax-Span-2412"></span><span class="mo" id="MathJax-Span-2413" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2414" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2415" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2416"><span class="mtext" id="MathJax-Span-2417" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="msup" id="MathJax-Span-2418"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2419" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2420" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2421" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2422"><span class="mrow" id="MathJax-Span-2423"><span class="mo" id="MathJax-Span-2424" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2425" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2426"><span class="mrow" id="MathJax-Span-2427"><span class="mtext" id="MathJax-Span-2428" style="font-family: MathJax_Typewriter;">alice</span></span></span><span class="msup" id="MathJax-Span-2429"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2430" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2431" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1008.01em, 4.354em, -1000em); top: -4.598em; left: 0em;"><span class="mtd" id="MathJax-Span-2437"><span class="mrow" id="MathJax-Span-2438"><span class="mi" id="MathJax-Span-2439"></span><span class="mo" id="MathJax-Span-2440" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2441" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2442" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2443"><span class="mtext" id="MathJax-Span-2444" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="msup" id="MathJax-Span-2445"><span style="display: inline-block; position: relative; width: 1.019em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2446" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.75em;"><span class="mo" id="MathJax-Span-2447" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2448" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2449"><span class="mrow" id="MathJax-Span-2450"><span class="mo" id="MathJax-Span-2451" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2452" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2453"><span class="mrow" id="MathJax-Span-2454"><span class="mo" id="MathJax-Span-2455" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.249em; left: 0em;"><span class="mtd" id="MathJax-Span-2459"><span class="mrow" id="MathJax-Span-2460"><span class="mi" id="MathJax-Span-2461"></span><span class="mo" id="MathJax-Span-2462" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2463" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2464" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2465" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2466"><span class="mrow" id="MathJax-Span-2467"><span class="mo" id="MathJax-Span-2468" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2469" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2470"><span class="mrow" id="MathJax-Span-2471"><span class="mtext" id="MathJax-Span-2472" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1006.42em, 4.111em, -1000em); top: -1.9em; left: 0em;"><span class="mtd" id="MathJax-Span-2476"><span class="mrow" id="MathJax-Span-2477"><span class="mi" id="MathJax-Span-2478"></span><span class="mo" id="MathJax-Span-2479" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2480" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2481" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2482"><span class="mrow" id="MathJax-Span-2483"><span class="mtext" id="MathJax-Span-2484" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.87em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.695em; border-left: 0px solid; width: 0px; height: 5.97em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><msup><mi>A</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow><msup><mi>A</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>A</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><msup><mi>A</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-82">\begin{align*}
    A  & ::= \, \texttt{bob} A' \; | \; \texttt{alice} A'\\
    A' & ::= \, \texttt{charlie} A' \; | \; ε\\
    B  & ::= \, C \; | \; \texttt{bob}\\
    C  & ::= \, A \texttt{charlie}
\end{align*}</script>

<p>
Notice that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-83-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2485" style="width: 0.905em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.78em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1000.78em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2486"><span class="mi" id="MathJax-Span-2487" style="font-family: MathJax_Math; font-style: italic;">B</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.888em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-83">B </script> and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-84-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2488" style="width: 0.905em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.78em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1000.78em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2489"><span class="mi" id="MathJax-Span-2490" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-84"> C </script> are no longer reachable from the
starting nonterminal A; in general this may or may not be true.
</p>

<p>
Let's see what happens if we had picked <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-85-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2491" style="width: 0.905em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.78em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1000.78em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2492"><span class="mi" id="MathJax-Span-2493" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-85"> C </script> instead of <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-86-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2494" style="width: 0.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.739em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1000.72em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2495"><span class="mi" id="MathJax-Span-2496" style="font-family: MathJax_Math; font-style: italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.926em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-86">A</script> to
start with:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-87-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2497" style="width: 17.12em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.737em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.03em, 1014.51em, 3.963em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2498"><span class="mtable" id="MathJax-Span-2499" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 14.384em; height: 0px;"><span style="position: absolute; clip: rect(2.271em, 1000.76em, 5.953em, -1000em); top: -4.433em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.305em; right: 0em;"><span class="mtd" id="MathJax-Span-2500"><span class="mrow" id="MathJax-Span-2501"><span class="mi" id="MathJax-Span-2502" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.956em; right: 0em;"><span class="mtd" id="MathJax-Span-2517"><span class="mrow" id="MathJax-Span-2518"><span class="mi" id="MathJax-Span-2519" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -2.607em; right: 0em;"><span class="mtd" id="MathJax-Span-2534"><span class="mrow" id="MathJax-Span-2535"><span class="mi" id="MathJax-Span-2536" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span><span style="position: absolute; clip: rect(2.483em, 1013.56em, 6.426em, -1000em); top: -4.68em; left: 0.76em;"><span style="display: inline-block; position: relative; width: 13.624em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.305em; left: 0em;"><span class="mtd" id="MathJax-Span-2503"><span class="mrow" id="MathJax-Span-2504"><span class="mi" id="MathJax-Span-2505"></span><span class="mo" id="MathJax-Span-2506" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2507" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2508" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-2509" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2510"><span class="mrow" id="MathJax-Span-2511"><span class="mo" id="MathJax-Span-2512" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2513" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2514"><span class="mrow" id="MathJax-Span-2515"><span class="mtext" id="MathJax-Span-2516" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.956em; left: 0em;"><span class="mtd" id="MathJax-Span-2520"><span class="mrow" id="MathJax-Span-2521"><span class="mi" id="MathJax-Span-2522"></span><span class="mo" id="MathJax-Span-2523" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2524" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2525" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2526" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2527"><span class="mrow" id="MathJax-Span-2528"><span class="mo" id="MathJax-Span-2529" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2530" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2531"><span class="mrow" id="MathJax-Span-2532"><span class="mtext" id="MathJax-Span-2533" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1013.56em, 4.354em, -1000em); top: -2.607em; left: 0em;"><span class="mtd" id="MathJax-Span-2537"><span class="mrow" id="MathJax-Span-2538"><span class="mi" id="MathJax-Span-2539"></span><span class="mo" id="MathJax-Span-2540" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2541" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2542" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="texatom" id="MathJax-Span-2543"><span class="mrow" id="MathJax-Span-2544"><span class="mtext" id="MathJax-Span-2545" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-2546" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2547"><span class="mrow" id="MathJax-Span-2548"><span class="mo" id="MathJax-Span-2549" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2550" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2551"><span class="mrow" id="MathJax-Span-2552"><span class="mtext" id="MathJax-Span-2553" style="font-family: MathJax_Typewriter;">alice</span></span></span><span class="texatom" id="MathJax-Span-2554"><span class="mrow" id="MathJax-Span-2555"><span class="mtext" id="MathJax-Span-2556" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.68em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.931em; border-left: 0px solid; width: 0px; height: 4.442em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-87">\begin{align*}
    A & ::= \, B \; | \; \texttt{alice}\\
    B & ::= \, C \; | \; \texttt{bob}\\
    C & ::= \, B \texttt{charlie} \; | \; \texttt{alice} \texttt{charlie}
\end{align*}</script>

<p>
and inline again:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-88-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2557" style="width: 24.14em; display: inline-block;"><span style="display: inline-block; position: relative; width: 20.813em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.03em, 1020.59em, 3.963em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2558"><span class="mtable" id="MathJax-Span-2559" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 20.469em; height: 0px;"><span style="position: absolute; clip: rect(2.271em, 1000.76em, 5.953em, -1000em); top: -4.433em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.305em; right: 0em;"><span class="mtd" id="MathJax-Span-2560"><span class="mrow" id="MathJax-Span-2561"><span class="mi" id="MathJax-Span-2562" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.956em; right: 0em;"><span class="mtd" id="MathJax-Span-2577"><span class="mrow" id="MathJax-Span-2578"><span class="mi" id="MathJax-Span-2579" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -2.607em; right: 0em;"><span class="mtd" id="MathJax-Span-2594"><span class="mrow" id="MathJax-Span-2595"><span class="mi" id="MathJax-Span-2596" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span><span style="position: absolute; clip: rect(2.483em, 1019.65em, 6.426em, -1000em); top: -4.68em; left: 0.76em;"><span style="display: inline-block; position: relative; width: 19.709em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.305em; left: 0em;"><span class="mtd" id="MathJax-Span-2563"><span class="mrow" id="MathJax-Span-2564"><span class="mi" id="MathJax-Span-2565"></span><span class="mo" id="MathJax-Span-2566" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2567" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2568" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-2569" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2570"><span class="mrow" id="MathJax-Span-2571"><span class="mo" id="MathJax-Span-2572" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2573" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2574"><span class="mrow" id="MathJax-Span-2575"><span class="mtext" id="MathJax-Span-2576" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.956em; left: 0em;"><span class="mtd" id="MathJax-Span-2580"><span class="mrow" id="MathJax-Span-2581"><span class="mi" id="MathJax-Span-2582"></span><span class="mo" id="MathJax-Span-2583" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2584" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2585" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2586" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2587"><span class="mrow" id="MathJax-Span-2588"><span class="mo" id="MathJax-Span-2589" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2590" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2591"><span class="mrow" id="MathJax-Span-2592"><span class="mtext" id="MathJax-Span-2593" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1019.65em, 4.354em, -1000em); top: -2.607em; left: 0em;"><span class="mtd" id="MathJax-Span-2597"><span class="mrow" id="MathJax-Span-2598"><span class="mi" id="MathJax-Span-2599"></span><span class="mo" id="MathJax-Span-2600" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2601" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2602" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="texatom" id="MathJax-Span-2603"><span class="mrow" id="MathJax-Span-2604"><span class="mtext" id="MathJax-Span-2605" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-2606" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2607"><span class="mrow" id="MathJax-Span-2608"><span class="mo" id="MathJax-Span-2609" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2610" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2611"><span class="mrow" id="MathJax-Span-2612"><span class="mtext" id="MathJax-Span-2613" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="texatom" id="MathJax-Span-2614"><span class="mrow" id="MathJax-Span-2615"><span class="mtext" id="MathJax-Span-2616" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-2617" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2618"><span class="mrow" id="MathJax-Span-2619"><span class="mo" id="MathJax-Span-2620" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2621" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2622"><span class="mrow" id="MathJax-Span-2623"><span class="mtext" id="MathJax-Span-2624" style="font-family: MathJax_Typewriter;">alice</span></span></span><span class="texatom" id="MathJax-Span-2625"><span class="mrow" id="MathJax-Span-2626"><span class="mtext" id="MathJax-Span-2627" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.68em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.931em; border-left: 0px solid; width: 0px; height: 4.442em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-88">\begin{align*}
    A & ::= \, B \; | \; \texttt{alice}\\
    B & ::= \, C \; | \; \texttt{bob}\\
    C & ::= \, C \texttt{charlie} \; | \; \texttt{bob} \texttt{charlie} \; | \; \texttt{alice} \texttt{charlie}
\end{align*}</script>

<p>
Now remove the direct left recursion:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-89-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2628" style="width: 20.979em; display: inline-block;"><span style="display: inline-block; position: relative; width: 18.062em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.713em, 1017.9em, 4.647em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2629"><span class="mtable" id="MathJax-Span-2630" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 17.719em; height: 0px;"><span style="position: absolute; clip: rect(2.942em, 1001.09em, 7.991em, -1000em); top: -5.788em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.989em; right: 0em;"><span class="mtd" id="MathJax-Span-2631"><span class="mrow" id="MathJax-Span-2632"><span class="mi" id="MathJax-Span-2633" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -4.64em; right: 0em;"><span class="mtd" id="MathJax-Span-2648"><span class="mrow" id="MathJax-Span-2649"><span class="mi" id="MathJax-Span-2650" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-2665"><span class="mrow" id="MathJax-Span-2666"><span class="mi" id="MathJax-Span-2667" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1001.09em, 4.127em, -1000em); top: -1.924em; right: 0em;"><span class="mtd" id="MathJax-Span-2696"><span class="mrow" id="MathJax-Span-2697"><span class="msup" id="MathJax-Span-2698"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2699" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.824em;"><span class="mo" id="MathJax-Span-2700" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.788em;"></span></span><span style="position: absolute; clip: rect(3.196em, 1016.63em, 8.506em, -1000em); top: -6.076em; left: 1.093em;"><span style="display: inline-block; position: relative; width: 16.626em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.989em; left: 0em;"><span class="mtd" id="MathJax-Span-2634"><span class="mrow" id="MathJax-Span-2635"><span class="mi" id="MathJax-Span-2636"></span><span class="mo" id="MathJax-Span-2637" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2638" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2639" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-2640" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2641"><span class="mrow" id="MathJax-Span-2642"><span class="mo" id="MathJax-Span-2643" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2644" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2645"><span class="mrow" id="MathJax-Span-2646"><span class="mtext" id="MathJax-Span-2647" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -4.64em; left: 0em;"><span class="mtd" id="MathJax-Span-2651"><span class="mrow" id="MathJax-Span-2652"><span class="mi" id="MathJax-Span-2653"></span><span class="mo" id="MathJax-Span-2654" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2655" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2656" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2657" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2658"><span class="mrow" id="MathJax-Span-2659"><span class="mo" id="MathJax-Span-2660" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2661" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2662"><span class="mrow" id="MathJax-Span-2663"><span class="mtext" id="MathJax-Span-2664" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1016.63em, 4.354em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-2668"><span class="mrow" id="MathJax-Span-2669"><span class="mi" id="MathJax-Span-2670"></span><span class="mo" id="MathJax-Span-2671" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2672" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2673" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2674"><span class="mtext" id="MathJax-Span-2675" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="texatom" id="MathJax-Span-2676"><span class="mrow" id="MathJax-Span-2677"><span class="mtext" id="MathJax-Span-2678" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="msup" id="MathJax-Span-2679"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2680" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.824em;"><span class="mo" id="MathJax-Span-2681" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2682" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2683"><span class="mrow" id="MathJax-Span-2684"><span class="mo" id="MathJax-Span-2685" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2686" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2687"><span class="mrow" id="MathJax-Span-2688"><span class="mtext" id="MathJax-Span-2689" style="font-family: MathJax_Typewriter;">alice</span></span></span><span class="texatom" id="MathJax-Span-2690"><span class="mrow" id="MathJax-Span-2691"><span class="mtext" id="MathJax-Span-2692" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="msup" id="MathJax-Span-2693"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2694" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.824em;"><span class="mo" id="MathJax-Span-2695" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1008.09em, 4.354em, -1000em); top: -1.924em; left: 0em;"><span class="mtd" id="MathJax-Span-2701"><span class="mrow" id="MathJax-Span-2702"><span class="mi" id="MathJax-Span-2703"></span><span class="mo" id="MathJax-Span-2704" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2705" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2706" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2707"><span class="mtext" id="MathJax-Span-2708" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="msup" id="MathJax-Span-2709"><span style="display: inline-block; position: relative; width: 1.093em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2710" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.824em;"><span class="mo" id="MathJax-Span-2711" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-2712" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2713"><span class="mrow" id="MathJax-Span-2714"><span class="mo" id="MathJax-Span-2715" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2716" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2717"><span class="mrow" id="MathJax-Span-2718"><span class="mo" id="MathJax-Span-2719" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.076em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.724em; border-left: 0px solid; width: 0px; height: 6.027em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><msup><mi>C</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><msup><mi>C</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>C</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><msup><mi>C</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-89">\begin{align*}
    A  & ::= \, B \; | \; \texttt{alice}\\
    B  & ::= \, C \; | \; \texttt{bob}\\
    C  & ::= \, \texttt{bob} \texttt{charlie} C' \; | \; \texttt{alice} \texttt{charlie} C'\\
    C' & ::= \, \texttt{charlie} C' \; | \; ε
\end{align*}</script>

<p>
It can be tedious and error-prone to manually try to find left
recursive cycles. We can apply an algorithm to preventatively
transform the grammar so that left recursive cycles cannot possibly
happen. This gives us a larger and more complex grammar than we might
get if we did it manually because it transforms rules even when they
are not left recursive.
</p>

<p>
The key insight of the algorithm is to order the nonterminals
arbitrarily. Then a left recursive cycle can only possibly happen if a
nonterminal with order <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-90-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2720" style="width: 0.413em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.328em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.433em, 1000.29em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2721"><span class="mi" id="MathJax-Span-2722" style="font-family: MathJax_Math; font-style: italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.875em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-90">i</script> directly derives a nonterminal with order
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-91-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2723" style="width: 0.495em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.411em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.433em, 1000.4em, 2.544em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2724"><span class="mi" id="MathJax-Span-2725" style="font-family: MathJax_Math; font-style: italic;">j</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.284em; border-left: 0px solid; width: 0px; height: 1.099em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi></math></span></span><script type="math/tex" id="MathJax-Element-91">j</script> s.t. <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-92-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2726" style="width: 2.424em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.094em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.433em, 1002.05em, 2.544em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2727"><span class="mi" id="MathJax-Span-2728" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mo" id="MathJax-Span-2729" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-2730" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">i</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.284em; border-left: 0px solid; width: 0px; height: 1.099em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>j</mi><mo>&lt;</mo><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-92">j < i</script>. We then inline the lower-ordered nonterminal
into this rule. Continue this process for all rules, then remove any
direct left recursion from the final rule set:
</p>

<p>
Let the nonterminals be arbitrarily labeled <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-93-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2731" style="width: 4.6em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.941em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1003.94em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2732"><span class="msubsup" id="MathJax-Span-2733"><span style="display: inline-block; position: relative; width: 1.179em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2734" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.75em;"><span class="mn" id="MathJax-Span-2735" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-2736" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="msubsup" id="MathJax-Span-2737" style="padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 1.249em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2738" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.75em;"><span class="mi" id="MathJax-Span-2739" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">n</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 1.109em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>A</mi><mn>1</mn></msub><mo>…</mo><msub><mi>A</mi><mi>n</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-93">A_1\ldots A_n</script>. then:
</p>

<p>
For i = 1 to n:
</p>
<ol class="org-ol">
<li>if <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-94-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2740" style="width: 5.667em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.885em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1004.85em, 2.634em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2741"><span class="msubsup" id="MathJax-Span-2742"><span style="display: inline-block; position: relative; width: 1.069em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2743" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.75em;"><span class="mi" id="MathJax-Span-2744" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-2745" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2746" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msubsup" id="MathJax-Span-2747" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.116em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2748" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.75em;"><span class="mi" id="MathJax-Span-2749" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">j</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="texatom" id="MathJax-Span-2750"><span class="mrow" id="MathJax-Span-2751"><span class="mo" id="MathJax-Span-2752" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.389em; border-left: 0px solid; width: 0px; height: 1.267em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>A</mi><mi>i</mi></msub><mo>::=</mo><mspace width="thinmathspace"></mspace><msub><mi>A</mi><mi>j</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-94"> A_i ::= \, A_j α </script>
<ul class="org-ul">
<li>for <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-95-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x2200;&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;.&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2753" style="width: 4.394em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.777em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.4em, 1003.73em, 2.544em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2754"><span class="mi" id="MathJax-Span-2755" style="font-family: MathJax_Main;">∀</span><span class="mi" id="MathJax-Span-2756" style="font-family: MathJax_Math; font-style: italic;">j</span><span class="mo" id="MathJax-Span-2757" style="font-family: MathJax_Main;">.</span><span class="mspace" id="MathJax-Span-2758" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2759" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">j</span><span class="mo" id="MathJax-Span-2760" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-2761" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">i</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.284em; border-left: 0px solid; width: 0px; height: 1.137em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="normal">∀</mi><mi>j</mi><mo>.</mo><mspace width="thickmathspace"></mspace><mi>j</mi><mo>&lt;</mo><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-95">\forall j.\; j < i</script>, inline <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-96-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2762" style="width: 1.316em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.108em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1001.11em, 2.634em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2763"><span class="msubsup" id="MathJax-Span-2764"><span style="display: inline-block; position: relative; width: 1.116em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2765" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.75em;"><span class="mi" id="MathJax-Span-2766" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">j</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.389em; border-left: 0px solid; width: 0px; height: 1.267em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>A</mi><mi>j</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-96">A_j</script> into the right-hand side
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-97-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2767" style="width: 1.234em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.067em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1001.07em, 2.498em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2768"><span class="msubsup" id="MathJax-Span-2769"><span style="display: inline-block; position: relative; width: 1.069em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-2770" style="font-family: MathJax_Math; font-style: italic;">A</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.75em;"><span class="mi" id="MathJax-Span-2771" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">i</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.231em; border-left: 0px solid; width: 0px; height: 1.109em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>A</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-97">A_i</script></li>
</ul></li>
<li>transform any direct left recursive rules</li>
</ol>

<p>
Let's look at the following example again, assuming that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-98-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2772" style="width: 5.708em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.926em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1004.93em, 2.38em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2773"><span class="mi" id="MathJax-Span-2774" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2775" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-2776" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mo" id="MathJax-Span-2777" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-2778" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.094em; border-left: 0px solid; width: 0px; height: 0.972em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>&lt;</mo><mi>B</mi><mo>&lt;</mo><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-98">A < B <
C</script>:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-99-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2779" style="width: 8.828em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.594em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1007.37em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2780"><span class="mtable" id="MathJax-Span-2781" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.242em; height: 0px;"><span style="position: absolute; clip: rect(2.295em, 1000.76em, 5.978em, -1000em); top: -4.433em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.76em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-2782"><span class="mrow" id="MathJax-Span-2783"><span class="mi" id="MathJax-Span-2784" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.932em; right: 0em;"><span class="mtd" id="MathJax-Span-2799"><span class="mrow" id="MathJax-Span-2800"><span class="mi" id="MathJax-Span-2801" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -2.583em; right: 0em;"><span class="mtd" id="MathJax-Span-2816"><span class="mrow" id="MathJax-Span-2817"><span class="mi" id="MathJax-Span-2818" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span><span style="position: absolute; clip: rect(2.261em, 1006.42em, 5.962em, -1000em); top: -4.433em; left: 0.76em;"><span style="display: inline-block; position: relative; width: 6.482em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.281em; left: 0em;"><span class="mtd" id="MathJax-Span-2785"><span class="mrow" id="MathJax-Span-2786"><span class="mi" id="MathJax-Span-2787"></span><span class="mo" id="MathJax-Span-2788" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2789" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2790" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-2791" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2792"><span class="mrow" id="MathJax-Span-2793"><span class="mo" id="MathJax-Span-2794" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2795" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2796"><span class="mrow" id="MathJax-Span-2797"><span class="mtext" id="MathJax-Span-2798" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -3.932em; left: 0em;"><span class="mtd" id="MathJax-Span-2802"><span class="mrow" id="MathJax-Span-2803"><span class="mi" id="MathJax-Span-2804"></span><span class="mo" id="MathJax-Span-2805" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2806" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2807" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2808" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2809"><span class="mrow" id="MathJax-Span-2810"><span class="mo" id="MathJax-Span-2811" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2812" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2813"><span class="mrow" id="MathJax-Span-2814"><span class="mtext" id="MathJax-Span-2815" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1006.42em, 4.111em, -1000em); top: -2.583em; left: 0em;"><span class="mtd" id="MathJax-Span-2819"><span class="mrow" id="MathJax-Span-2820"><span class="mi" id="MathJax-Span-2821"></span><span class="mo" id="MathJax-Span-2822" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2823" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2824" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2825"><span class="mrow" id="MathJax-Span-2826"><span class="mtext" id="MathJax-Span-2827" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.433em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-99">\begin{align*}
    A & ::= \, B \; | \; \texttt{alice}\\
    B & ::= \, C \; | \; \texttt{bob}\\
    C & ::= \, A \texttt{charlie}
\end{align*}</script>

<p>
Here are the steps of the algorithm:
</p>

<ol class="org-ol">
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-100-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2828" style="width: 4.148em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.571em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1003.57em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2829"><span class="mi" id="MathJax-Span-2830" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2831" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2832" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2833" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.926em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi></math></span></span><script type="math/tex" id="MathJax-Element-100"> A ::= \, B </script> → CHECK</li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-101-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2834" style="width: 6.283em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.419em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1005.36em, 2.346em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2835"><span class="mi" id="MathJax-Span-2836" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2837" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2838" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2839" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2840"><span class="mtext" id="MathJax-Span-2841" style="font-family: MathJax_Typewriter;">alice</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.055em; border-left: 0px solid; width: 0px; height: 0.933em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-101"> A ::= \, \texttt{alice} </script> → CHECK</li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-102-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2842" style="width: 4.148em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.571em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1003.57em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2843"><span class="mi" id="MathJax-Span-2844" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-2845" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2846" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2847" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-102"> B ::= \, C </script> → CHECK</li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-103-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2848" style="width: 5.092em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.392em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1004.36em, 2.346em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2849"><span class="mi" id="MathJax-Span-2850" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-2851" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2852" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2853" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2854"><span class="mtext" id="MathJax-Span-2855" style="font-family: MathJax_Typewriter;">bob</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.055em; border-left: 0px solid; width: 0px; height: 0.894em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-103"> B ::= \, \texttt{bob} </script> → CHECK</li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-104-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2856" style="width: 8.376em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.225em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1007.16em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2857"><span class="mi" id="MathJax-Span-2858" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2859" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2860" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2861" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="texatom" id="MathJax-Span-2862"><span class="mrow" id="MathJax-Span-2863"><span class="mtext" id="MathJax-Span-2864" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-104"> C ::= \, A \texttt{charlie} </script> → <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-105-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2865" style="width: 3.286em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.833em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1002.83em, 2.38em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2866"><span class="mi" id="MathJax-Span-2867" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-2868" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-2869" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.094em; border-left: 0px solid; width: 0px; height: 0.972em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>&lt;</mo><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-105">A < C</script>, inline: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-106-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2870" style="width: 16.546em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.245em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1014.18em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2871"><span class="mi" id="MathJax-Span-2872" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2873" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-2874" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="texatom" id="MathJax-Span-2875"><span class="mrow" id="MathJax-Span-2876"><span class="mtext" id="MathJax-Span-2877" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-2878" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2879"><span class="mrow" id="MathJax-Span-2880"><span class="mo" id="MathJax-Span-2881" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2882" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2883"><span class="mrow" id="MathJax-Span-2884"><span class="mtext" id="MathJax-Span-2885" style="font-family: MathJax_Typewriter;">alice</span></span></span><span class="texatom" id="MathJax-Span-2886"><span class="mrow" id="MathJax-Span-2887"><span class="mtext" id="MathJax-Span-2888" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mi>B</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-106">C ::= B \texttt{charlie} \; | \; \texttt{alice} \texttt{charlie} </script></li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-107-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2889" style="width: 10.593em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.113em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1009.05em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2890"><span class="mi" id="MathJax-Span-2891" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2892" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2893" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2894" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2895"><span class="mtext" id="MathJax-Span-2896" style="font-family: MathJax_Typewriter;">alice</span></span></span><span class="texatom" id="MathJax-Span-2897"><span class="mrow" id="MathJax-Span-2898"><span class="mtext" id="MathJax-Span-2899" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-107"> C ::= \, \texttt{alice} \texttt{charlie} </script> → CHECK</li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-108-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2900" style="width: 8.459em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.266em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1007.21em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2901"><span class="mi" id="MathJax-Span-2902" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2903" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2904" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2905" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="texatom" id="MathJax-Span-2906"><span class="mrow" id="MathJax-Span-2907"><span class="mtext" id="MathJax-Span-2908" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-108"> C ::= \, B \texttt{charlie} </script> → <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-109-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2909" style="width: 3.327em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.874em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1002.87em, 2.38em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2910"><span class="mi" id="MathJax-Span-2911" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-2912" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mi" id="MathJax-Span-2913" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.094em; border-left: 0px solid; width: 0px; height: 0.959em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>B</mi><mo>&lt;</mo><mi>C</mi></math></span></span><script type="math/tex" id="MathJax-Element-109"> B < C</script>, inline: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-110-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2914" style="width: 15.314em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.177em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1013.12em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2915"><span class="mi" id="MathJax-Span-2916" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2917" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-2918" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="texatom" id="MathJax-Span-2919"><span class="mrow" id="MathJax-Span-2920"><span class="mtext" id="MathJax-Span-2921" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-2922" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2923"><span class="mrow" id="MathJax-Span-2924"><span class="mo" id="MathJax-Span-2925" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2926" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2927"><span class="mrow" id="MathJax-Span-2928"><span class="mtext" id="MathJax-Span-2929" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="texatom" id="MathJax-Span-2930"><span class="mrow" id="MathJax-Span-2931"><span class="mtext" id="MathJax-Span-2932" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-110">C ::= C \texttt{charlie} \; | \; \texttt{bob} \texttt{charlie} </script></li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-111-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2933" style="width: 9.403em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.087em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1008.03em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2934"><span class="mi" id="MathJax-Span-2935" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2936" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2937" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2938" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-2939"><span class="mtext" id="MathJax-Span-2940" style="font-family: MathJax_Typewriter;">bob</span></span></span><span class="texatom" id="MathJax-Span-2941"><span class="mrow" id="MathJax-Span-2942"><span class="mtext" id="MathJax-Span-2943" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-111"> C ::= \, \texttt{bob} \texttt{charlie}   </script> → CHECK</li>
<li>rule <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-112-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2944" style="width: 8.459em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.266em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1007.21em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2945"><span class="mi" id="MathJax-Span-2946" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2947" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2948" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2949" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="texatom" id="MathJax-Span-2950"><span class="mrow" id="MathJax-Span-2951"><span class="mtext" id="MathJax-Span-2952" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-112"> C ::= \, C \texttt{charlie} </script> → CHECK</li>
<li>done</li>
</ol>

<p>
Now there is one direct left recursive rule: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-113-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2953" style="width: 8.459em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.266em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1007.21em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2954"><span class="mi" id="MathJax-Span-2955" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-2956" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2957" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2958" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="texatom" id="MathJax-Span-2959"><span class="mrow" id="MathJax-Span-2960"><span class="mtext" id="MathJax-Span-2961" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-113">C ::= \, C
\texttt{charlie}</script>. Transform that and we're finished.
</p>
</section>
</li>

<li><a id="org043de70"></a>Removing hidden left recursion<br>
<section class="outline-text-6" id="text-2-4-2-0-4">
<p>
Note that the algorithm for preventing indirect left recursion doesn't
work if there is hidden left recusion. For example, given the
following grammar:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-114-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;dave&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-2962" style="width: 9.813em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.456em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.68em, 1008.23em, 4.613em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-2963"><span class="mtable" id="MathJax-Span-2964" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 8.138em; height: 0px;"><span style="position: absolute; clip: rect(2.893em, 1000.8em, 7.854em, -1000em); top: -5.706em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.828em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.955em; right: 0em;"><span class="mtd" id="MathJax-Span-2965"><span class="mrow" id="MathJax-Span-2966"><span class="mi" id="MathJax-Span-2967" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -4.606em; right: 0em;"><span class="mtd" id="MathJax-Span-2982"><span class="mrow" id="MathJax-Span-2983"><span class="mi" id="MathJax-Span-2984" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.257em; right: 0em;"><span class="mtd" id="MathJax-Span-2999"><span class="mrow" id="MathJax-Span-3000"><span class="mi" id="MathJax-Span-3001" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.8em, 4.105em, -1000em); top: -1.957em; right: 0em;"><span class="mtd" id="MathJax-Span-3012"><span class="mrow" id="MathJax-Span-3013"><span class="mi" id="MathJax-Span-3014" style="font-family: MathJax_Math; font-style: italic;">D</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.706em;"></span></span><span style="position: absolute; clip: rect(3.147em, 1007.25em, 8.39em, -1000em); top: -5.993em; left: 0.828em;"><span style="display: inline-block; position: relative; width: 7.31em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.955em; left: 0em;"><span class="mtd" id="MathJax-Span-2968"><span class="mrow" id="MathJax-Span-2969"><span class="mi" id="MathJax-Span-2970"></span><span class="mo" id="MathJax-Span-2971" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2972" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2973" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-2974" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2975"><span class="mrow" id="MathJax-Span-2976"><span class="mo" id="MathJax-Span-2977" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2978" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2979"><span class="mrow" id="MathJax-Span-2980"><span class="mtext" id="MathJax-Span-2981" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -4.606em; left: 0em;"><span class="mtd" id="MathJax-Span-2985"><span class="mrow" id="MathJax-Span-2986"><span class="mi" id="MathJax-Span-2987"></span><span class="mo" id="MathJax-Span-2988" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-2989" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-2990" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-2991" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2992"><span class="mrow" id="MathJax-Span-2993"><span class="mo" id="MathJax-Span-2994" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-2995" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-2996"><span class="mrow" id="MathJax-Span-2997"><span class="mtext" id="MathJax-Span-2998" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1007.25em, 4.111em, -1000em); top: -3.257em; left: 0em;"><span class="mtd" id="MathJax-Span-3002"><span class="mrow" id="MathJax-Span-3003"><span class="mi" id="MathJax-Span-3004"></span><span class="mo" id="MathJax-Span-3005" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3006" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3007" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">D</span><span class="mi" id="MathJax-Span-3008" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="texatom" id="MathJax-Span-3009"><span class="mrow" id="MathJax-Span-3010"><span class="mtext" id="MathJax-Span-3011" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.42em, 4.354em, -1000em); top: -1.957em; left: 0em;"><span class="mtd" id="MathJax-Span-3015"><span class="mrow" id="MathJax-Span-3016"><span class="mi" id="MathJax-Span-3017"></span><span class="mo" id="MathJax-Span-3018" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3019" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3020" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-3021"><span class="mtext" id="MathJax-Span-3022" style="font-family: MathJax_Typewriter;">dave</span></span></span><span class="mspace" id="MathJax-Span-3023" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3024"><span class="mrow" id="MathJax-Span-3025"><span class="mo" id="MathJax-Span-3026" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3027" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3028"><span class="mrow" id="MathJax-Span-3029"><span class="mo" id="MathJax-Span-3030" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.993em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.685em; border-left: 0px solid; width: 0px; height: 5.95em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>D</mi><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr><mtr><mtd><mi>D</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">dave</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-114">\begin{align*}
A & ::= \, B \; | \; \texttt{alice}\\
B & ::= \, C \; | \; \texttt{bob}\\
C & ::= \, DA \texttt{charlie}\\
D & ::= \, \texttt{dave} \; | \; ε
\end{align*}</script>

<p>
We can apply the algorithm above, and it will go through each rule,
show that they all CHECK, meaning that it cannot identify hidden left
recursion.
</p>

<p>
There are two basic ways to handle hidden left recursion, which end up
actually being pretty similar. The first is transform the grammar to
eliminate ε rules. There is a standard algorithm to do so, which you
have learned in 138 for transforming a grammar into Chomsky normal
form. The second is to (1) compute which nonterminals are <i>nullable</i>,
i.e., which nonterminals can derive ε (directly or indirectly), then
(2) modify the above algorithm to take this information into
account. This end up looking a lot like what you would do to remove ε
rules altogether. The result of applying ε elimination to the grammar
above is:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-115-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;alice&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;bob&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;charlie&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;dave&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3031" style="width: 15.93em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.711em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.68em, 1013.48em, 4.613em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3032"><span class="mtable" id="MathJax-Span-3033" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 13.396em; height: 0px;"><span style="position: absolute; clip: rect(2.934em, 1000.8em, 7.944em, -1000em); top: -5.747em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.828em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.955em; right: 0em;"><span class="mtd" id="MathJax-Span-3034"><span class="mrow" id="MathJax-Span-3035"><span class="mi" id="MathJax-Span-3036" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -4.606em; right: 0em;"><span class="mtd" id="MathJax-Span-3051"><span class="mrow" id="MathJax-Span-3052"><span class="mi" id="MathJax-Span-3053" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.257em; right: 0em;"><span class="mtd" id="MathJax-Span-3068"><span class="mrow" id="MathJax-Span-3069"><span class="mi" id="MathJax-Span-3070" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.8em, 4.105em, -1000em); top: -1.908em; right: 0em;"><span class="mtd" id="MathJax-Span-3090"><span class="mrow" id="MathJax-Span-3091"><span class="mi" id="MathJax-Span-3092" style="font-family: MathJax_Math; font-style: italic;">D</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.747em;"></span></span><span style="position: absolute; clip: rect(2.942em, 1012.51em, 7.991em, -1000em); top: -5.788em; left: 0.828em;"><span style="display: inline-block; position: relative; width: 12.568em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.21em, 4.354em, -1000em); top: -5.955em; left: 0em;"><span class="mtd" id="MathJax-Span-3037"><span class="mrow" id="MathJax-Span-3038"><span class="mi" id="MathJax-Span-3039"></span><span class="mo" id="MathJax-Span-3040" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3041" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3042" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mspace" id="MathJax-Span-3043" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3044"><span class="mrow" id="MathJax-Span-3045"><span class="mo" id="MathJax-Span-3046" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3047" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3048"><span class="mrow" id="MathJax-Span-3049"><span class="mtext" id="MathJax-Span-3050" style="font-family: MathJax_Typewriter;">alice</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.19em, 4.354em, -1000em); top: -4.606em; left: 0em;"><span class="mtd" id="MathJax-Span-3054"><span class="mrow" id="MathJax-Span-3055"><span class="mi" id="MathJax-Span-3056"></span><span class="mo" id="MathJax-Span-3057" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3058" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3059" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-3060" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3061"><span class="mrow" id="MathJax-Span-3062"><span class="mo" id="MathJax-Span-3063" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3064" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3065"><span class="mrow" id="MathJax-Span-3066"><span class="mtext" id="MathJax-Span-3067" style="font-family: MathJax_Typewriter;">bob</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1012.51em, 4.354em, -1000em); top: -3.257em; left: 0em;"><span class="mtd" id="MathJax-Span-3071"><span class="mrow" id="MathJax-Span-3072"><span class="mi" id="MathJax-Span-3073"></span><span class="mo" id="MathJax-Span-3074" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3075" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3076" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">D</span><span class="mi" id="MathJax-Span-3077" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="texatom" id="MathJax-Span-3078"><span class="mrow" id="MathJax-Span-3079"><span class="mtext" id="MathJax-Span-3080" style="font-family: MathJax_Typewriter;">charlie</span></span></span><span class="mspace" id="MathJax-Span-3081" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3082"><span class="mrow" id="MathJax-Span-3083"><span class="mo" id="MathJax-Span-3084" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3085" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3086" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="texatom" id="MathJax-Span-3087"><span class="mrow" id="MathJax-Span-3088"><span class="mtext" id="MathJax-Span-3089" style="font-family: MathJax_Typewriter;">charlie</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.248em, 1004.1em, 4.111em, -1000em); top: -1.908em; left: 0em;"><span class="mtd" id="MathJax-Span-3093"><span class="mrow" id="MathJax-Span-3094"><span class="mi" id="MathJax-Span-3095"></span><span class="mo" id="MathJax-Span-3096" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3097" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3098" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-3099"><span class="mtext" id="MathJax-Span-3100" style="font-family: MathJax_Typewriter;">dave</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.788em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.685em; border-left: 0px solid; width: 0px; height: 5.95em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">alice</mtext></mrow></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">bob</mtext></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>D</mi><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>A</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">charlie</mtext></mrow></mtd></mtr><mtr><mtd><mi>D</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">dave</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-115">\begin{align*}
A & ::= \, B \; | \; \texttt{alice}\\
B & ::= \, C \; | \; \texttt{bob}\\
C & ::= \, DA \texttt{charlie} \; | \; A \texttt{charlie}\\
D & ::= \, \texttt{dave}
\end{align*}</script>
</section>
</li>

<li><a id="orgdbc0fff"></a>Exercise<br>
<section class="outline-text-6" id="text-2-4-2-0-5">
<p>
Remove all left recursion in the following grammar:
</p>

<pre class="code"><code>A ::= BC
B ::= CA | b
C ::= AA | a
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code>[after inlining]
    A ::= BC
    B ::= CA | b
    C ::= CACA | bCA | a
</code></pre>

<pre class="code"><code>[after direct recursion elimination]
    A  ::= BC
    B  ::= CA | b
    C  ::= bCAC' | aC'
    C' ::= ACAC' | ε
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-org507bbed" class="outline-4">
<h4 id="org507bbed"><span class="section-number-4">2.4.3</span> Lookahead, formalized</h4>
<section class="outline-text-4" id="text-2-4-3">
<p>
Now that we have fixed precedence to ensure that we get the correct
AST and we have removed left recursion to ensure termination, the
remaining thing to worry about is making sure that the grammar is
deterministic via lookahead (thus avoiding the need for backtracking).
</p>

<p>
Remember that <i>lookahead</i> means peeking ahead in the input to the next
token(s) in order to determine which production rule to use next. We
are specifically going to allow a constant amount of lookahead <label for="15" class="margin-toggle sidenote-number"></label><input type="checkbox" id="15" class="margin-toggle"><span class="sidenote">in our case, 1 token–except for when disambiguating assignments and
function calls in C♭.</span> which means that we will not be able to handle
some grammars. For any fixed amount of lookahead we can come up with a
grammar that requires more lookahead to become deterministic. However,
1-token lookahead turns out to be good enough in most cases we care
about.
</p>

<p>
Our intuition is that the property we are looking for in a grammar is
that for any given nonterminal A that has multiple rules, looking at
the next token in the input is sufficient to determine which rule we
need to pick. a simple example is our grammar from the LL(1) parsing
section:
</p>

<p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-116-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3101" style="width: 10.552em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.072em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1009.07em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3102"><span class="mi" id="MathJax-Span-3103" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-3104" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-3105" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3106" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3107" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mspace" id="MathJax-Span-3108" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3109" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-3110" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3111" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mspace" id="MathJax-Span-3112" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3113"><span class="mrow" id="MathJax-Span-3114"><span class="mo" id="MathJax-Span-3115" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3116" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3117" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-3118" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3119" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mspace" id="MathJax-Span-3120" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3121" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mspace" id="MathJax-Span-3122" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3123"><span class="mrow" id="MathJax-Span-3124"><span class="mo" id="MathJax-Span-3125" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3126" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3127" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>S</mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>a</mi><mspace width="thinmathspace"></mspace><mi>S</mi><mspace width="thinmathspace"></mspace><mi>a</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>b</mi><mspace width="thinmathspace"></mspace><mi>S</mi><mspace width="thinmathspace"></mspace><mi>b</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>c</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-116">
S \; ::= \; a \, S \, a \; | \; b \, S \, b \; | \; c
</script>
</p>

<p>
If we have an <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-117-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3128" style="width: 0.782em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.657em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1000.66em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3129"><span class="mi" id="MathJax-Span-3130" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>S</mi></math></span></span><script type="math/tex" id="MathJax-Element-117">S</script> symbol and need to expand it with one of these
rules, by looking at the next token in the input we can tell which
rule to use: <code>a</code>: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-118-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3131" style="width: 1.972em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.683em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1001.66em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3132"><span class="mi" id="MathJax-Span-3133" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-3134" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-3135" style="font-family: MathJax_Math; font-style: italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>S</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-118">aSa</script>, <code>b</code>: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-119-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3136" style="width: 1.767em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.519em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.389em, 1001.51em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3137"><span class="mi" id="MathJax-Span-3138" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-3139" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-3140" style="font-family: MathJax_Math; font-style: italic;">b</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.939em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi><mi>S</mi><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-119">bSb</script>, <code>c</code>: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-120-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3141" style="width: 0.536em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.452em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.652em, 1000.45em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3142"><span class="mi" id="MathJax-Span-3143" style="font-family: MathJax_Math; font-style: italic;">c</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.621em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi></math></span></span><script type="math/tex" id="MathJax-Element-120">c</script>. For example, on
the input <code>abcba</code>:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-121-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;Lookahead: \texttt{a}, pick&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;Lookahead: \texttt{b}, pick&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;Lookahead: \texttt{c}, pick&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3144" style="width: 27.072em; display: inline-block;"><span style="display: inline-block; position: relative; width: 23.333em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.056em, 1023.14em, 4.039em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-3145"><span class="mtable" id="MathJax-Span-3146" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 23.015em; height: 0px;"><span style="position: absolute; clip: rect(2.223em, 1000.65em, 5.973em, -1000em); top: -4.425em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.645em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.65em, 4.217em, -1000em); top: -5.348em; right: 0em;"><span class="mtd" id="MathJax-Span-3147"><span class="mrow" id="MathJax-Span-3148"><span class="mi" id="MathJax-Span-3149" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -3.998em; right: 0em;"><span class="mtd" id="MathJax-Span-3167"><span class="mrow" id="MathJax-Span-3168"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.648em; right: 0em;"><span class="mtd" id="MathJax-Span-3188"><span class="mrow" id="MathJax-Span-3189"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.425em;"></span></span><span style="position: absolute; clip: rect(2.223em, 1004.09em, 5.984em, -1000em); top: -4.425em; left: 0.645em;"><span style="display: inline-block; position: relative; width: 4.117em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1003.24em, 4.217em, -1000em); top: -5.348em; left: 0em;"><span class="mtd" id="MathJax-Span-3150"><span class="mrow" id="MathJax-Span-3151"><span class="mi" id="MathJax-Span-3152"></span><span class="mo" id="MathJax-Span-3153" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-3154" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-3155" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-3156" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.146em, 1004.09em, 4.217em, -1000em); top: -3.998em; left: 0em;"><span class="mtd" id="MathJax-Span-3169"><span class="mrow" id="MathJax-Span-3170"><span class="mi" id="MathJax-Span-3171"></span><span class="mo" id="MathJax-Span-3172" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-3173" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-3174" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-3175" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-3176" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-3177" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.157em, 1003.88em, 4.206em, -1000em); top: -2.648em; left: 0em;"><span class="mtd" id="MathJax-Span-3190"><span class="mrow" id="MathJax-Span-3191"><span class="mi" id="MathJax-Span-3192"></span><span class="mo" id="MathJax-Span-3193" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-3194" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-3195" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-3196" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-3197" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-3198" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.425em;"></span></span><span style="position: absolute; clip: rect(2.465em, 1016.23em, 6.51em, -1000em); top: -4.713em; left: 6.762em;"><span style="display: inline-block; position: relative; width: 16.253em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1016.23em, 4.445em, -1000em); top: -5.348em; right: 0em;"><span class="mtd" id="MathJax-Span-3157"><span class="mrow" id="MathJax-Span-3158"><span class="texatom" id="MathJax-Span-3159"><span class="mrow" id="MathJax-Span-3160"><span class="mtext" id="MathJax-Span-3161" style="font-family: MathJax_Main;">Lookahead: \texttt{a}, pick&nbsp;</span></span></span><span class="mi" id="MathJax-Span-3162" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mo" id="MathJax-Span-3163" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-3164" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">a</span><span class="mi" id="MathJax-Span-3165" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-3166" style="font-family: MathJax_Math; font-style: italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1016.1em, 4.445em, -1000em); top: -3.998em; right: 0em;"><span class="mtd" id="MathJax-Span-3178"><span class="mrow" id="MathJax-Span-3179"><span class="texatom" id="MathJax-Span-3180"><span class="mrow" id="MathJax-Span-3181"><span class="mtext" id="MathJax-Span-3182" style="font-family: MathJax_Main;">Lookahead: \texttt{b}, pick&nbsp;</span></span></span><span class="mi" id="MathJax-Span-3183" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mo" id="MathJax-Span-3184" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-3185" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">b</span><span class="mi" id="MathJax-Span-3186" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mi" id="MathJax-Span-3187" style="font-family: MathJax_Math; font-style: italic;">b</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1014.92em, 4.445em, -1000em); top: -2.648em; right: 0em;"><span class="mtd" id="MathJax-Span-3199"><span class="mrow" id="MathJax-Span-3200"><span class="texatom" id="MathJax-Span-3201"><span class="mrow" id="MathJax-Span-3202"><span class="mtext" id="MathJax-Span-3203" style="font-family: MathJax_Main;">Lookahead: \texttt{c}, pick&nbsp;</span></span></span><span class="mi" id="MathJax-Span-3204" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mo" id="MathJax-Span-3205" style="font-family: MathJax_Main; padding-left: 0.278em;">→</span><span class="mi" id="MathJax-Span-3206" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">c</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.713em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.952em; border-left: 0px solid; width: 0px; height: 4.483em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>S</mi></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mi>a</mi><mi>S</mi><mi>a</mi></mtd><mtd><mrow class="MJX-TeXAtom-ORD"><mtext>Lookahead: \texttt{a}, pick&nbsp;</mtext></mrow><mi>S</mi><mo stretchy="false">→</mo><mi>a</mi><mi>S</mi><mi>a</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mi>a</mi><mi>b</mi><mi>S</mi><mi>b</mi><mi>a</mi></mtd><mtd><mrow class="MJX-TeXAtom-ORD"><mtext>Lookahead: \texttt{b}, pick&nbsp;</mtext></mrow><mi>S</mi><mo stretchy="false">→</mo><mi>b</mi><mi>S</mi><mi>b</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mo stretchy="false">→</mo><mi>a</mi><mi>b</mi><mi>c</mi><mi>b</mi><mi>a</mi></mtd><mtd><mrow class="MJX-TeXAtom-ORD"><mtext>Lookahead: \texttt{c}, pick&nbsp;</mtext></mrow><mi>S</mi><mo stretchy="false">→</mo><mi>c</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-121">\begin{align*}
S & \to aSa & \textrm{Lookahead: \texttt{a}, pick } S \to aSa \\
 & \to abSba & \textrm{Lookahead: \texttt{b}, pick } S \to bSb \\
 & \to abcba & \textrm{Lookahead: \texttt{c}, pick } S \to c
\end{align*}</script>

<p>
We say that a grammar with this property is a <i>predictive grammar</i>
because it lets us predict which rule to apply. Let's formalize this
property. First, assume that there are no ε rules; then we will expand
the formalization to handle ε rules.
</p>
</section>

<ol class="org-ol">
<li><a id="org117749a"></a>formal property without ε<br>
<section class="outline-text-6" id="text-2-4-3-0-1">
<p>
Let α, β be strings of grammar symbols including both terminals (T),
and nonterminals (NT). We are going to define a set of terminals
relevant to prediction:
</p>

<p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-122-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B3;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3207" style="width: 14.575em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.562em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1012.5em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3208"><span class="texatom" id="MathJax-Span-3209"><span class="mrow" id="MathJax-Span-3210"><span class="mtext" id="MathJax-Span-3211" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3212" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-3213"><span class="mrow" id="MathJax-Span-3214"><span class="mo" id="MathJax-Span-3215" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mo" id="MathJax-Span-3216" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3217" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3218" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3219" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3220"><span class="mi" id="MathJax-Span-3221" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-3222" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mi" id="MathJax-Span-3223" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span class="texatom" id="MathJax-Span-3224"><span class="mrow" id="MathJax-Span-3225"><span class="mo" id="MathJax-Span-3226" style="font-family: MathJax_Main;">|</span></span></span><span class="texatom" id="MathJax-Span-3227"><span class="mrow" id="MathJax-Span-3228"><span class="mo" id="MathJax-Span-3229" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msubsup" id="MathJax-Span-3230" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.348em, 1000.94em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mo" id="MathJax-Span-3231" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 1em;"><span class="texatom" id="MathJax-Span-3232"><span class="mrow" id="MathJax-Span-3233"><span class="mo" id="MathJax-Span-3234" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mi" id="MathJax-Span-3235" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">t</span><span class="texatom" id="MathJax-Span-3236"><span class="mrow" id="MathJax-Span-3237"><span class="mo" id="MathJax-Span-3238" style="font-family: MathJax_Math; font-style: italic;">γ</span></span></span></span><span class="mo" id="MathJax-Span-3239" style="font-family: MathJax_Main;">}</span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mo stretchy="false">)</mo><mo>=</mo><mrow><mo>{</mo><mrow><mi>t</mi><mo>∈</mo><mi>T</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msup><mo stretchy="false">→</mo><mrow class="MJX-TeXAtom-ORD"><mo>∗</mo></mrow></msup><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mo>γ</mo></mrow></mrow><mo>}</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-122">
\textsf{FIRST}(α) = \set{ t ∈ T | α \to^{*} tγ }
</script>
</p>

<p>
in other words, \textsf{FIRST}(α) is the set of the <i>first</i> terminals
that can be derived from α with 0 or more applications of the
grammar's production rules.
</p>

<p>
There is an algorithm in to compute \textsf{FIRST} sets<label for="16" class="margin-toggle sidenote-number"></label><input type="checkbox" id="16" class="margin-toggle"><span class="sidenote">See the
top-down parsing chapter in Cooper &amp; Torczon or slide 3 of <a href="https://web.eecs.umich.edu/~weimerw/2008-415/reading/FirstFollowLL.pdf">this slide
deck</a>.</span>, but for simple grammars we can do it by inspection.
</p>

<ul class="org-ul">
<li><p>
Example
</p>

<p>
The grammar:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-123-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3240" style="width: 12.235em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.55em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1010.38em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3241"><span class="mtable" id="MathJax-Span-3242" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 10.196em; height: 0px;"><span style="position: absolute; clip: rect(2.224em, 1000.76em, 5.825em, -1000em); top: -4.351em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.65em, 4.127em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-3243"><span class="mrow" id="MathJax-Span-3244"><span class="mi" id="MathJax-Span-3245" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.981em; right: 0em;"><span class="mtd" id="MathJax-Span-3253"><span class="mrow" id="MathJax-Span-3254"><span class="mi" id="MathJax-Span-3255" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -2.632em; right: 0em;"><span class="mtd" id="MathJax-Span-3280"><span class="mrow" id="MathJax-Span-3281"><span class="mi" id="MathJax-Span-3282" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.351em;"></span></span><span style="position: absolute; clip: rect(2.46em, 1009.44em, 6.32em, -1000em); top: -4.598em; left: 0.759em;"><span style="display: inline-block; position: relative; width: 9.437em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1003.56em, 4.105em, -1000em); top: -5.281em; left: 0em;"><span class="mtd" id="MathJax-Span-3246"><span class="mrow" id="MathJax-Span-3247"><span class="mi" id="MathJax-Span-3248"></span><span class="mo" id="MathJax-Span-3249" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3250" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3251" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-3252" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1009.44em, 4.354em, -1000em); top: -3.981em; left: 0em;"><span class="mtd" id="MathJax-Span-3256"><span class="mrow" id="MathJax-Span-3257"><span class="mi" id="MathJax-Span-3258"></span><span class="mo" id="MathJax-Span-3259" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3260" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3261" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-3262" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3263" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mspace" id="MathJax-Span-3264" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3265"><span class="mrow" id="MathJax-Span-3266"><span class="mo" id="MathJax-Span-3267" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3268" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3269" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-3270" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3271" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-3272" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3273"><span class="mrow" id="MathJax-Span-3274"><span class="mo" id="MathJax-Span-3275" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3276" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3277" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3278" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3279" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.82em, 4.354em, -1000em); top: -2.632em; left: 0em;"><span class="mtd" id="MathJax-Span-3283"><span class="mrow" id="MathJax-Span-3284"><span class="mi" id="MathJax-Span-3285"></span><span class="mo" id="MathJax-Span-3286" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3287" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mn" id="MathJax-Span-3288" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span><span class="mspace" id="MathJax-Span-3289" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3290"><span class="mrow" id="MathJax-Span-3291"><span class="mo" id="MathJax-Span-3292" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3293" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mn" id="MathJax-Span-3294" style="font-family: MathJax_Main;">1</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.598em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>S</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mi>B</mi></mtd></mtr><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mi>B</mi><mi>w</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>y</mi><mi>B</mi><mi>z</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>B</mi><mi>w</mi><mi>z</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mn>0</mn><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mn>1</mn></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-123">\begin{align*}
S & ::= \, AB \\
A & ::= \, xBw \; | \; yBz \; | \; Bwz \\
B & ::= \, 0 \; | \; 1
\end{align*}</script>

<p>
The first sets:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-124-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3295" style="width: 13.508em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.617em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-2.056em, 1011.38em, 5.99em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3296"><span class="mtable" id="MathJax-Span-3297" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 11.292em; height: 0px;"><span style="position: absolute; clip: rect(4.521em, 1005.46em, 12.517em, -1000em); top: -8.744em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.555em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1004.06em, 4.355em, -1000em); top: -7.332em; right: 0em;"><span class="mtd" id="MathJax-Span-3298"><span class="mrow" id="MathJax-Span-3299"><span class="texatom" id="MathJax-Span-3300"><span class="mrow" id="MathJax-Span-3301"><span class="mtext" id="MathJax-Span-3302" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3303" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3304" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mo" id="MathJax-Span-3305" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.16em, 4.355em, -1000em); top: -5.982em; right: 0em;"><span class="mtd" id="MathJax-Span-3321"><span class="mrow" id="MathJax-Span-3322"><span class="texatom" id="MathJax-Span-3323"><span class="mrow" id="MathJax-Span-3324"><span class="mtext" id="MathJax-Span-3325" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3326" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3327" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3328" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.17em, 4.355em, -1000em); top: -4.632em; right: 0em;"><span class="mtd" id="MathJax-Span-3344"><span class="mrow" id="MathJax-Span-3345"><span class="texatom" id="MathJax-Span-3346"><span class="mrow" id="MathJax-Span-3347"><span class="mtext" id="MathJax-Span-3348" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3349" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3350" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3351" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.46em, 4.355em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-3363"><span class="mrow" id="MathJax-Span-3364"><span class="texatom" id="MathJax-Span-3365"><span class="mrow" id="MathJax-Span-3366"><span class="mtext" id="MathJax-Span-3367" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3368" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3369" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-3370" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3371" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mo" id="MathJax-Span-3372" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.14em, 4.355em, -1000em); top: -1.932em; right: 0em;"><span class="mtd" id="MathJax-Span-3381"><span class="mrow" id="MathJax-Span-3382"><span class="texatom" id="MathJax-Span-3383"><span class="mrow" id="MathJax-Span-3384"><span class="mtext" id="MathJax-Span-3385" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3386" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3387" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-3388" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3389" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-3390" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.36em, 4.355em, -1000em); top: -0.582em; right: 0em;"><span class="mtd" id="MathJax-Span-3399"><span class="mrow" id="MathJax-Span-3400"><span class="texatom" id="MathJax-Span-3401"><span class="mrow" id="MathJax-Span-3402"><span class="mtext" id="MathJax-Span-3403" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3404" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3405" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3406" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3407" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-3408" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.744em;"></span></span><span style="position: absolute; clip: rect(4.521em, 1005.67em, 12.517em, -1000em); top: -8.744em; left: 5.555em;"><span style="display: inline-block; position: relative; width: 5.737em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1005.67em, 4.355em, -1000em); top: -7.332em; left: 0em;"><span class="mtd" id="MathJax-Span-3306"><span class="mrow" id="MathJax-Span-3307"><span class="mi" id="MathJax-Span-3308"></span><span class="mo" id="MathJax-Span-3309" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3310" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3311" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3312"><span class="mi" id="MathJax-Span-3313" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3314" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3315" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-3316" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3317" style="font-family: MathJax_Main; padding-left: 0.167em;">0</span><span class="mo" id="MathJax-Span-3318" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3319" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span></span><span class="mo" id="MathJax-Span-3320" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.67em, 4.355em, -1000em); top: -5.982em; left: 0em;"><span class="mtd" id="MathJax-Span-3329"><span class="mrow" id="MathJax-Span-3330"><span class="mi" id="MathJax-Span-3331"></span><span class="mo" id="MathJax-Span-3332" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3333" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3334" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3335"><span class="mi" id="MathJax-Span-3336" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3337" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3338" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-3339" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3340" style="font-family: MathJax_Main; padding-left: 0.167em;">0</span><span class="mo" id="MathJax-Span-3341" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3342" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span></span><span class="mo" id="MathJax-Span-3343" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.71em, 4.355em, -1000em); top: -4.632em; left: 0em;"><span class="mtd" id="MathJax-Span-3352"><span class="mrow" id="MathJax-Span-3353"><span class="mi" id="MathJax-Span-3354"></span><span class="mo" id="MathJax-Span-3355" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3356" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3357" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3358"><span class="mn" id="MathJax-Span-3359" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-3360" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3361" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span></span><span class="mo" id="MathJax-Span-3362" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.84em, 4.355em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-3373"><span class="mrow" id="MathJax-Span-3374"><span class="mi" id="MathJax-Span-3375"></span><span class="mo" id="MathJax-Span-3376" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3377" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3378" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3379" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3380" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.76em, 4.355em, -1000em); top: -1.932em; left: 0em;"><span class="mtd" id="MathJax-Span-3391"><span class="mrow" id="MathJax-Span-3392"><span class="mi" id="MathJax-Span-3393"></span><span class="mo" id="MathJax-Span-3394" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3395" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3396" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3397" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-3398" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.71em, 4.355em, -1000em); top: -0.582em; left: 0em;"><span class="mtd" id="MathJax-Span-3409"><span class="mrow" id="MathJax-Span-3410"><span class="mi" id="MathJax-Span-3411"></span><span class="mo" id="MathJax-Span-3412" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3413" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3414" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3415"><span class="mn" id="MathJax-Span-3416" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-3417" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3418" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span></span><span class="mo" id="MathJax-Span-3419" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.744em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -4.282em; border-left: 0px solid; width: 0px; height: 9.143em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>x</mi><mi>B</mi><mi>w</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>y</mi><mi>B</mi><mi>z</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>y</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mi>w</mi><mi>z</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>}</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-124">\begin{align*}
\textsf{FIRST}(S)   & = \set{x,y,0,1} \\
\textsf{FIRST}(A)   & = \set{x,y,0,1} \\
\textsf{FIRST}(B)   & = \set{0,1} \\
\textsf{FIRST}(xBw) & = \set{x} \\
\textsf{FIRST}(yBz) & = \set{y} \\
\textsf{FIRST}(Bwz) & = \set{0,1}
\end{align*}</script></li>
</ul>

<p>
A grammar can be parsed with no backtracking using a lookahead of 1 if
the following holds: For any nonterminal A such that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-125-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3420" style="width: 5.626em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.844em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1004.85em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3421"><span class="mi" id="MathJax-Span-3422" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3423" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3424" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3425" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-3426"><span class="mo" id="MathJax-Span-3427" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mspace" id="MathJax-Span-3428" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3429"><span class="mrow" id="MathJax-Span-3430"><span class="mo" id="MathJax-Span-3431" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3432" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3433"><span class="mrow" id="MathJax-Span-3434"><span class="mo" id="MathJax-Span-3435" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-125">A ::= \, α \; |
\; β </script>, this must be true: <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-126-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2229;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x2205;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3436" style="width: 12.974em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.166em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.322em, 1011.13em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3437"><span class="texatom" id="MathJax-Span-3438"><span class="mrow" id="MathJax-Span-3439"><span class="mtext" id="MathJax-Span-3440" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3441" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-3442"><span class="mrow" id="MathJax-Span-3443"><span class="mo" id="MathJax-Span-3444" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mo" id="MathJax-Span-3445" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3446" style="font-family: MathJax_Main; padding-left: 0.222em;">∩</span><span class="texatom" id="MathJax-Span-3447" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-3448"><span class="mtext" id="MathJax-Span-3449" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3450" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-3451"><span class="mrow" id="MathJax-Span-3452"><span class="mo" id="MathJax-Span-3453" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span class="mo" id="MathJax-Span-3454" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3455" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-3456" style="font-family: MathJax_Main; padding-left: 0.278em;">∅</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.281em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mo stretchy="false">)</mo><mo>∩</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi></math></span></span><script type="math/tex" id="MathJax-Element-126"> \textsf{FIRST}(α) \cap
\textsf{FIRST}(β) = \emptyset </script>.
</p>

<p>
During parsing when we are expanding an A node, we just need to look
at the next token <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-127-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3457" style="width: 0.454em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.369em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.468em, 1000.34em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3458"><span class="mi" id="MathJax-Span-3459" style="font-family: MathJax_Math; font-style: italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.834em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-127"> t </script> in the input to determine which production
to use (i.e., the one that has <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-128-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3460" style="width: 0.454em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.369em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.468em, 1000.34em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3461"><span class="mi" id="MathJax-Span-3462" style="font-family: MathJax_Math; font-style: italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.834em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-128">t</script> in its <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-129-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3463" style="width: 3.204em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.75em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1002.71em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3464"><span class="texatom" id="MathJax-Span-3465"><span class="mrow" id="MathJax-Span-3466"><span class="mtext" id="MathJax-Span-3467" style="font-family: MathJax_SansSerif;">FIRST</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-129">\textsf{FIRST}</script>
set). Since the formal property says that the <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-130-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3468" style="width: 3.204em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.75em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1002.71em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3469"><span class="texatom" id="MathJax-Span-3470"><span class="mrow" id="MathJax-Span-3471"><span class="mtext" id="MathJax-Span-3472" style="font-family: MathJax_SansSerif;">FIRST</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-130">\textsf{FIRST}</script> sets
are disjoint, we know there is only one production that we can take.
</p>
</section>
</li>

<li><a id="orgb642b25"></a>formal property with ε<br>
<section class="outline-text-6" id="text-2-4-3-0-2">
<p>
Now, suppose that we <i>do</i> have ε productions (which is likely if we
needed to remove left recursion).
</p>

<ol class="org-ol">
<li>Example 1</li>
</ol>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-131-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3473" style="width: 12.235em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.55em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.005em, 1010.38em, 3.939em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3474"><span class="mtable" id="MathJax-Span-3475" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 10.196em; height: 0px;"><span style="position: absolute; clip: rect(2.224em, 1000.76em, 5.825em, -1000em); top: -4.351em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.154em, 1000.65em, 4.127em, -1000em); top: -5.281em; right: 0em;"><span class="mtd" id="MathJax-Span-3476"><span class="mrow" id="MathJax-Span-3477"><span class="mi" id="MathJax-Span-3478" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -3.981em; right: 0em;"><span class="mtd" id="MathJax-Span-3486"><span class="mrow" id="MathJax-Span-3487"><span class="mi" id="MathJax-Span-3488" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -2.632em; right: 0em;"><span class="mtd" id="MathJax-Span-3513"><span class="mrow" id="MathJax-Span-3514"><span class="mi" id="MathJax-Span-3515" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.351em;"></span></span><span style="position: absolute; clip: rect(2.46em, 1009.44em, 6.32em, -1000em); top: -4.598em; left: 0.759em;"><span style="display: inline-block; position: relative; width: 9.437em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1003.56em, 4.105em, -1000em); top: -5.281em; left: 0em;"><span class="mtd" id="MathJax-Span-3479"><span class="mrow" id="MathJax-Span-3480"><span class="mi" id="MathJax-Span-3481"></span><span class="mo" id="MathJax-Span-3482" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3483" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3484" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">A</span><span class="mi" id="MathJax-Span-3485" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1009.44em, 4.354em, -1000em); top: -3.981em; left: 0em;"><span class="mtd" id="MathJax-Span-3489"><span class="mrow" id="MathJax-Span-3490"><span class="mi" id="MathJax-Span-3491"></span><span class="mo" id="MathJax-Span-3492" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3493" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3494" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-3495" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3496" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mspace" id="MathJax-Span-3497" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3498"><span class="mrow" id="MathJax-Span-3499"><span class="mo" id="MathJax-Span-3500" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3501" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3502" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-3503" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3504" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-3505" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3506"><span class="mrow" id="MathJax-Span-3507"><span class="mo" id="MathJax-Span-3508" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3509" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3510" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3511" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3512" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.15em, 4.354em, -1000em); top: -2.632em; left: 0em;"><span class="mtd" id="MathJax-Span-3516"><span class="mrow" id="MathJax-Span-3517"><span class="mi" id="MathJax-Span-3518"></span><span class="mo" id="MathJax-Span-3519" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3520" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mn" id="MathJax-Span-3521" style="font-family: MathJax_Main; padding-left: 0.278em;">0</span><span class="mspace" id="MathJax-Span-3522" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3523"><span class="mrow" id="MathJax-Span-3524"><span class="mo" id="MathJax-Span-3525" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3526" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mn" id="MathJax-Span-3527" style="font-family: MathJax_Main;">1</span><span class="mspace" id="MathJax-Span-3528" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3529"><span class="mrow" id="MathJax-Span-3530"><span class="mo" id="MathJax-Span-3531" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3532" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3533"><span class="mrow" id="MathJax-Span-3534"><span class="mo" id="MathJax-Span-3535" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.598em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.902em; border-left: 0px solid; width: 0px; height: 4.385em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>S</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>A</mi><mi>B</mi></mtd></mtr><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mi>B</mi><mi>w</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>y</mi><mi>B</mi><mi>z</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>B</mi><mi>w</mi><mi>z</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mn>0</mn><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mn>1</mn><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-131">\begin{align*}
       S & ::= \, AB \\
       A & ::= \, xBw \; | \; yBz \; | \; Bwz \\
       B & ::= \, 0 \; | \; 1 \; | \; ε
 \end{align*}</script>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-132-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;S&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3536" style="width: 14.821em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.767em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-2.056em, 1012.53em, 5.99em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3537"><span class="mtable" id="MathJax-Span-3538" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 12.453em; height: 0px;"><span style="position: absolute; clip: rect(4.521em, 1005.46em, 12.517em, -1000em); top: -8.744em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.555em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1004.06em, 4.355em, -1000em); top: -7.332em; right: 0em;"><span class="mtd" id="MathJax-Span-3539"><span class="mrow" id="MathJax-Span-3540"><span class="texatom" id="MathJax-Span-3541"><span class="mrow" id="MathJax-Span-3542"><span class="mtext" id="MathJax-Span-3543" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3544" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3545" style="font-family: MathJax_Math; font-style: italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.032em;"></span></span><span class="mo" id="MathJax-Span-3546" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.16em, 4.355em, -1000em); top: -5.982em; right: 0em;"><span class="mtd" id="MathJax-Span-3564"><span class="mrow" id="MathJax-Span-3565"><span class="texatom" id="MathJax-Span-3566"><span class="mrow" id="MathJax-Span-3567"><span class="mtext" id="MathJax-Span-3568" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3569" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3570" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3571" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.17em, 4.355em, -1000em); top: -4.632em; right: 0em;"><span class="mtd" id="MathJax-Span-3589"><span class="mrow" id="MathJax-Span-3590"><span class="texatom" id="MathJax-Span-3591"><span class="mrow" id="MathJax-Span-3592"><span class="mtext" id="MathJax-Span-3593" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3594" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3595" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3596" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.46em, 4.355em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-3608"><span class="mrow" id="MathJax-Span-3609"><span class="texatom" id="MathJax-Span-3610"><span class="mrow" id="MathJax-Span-3611"><span class="mtext" id="MathJax-Span-3612" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3613" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3614" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-3615" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3616" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mo" id="MathJax-Span-3617" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.14em, 4.355em, -1000em); top: -1.932em; right: 0em;"><span class="mtd" id="MathJax-Span-3626"><span class="mrow" id="MathJax-Span-3627"><span class="texatom" id="MathJax-Span-3628"><span class="mrow" id="MathJax-Span-3629"><span class="mtext" id="MathJax-Span-3630" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3631" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3632" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-3633" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3634" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-3635" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.36em, 4.355em, -1000em); top: -0.582em; right: 0em;"><span class="mtd" id="MathJax-Span-3644"><span class="mrow" id="MathJax-Span-3645"><span class="texatom" id="MathJax-Span-3646"><span class="mrow" id="MathJax-Span-3647"><span class="mtext" id="MathJax-Span-3648" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3649" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3650" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3651" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3652" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-3653" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.744em;"></span></span><span style="position: absolute; clip: rect(4.521em, 1006.83em, 12.517em, -1000em); top: -8.744em; left: 5.555em;"><span style="display: inline-block; position: relative; width: 6.898em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1006.83em, 4.355em, -1000em); top: -7.332em; left: 0em;"><span class="mtd" id="MathJax-Span-3547"><span class="mrow" id="MathJax-Span-3548"><span class="mi" id="MathJax-Span-3549"></span><span class="mo" id="MathJax-Span-3550" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3551" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3552" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3553"><span class="mi" id="MathJax-Span-3554" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3555" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3556" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-3557" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3558" style="font-family: MathJax_Main; padding-left: 0.167em;">0</span><span class="mo" id="MathJax-Span-3559" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3560" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span><span class="mo" id="MathJax-Span-3561" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3562" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">w</span></span><span class="mo" id="MathJax-Span-3563" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1006.83em, 4.355em, -1000em); top: -5.982em; left: 0em;"><span class="mtd" id="MathJax-Span-3572"><span class="mrow" id="MathJax-Span-3573"><span class="mi" id="MathJax-Span-3574"></span><span class="mo" id="MathJax-Span-3575" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3576" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3577" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3578"><span class="mi" id="MathJax-Span-3579" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3580" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3581" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-3582" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3583" style="font-family: MathJax_Main; padding-left: 0.167em;">0</span><span class="mo" id="MathJax-Span-3584" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3585" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span><span class="mo" id="MathJax-Span-3586" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3587" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">w</span></span><span class="mo" id="MathJax-Span-3588" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.71em, 4.355em, -1000em); top: -4.632em; left: 0em;"><span class="mtd" id="MathJax-Span-3597"><span class="mrow" id="MathJax-Span-3598"><span class="mi" id="MathJax-Span-3599"></span><span class="mo" id="MathJax-Span-3600" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3601" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3602" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3603"><span class="mn" id="MathJax-Span-3604" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-3605" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3606" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span></span><span class="mo" id="MathJax-Span-3607" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.84em, 4.355em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-3618"><span class="mrow" id="MathJax-Span-3619"><span class="mi" id="MathJax-Span-3620"></span><span class="mo" id="MathJax-Span-3621" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3622" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3623" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3624" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3625" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.76em, 4.355em, -1000em); top: -1.932em; left: 0em;"><span class="mtd" id="MathJax-Span-3636"><span class="mrow" id="MathJax-Span-3637"><span class="mi" id="MathJax-Span-3638"></span><span class="mo" id="MathJax-Span-3639" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3640" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3641" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3642" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-3643" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.87em, 4.355em, -1000em); top: -0.582em; left: 0em;"><span class="mtd" id="MathJax-Span-3654"><span class="mrow" id="MathJax-Span-3655"><span class="mi" id="MathJax-Span-3656"></span><span class="mo" id="MathJax-Span-3657" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3658" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3659" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3660"><span class="mn" id="MathJax-Span-3661" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-3662" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-3663" style="font-family: MathJax_Main; padding-left: 0.167em;">1</span><span class="mo" id="MathJax-Span-3664" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3665" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">w</span></span><span class="mo" id="MathJax-Span-3666" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.744em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -4.282em; border-left: 0px solid; width: 0px; height: 9.143em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>S</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mi>w</mi></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mi>w</mi></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>x</mi><mi>B</mi><mi>w</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>y</mi><mi>B</mi><mi>z</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>y</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mi>w</mi><mi>z</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mn>0</mn><mo>,</mo><mn>1</mn><mo>,</mo><mi>w</mi></mrow><mo>}</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-132">\begin{align*}
   \textsf{FIRST}(S)   & = \set{x,y,0,1,w} \\
   \textsf{FIRST}(A)   & = \set{x,y,0,1,w} \\
   \textsf{FIRST}(B)   & = \set{0,1} \\
   \textsf{FIRST}(xBw) & = \set{x} \\
   \textsf{FIRST}(yBz) & = \set{y} \\
   \textsf{FIRST}(Bwz) & = \set{0,1,w}
\end{align*}</script>

<p>
Mostly we can just "read past" the ε to fill in the <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-133-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3667" style="width: 3.204em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.75em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1002.71em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3668"><span class="texatom" id="MathJax-Span-3669"><span class="mrow" id="MathJax-Span-3670"><span class="mtext" id="MathJax-Span-3671" style="font-family: MathJax_SansSerif;">FIRST</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-133">\textsf{FIRST}</script>
sets, but sometimes this isn't sufficient.
</p>

<p>
Example 2
</p>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-134-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3672" style="width: 7.679em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.609em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.645em, 1006.44em, 3.289em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3673"><span class="mtable" id="MathJax-Span-3674" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 6.28em; height: 0px;"><span style="position: absolute; clip: rect(2.494em, 1000.76em, 4.805em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-3675"><span class="mrow" id="MathJax-Span-3676"><span class="mi" id="MathJax-Span-3677" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-3692"><span class="mrow" id="MathJax-Span-3693"><span class="mi" id="MathJax-Span-3694" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.46em, 1005.52em, 5.054em, -1000em); top: -3.982em; left: 0.759em;"><span style="display: inline-block; position: relative; width: 5.521em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1005.52em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-3678"><span class="mrow" id="MathJax-Span-3679"><span class="mi" id="MathJax-Span-3680"></span><span class="mo" id="MathJax-Span-3681" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3682" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3683" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-3684" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3685" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mspace" id="MathJax-Span-3686" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3687"><span class="mrow" id="MathJax-Span-3688"><span class="mo" id="MathJax-Span-3689" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3690" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3691" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.37em, 4.354em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-3695"><span class="mrow" id="MathJax-Span-3696"><span class="mi" id="MathJax-Span-3697"></span><span class="mo" id="MathJax-Span-3698" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3699" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3700" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-3701" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3702" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mspace" id="MathJax-Span-3703" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3704"><span class="mrow" id="MathJax-Span-3705"><span class="mo" id="MathJax-Span-3706" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3707" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3708"><span class="mrow" id="MathJax-Span-3709"><span class="mo" id="MathJax-Span-3710" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.148em; border-left: 0px solid; width: 0px; height: 2.877em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mi>B</mi><mi>A</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>f</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mi>w</mi><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-134">\begin{align*}    A & ::= \, xBA \; | \; f \\
    B & ::= \, xwB \; | \; ε
\end{align*}</script>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-135-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow /&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3711" style="width: 11.414em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.811em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-2.056em, 1009.58em, 5.99em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3712"><span class="mtable" id="MathJax-Span-3713" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.49em; height: 0px;"><span style="position: absolute; clip: rect(4.521em, 1005.49em, 12.517em, -1000em); top: -8.744em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.589em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1004.16em, 4.355em, -1000em); top: -7.332em; right: 0em;"><span class="mtd" id="MathJax-Span-3714"><span class="mrow" id="MathJax-Span-3715"><span class="texatom" id="MathJax-Span-3716"><span class="mrow" id="MathJax-Span-3717"><span class="mtext" id="MathJax-Span-3718" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3719" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3720" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3721" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.17em, 4.355em, -1000em); top: -5.982em; right: 0em;"><span class="mtd" id="MathJax-Span-3733"><span class="mrow" id="MathJax-Span-3734"><span class="texatom" id="MathJax-Span-3735"><span class="mrow" id="MathJax-Span-3736"><span class="mtext" id="MathJax-Span-3737" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3738" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3739" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3740" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.49em, 4.355em, -1000em); top: -4.632em; right: 0em;"><span class="mtd" id="MathJax-Span-3749"><span class="mrow" id="MathJax-Span-3750"><span class="texatom" id="MathJax-Span-3751"><span class="mrow" id="MathJax-Span-3752"><span class="mtext" id="MathJax-Span-3753" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3754" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3755" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-3756" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3757" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3758" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.96em, 4.355em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-3767"><span class="mrow" id="MathJax-Span-3768"><span class="texatom" id="MathJax-Span-3769"><span class="mrow" id="MathJax-Span-3770"><span class="mtext" id="MathJax-Span-3771" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3772" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3773" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-3774" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.46em, 4.355em, -1000em); top: -1.932em; right: 0em;"><span class="mtd" id="MathJax-Span-3783"><span class="mrow" id="MathJax-Span-3784"><span class="texatom" id="MathJax-Span-3785"><span class="mrow" id="MathJax-Span-3786"><span class="mtext" id="MathJax-Span-3787" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3788" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3789" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-3790" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3791" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3792" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.88em, 4.355em, -1000em); top: -0.582em; right: 0em;"><span class="mtd" id="MathJax-Span-3801"><span class="mrow" id="MathJax-Span-3802"><span class="texatom" id="MathJax-Span-3803"><span class="mrow" id="MathJax-Span-3804"><span class="mtext" id="MathJax-Span-3805" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3806" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-3807"><span class="mrow" id="MathJax-Span-3808"><span class="mo" id="MathJax-Span-3809" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span><span class="mo" id="MathJax-Span-3810" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.744em;"></span></span><span style="position: absolute; clip: rect(4.521em, 1003.84em, 12.517em, -1000em); top: -8.744em; left: 5.589em;"><span style="display: inline-block; position: relative; width: 3.901em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1003.84em, 4.355em, -1000em); top: -7.332em; left: 0em;"><span class="mtd" id="MathJax-Span-3722"><span class="mrow" id="MathJax-Span-3723"><span class="mi" id="MathJax-Span-3724"></span><span class="mo" id="MathJax-Span-3725" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3726" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3727" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3728"><span class="mi" id="MathJax-Span-3729" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3730" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3731" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span class="mo" id="MathJax-Span-3732" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.84em, 4.355em, -1000em); top: -5.982em; left: 0em;"><span class="mtd" id="MathJax-Span-3741"><span class="mrow" id="MathJax-Span-3742"><span class="mi" id="MathJax-Span-3743"></span><span class="mo" id="MathJax-Span-3744" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3745" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3746" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3747" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3748" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.84em, 4.355em, -1000em); top: -4.632em; left: 0em;"><span class="mtd" id="MathJax-Span-3759"><span class="mrow" id="MathJax-Span-3760"><span class="mi" id="MathJax-Span-3761"></span><span class="mo" id="MathJax-Span-3762" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3763" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3764" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3765" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3766" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.82em, 4.355em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-3775"><span class="mrow" id="MathJax-Span-3776"><span class="mi" id="MathJax-Span-3777"></span><span class="mo" id="MathJax-Span-3778" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3779" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3780" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3781" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-3782" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.84em, 4.355em, -1000em); top: -1.932em; left: 0em;"><span class="mtd" id="MathJax-Span-3793"><span class="mrow" id="MathJax-Span-3794"><span class="mi" id="MathJax-Span-3795"></span><span class="mo" id="MathJax-Span-3796" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3797" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3798" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3799" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3800" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1002.27em, 4.355em, -1000em); top: -0.582em; left: 0em;"><span class="mtd" id="MathJax-Span-3811"><span class="mrow" id="MathJax-Span-3812"><span class="mi" id="MathJax-Span-3813"></span><span class="mo" id="MathJax-Span-3814" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3815" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3816" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3817"></span><span class="mo" id="MathJax-Span-3818" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 8.744em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -4.282em; border-left: 0px solid; width: 0px; height: 9.143em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>f</mi></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>x</mi><mi>B</mi><mi>A</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>f</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>x</mi><mi>w</mi><mi>B</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow></mrow><mo>}</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-135">\begin{align*}
   \textsf{FIRST}(A)   & = \set{x,f} \\
   \textsf{FIRST}(B)   & = \set{x} \\
   \textsf{FIRST}(xBA) & = \set{x} \\
   \textsf{FIRST}(f)   & = \set{f} \\
   \textsf{FIRST}(xwB) & = \set{x} \\
   \textsf{FIRST}(ε)   & = \set{}
\end{align*}</script>

<p>
At a glance, this looks predictive: for both A and B productions, the
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-136-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3819" style="width: 3.204em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.75em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1002.71em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3820"><span class="texatom" id="MathJax-Span-3821"><span class="mrow" id="MathJax-Span-3822"><span class="mtext" id="MathJax-Span-3823" style="font-family: MathJax_SansSerif;">FIRST</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-136">\textsf{FIRST}</script> sets of the alternative productions are
disjoint. But, consider parsing the input <code>xxf</code>, which is in the
language:
</p>

<ol class="org-ol">
<li>A expands to <code>xBA</code></li>
<li>consume <code>x</code> from input</li>
<li>B expands to <code>xwB</code></li>
<li>consume <code>x</code> from input</li>
<li><b>ERROR:</b> terminal <code>w</code> doesn't match token <code>f</code></li>
</ol>

<p>
The correct way to parse this would be to expand B to ε, then A to
xBA, then B to ε, then A to f. But we cannot figure this out just by
looking at the next token in the input. The problem is that the ε
allows us to "throw away" the nonterminal at any time, and we do not
know when we should do that or not.
</p>

<p>
Enter <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-137-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3824" style="width: 4.723em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.064em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.379em, 1004.05em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3825"><span class="texatom" id="MathJax-Span-3826"><span class="mrow" id="MathJax-Span-3827"><span class="mtext" id="MathJax-Span-3828" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.95em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-137">\textsf{FOLLOW}</script> sets. For any nonterminal <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-138-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3829" style="width: 0.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.739em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1000.72em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3830"><span class="mi" id="MathJax-Span-3831" style="font-family: MathJax_Math; font-style: italic;">A</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.926em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi></math></span></span><script type="math/tex" id="MathJax-Element-138">A</script>,
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-139-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3832" style="width: 6.488em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.583em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1005.49em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3833"><span class="texatom" id="MathJax-Span-3834"><span class="mrow" id="MathJax-Span-3835"><span class="mtext" id="MathJax-Span-3836" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span><span class="mo" id="MathJax-Span-3837" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3838" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3839" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-139">\textsf{FOLLOW}(A)</script> is the set of first terminals that can
<i>immediately follow any expansion of A</i>. There is also an algorithm
for computing this, but again for simple grammars we can do it by
hand.<label for="17" class="margin-toggle sidenote-number"></label><input type="checkbox" id="17" class="margin-toggle"><span class="sidenote">See the same resources as the FIRST sets for the algorithm,
if you are curious about it.</span> For the example above:
</p>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-140-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow /&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3840" style="width: 11.455em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.852em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.644em, 1009.62em, 3.29em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3841"><span class="mtable" id="MathJax-Span-3842" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.507em; height: 0px;"><span style="position: absolute; clip: rect(2.459em, 1005.51em, 5.055em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.606em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1005.5em, 4.355em, -1000em); top: -4.632em; right: 0em;"><span class="mtd" id="MathJax-Span-3843"><span class="mrow" id="MathJax-Span-3844"><span class="texatom" id="MathJax-Span-3845"><span class="mrow" id="MathJax-Span-3846"><span class="mtext" id="MathJax-Span-3847" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span><span class="mo" id="MathJax-Span-3848" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3849" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3850" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.51em, 4.355em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-3859"><span class="mrow" id="MathJax-Span-3860"><span class="texatom" id="MathJax-Span-3861"><span class="mrow" id="MathJax-Span-3862"><span class="mtext" id="MathJax-Span-3863" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span><span class="mo" id="MathJax-Span-3864" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3865" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3866" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.459em, 1003.84em, 5.055em, -1000em); top: -3.982em; left: 5.606em;"><span style="display: inline-block; position: relative; width: 3.901em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1002.27em, 4.355em, -1000em); top: -4.632em; left: 0em;"><span class="mtd" id="MathJax-Span-3851"><span class="mrow" id="MathJax-Span-3852"><span class="mi" id="MathJax-Span-3853"></span><span class="mo" id="MathJax-Span-3854" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3855" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3856" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3857"></span><span class="mo" id="MathJax-Span-3858" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.84em, 4.355em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-3867"><span class="mrow" id="MathJax-Span-3868"><span class="mi" id="MathJax-Span-3869"></span><span class="mo" id="MathJax-Span-3870" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3871" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3872" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3873"><span class="mi" id="MathJax-Span-3874" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3875" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3876" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span class="mo" id="MathJax-Span-3877" style="font-family: MathJax_Main;">}</span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.15em; border-left: 0px solid; width: 0px; height: 2.879em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow></mrow><mo>}</mo></mrow></mtd></mtr><mtr><mtd><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mtd><mtd><mi></mi><mo>=</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>f</mi></mrow><mo>}</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-140">\begin{align*}
\textsf{FOLLOW}(A) & = \set{} \\
\textsf{FOLLOW}(B) & = \set{x,f}
\end{align*}</script>

<p>
Now we revisit the criteria for being a predictable grammar. In
addition to the original requirement for <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-141-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3878" style="width: 5.626em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.844em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1004.85em, 2.589em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3879"><span class="mi" id="MathJax-Span-3880" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3881" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3882" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3883" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-3884"><span class="mo" id="MathJax-Span-3885" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mspace" id="MathJax-Span-3886" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3887"><span class="mrow" id="MathJax-Span-3888"><span class="mo" id="MathJax-Span-3889" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3890" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3891"><span class="mrow" id="MathJax-Span-3892"><span class="mo" id="MathJax-Span-3893" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.336em; border-left: 0px solid; width: 0px; height: 1.254em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>A</mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-141">A ::= \, α \; | \; β</script>, we
add the following:
</p>

<p>
If <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-142-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msup&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3894" style="width: 3.573em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.079em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.402em, 1003.04em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3895"><span class="texatom" id="MathJax-Span-3896"><span class="mrow" id="MathJax-Span-3897"><span class="mo" id="MathJax-Span-3898" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msubsup" id="MathJax-Span-3899" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 1.429em; height: 0px;"><span style="position: absolute; clip: rect(3.348em, 1000.94em, 4.116em, -1000em); top: -3.982em; left: 0em;"><span class="mo" id="MathJax-Span-3900" style="font-family: MathJax_Main;">→</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.345em; left: 1em;"><span class="mo" id="MathJax-Span-3901" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="texatom" id="MathJax-Span-3902" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-3903"><span class="mo" id="MathJax-Span-3904" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.923em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msup><mo stretchy="false">→</mo><mo>∗</mo></msup><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-142">α \to^* ε</script> then <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-143-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2229;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x2205;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3905" style="width: 14.616em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.603em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.322em, 1012.56em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3906"><span class="texatom" id="MathJax-Span-3907"><span class="mrow" id="MathJax-Span-3908"><span class="mtext" id="MathJax-Span-3909" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3910" style="font-family: MathJax_Main;">(</span><span class="texatom" id="MathJax-Span-3911"><span class="mrow" id="MathJax-Span-3912"><span class="mo" id="MathJax-Span-3913" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span class="mo" id="MathJax-Span-3914" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3915" style="font-family: MathJax_Main; padding-left: 0.222em;">∩</span><span class="texatom" id="MathJax-Span-3916" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-3917"><span class="mtext" id="MathJax-Span-3918" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span><span class="mo" id="MathJax-Span-3919" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3920" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-3921" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3922" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-3923" style="font-family: MathJax_Main; padding-left: 0.278em;">∅</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.281em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mo stretchy="false">)</mo><mo>∩</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="normal">∅</mi></math></span></span><script type="math/tex" id="MathJax-Element-143">\textsf{FIRST}(β) \cap \textsf{FOLLOW}(A) = \emptyset </script>
</p>

<p>
In other words, we can tell by looking at the next token whether we
should expand A to something or use the ε to throw A away.
</p>

<p>
Consider our previous example and note that <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-144-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2229;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2229;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2260;&lt;/mo&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x2205;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3924" style="width: 27.383em; display: inline-block;"><span style="display: inline-block; position: relative; width: 23.604em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.322em, 1023.56em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3925"><span class="texatom" id="MathJax-Span-3926"><span class="mrow" id="MathJax-Span-3927"><span class="mtext" id="MathJax-Span-3928" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-3929" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3930" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-3931" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-3932" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3933" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3934" style="font-family: MathJax_Main; padding-left: 0.222em;">∩</span><span class="texatom" id="MathJax-Span-3935" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-3936"><span class="mtext" id="MathJax-Span-3937" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span><span class="mo" id="MathJax-Span-3938" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-3939" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-3940" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-3941" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3942" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3943" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3944" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3945" style="font-family: MathJax_Main;">}</span></span><span class="mo" id="MathJax-Span-3946" style="font-family: MathJax_Main; padding-left: 0.222em;">∩</span><span class="mrow" id="MathJax-Span-3947" style="padding-left: 0.222em;"><span class="mo" id="MathJax-Span-3948" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-3949"><span class="mi" id="MathJax-Span-3950" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3951" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-3952" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span></span><span class="mo" id="MathJax-Span-3953" style="font-family: MathJax_Main;">}</span></span><span class="mo" id="MathJax-Span-3954" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mrow" id="MathJax-Span-3955" style="padding-left: 0.278em;"><span class="mo" id="MathJax-Span-3956" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-3957" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3958" style="font-family: MathJax_Main;">}</span></span><span class="mo" id="MathJax-Span-3959" style="font-family: MathJax_Main; padding-left: 0.278em;">≠</span><span class="mi" id="MathJax-Span-3960" style="font-family: MathJax_Main; padding-left: 0.278em;">∅</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.281em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>x</mi><mi>w</mi><mi>B</mi><mo stretchy="false">)</mo><mo>∩</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow><mo>∩</mo><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>f</mi></mrow><mo>}</mo></mrow><mo>=</mo><mrow><mo>{</mo><mi>x</mi><mo>}</mo></mrow><mo>≠</mo><mi mathvariant="normal">∅</mi></math></span></span><script type="math/tex" id="MathJax-Element-144"> \textsf{FIRST}(xwB)
\cap \textsf{FOLLOW}(B) = \set{x} \cap \set{x,f} = \set{x} \ne
\emptyset </script>. Thus, this grammar is <i>not</i> predictive.
</p>
</section>
</li>

<li><a id="orge236d9e"></a>Exercise<br>
<section class="outline-text-6" id="text-2-4-3-0-3">
<p>
compute the <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-145-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3961" style="width: 3.204em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.75em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.378em, 1002.71em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3962"><span class="texatom" id="MathJax-Span-3963"><span class="mrow" id="MathJax-Span-3964"><span class="mtext" id="MathJax-Span-3965" style="font-family: MathJax_SansSerif;">FIRST</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-145">\textsf{FIRST}</script> and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-146-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3966" style="width: 4.723em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.064em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.379em, 1004.05em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3967"><span class="texatom" id="MathJax-Span-3968"><span class="mrow" id="MathJax-Span-3969"><span class="mtext" id="MathJax-Span-3970" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.95em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-146">\textsf{FOLLOW}</script> sets of the
following grammar and confirm that it is <i>not</i> predictive:
</p>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-147-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-3971" style="width: 11.455em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.852em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.704em, 1009.64em, 4.638em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-3972"><span class="mtable" id="MathJax-Span-3973" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.51em; height: 0px;"><span style="position: absolute; clip: rect(2.91em, 1000.8em, 7.919em, -1000em); top: -5.747em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.828em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.98em; right: 0em;"><span class="mtd" id="MathJax-Span-3974"><span class="mrow" id="MathJax-Span-3975"><span class="mi" id="MathJax-Span-3976" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-4000"><span class="mrow" id="MathJax-Span-4001"><span class="mi" id="MathJax-Span-4002" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-4018"><span class="mrow" id="MathJax-Span-4019"><span class="mi" id="MathJax-Span-4020" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.8em, 4.105em, -1000em); top: -1.933em; right: 0em;"><span class="mtd" id="MathJax-Span-4035"><span class="mrow" id="MathJax-Span-4036"><span class="mi" id="MathJax-Span-4037" style="font-family: MathJax_Math; font-style: italic;">D</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.747em;"></span></span><span style="position: absolute; clip: rect(3.163em, 1008.63em, 8.456em, -1000em); top: -6.034em; left: 0.828em;"><span style="display: inline-block; position: relative; width: 8.682em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1008.63em, 4.354em, -1000em); top: -5.98em; left: 0em;"><span class="mtd" id="MathJax-Span-3977"><span class="mrow" id="MathJax-Span-3978"><span class="mi" id="MathJax-Span-3979"></span><span class="mo" id="MathJax-Span-3980" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-3981" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3982" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-3983" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3984" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mspace" id="MathJax-Span-3985" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3986"><span class="mrow" id="MathJax-Span-3987"><span class="mo" id="MathJax-Span-3988" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3989" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3990" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-3991" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mspace" id="MathJax-Span-3992" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-3993"><span class="mrow" id="MathJax-Span-3994"><span class="mo" id="MathJax-Span-3995" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-3996" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-3997" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-3998" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-3999" style="font-family: MathJax_Math; font-style: italic;">x</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.79em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-4003"><span class="mrow" id="MathJax-Span-4004"><span class="mi" id="MathJax-Span-4005"></span><span class="mo" id="MathJax-Span-4006" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4007" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4008" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">w</span><span class="mi" id="MathJax-Span-4009" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mspace" id="MathJax-Span-4010" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4011"><span class="mrow" id="MathJax-Span-4012"><span class="mo" id="MathJax-Span-4013" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4014" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4015"><span class="mrow" id="MathJax-Span-4016"><span class="mo" id="MathJax-Span-4017" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1005.95em, 4.354em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-4021"><span class="mrow" id="MathJax-Span-4022"><span class="mi" id="MathJax-Span-4023"></span><span class="mo" id="MathJax-Span-4024" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4025" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4026" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">w</span><span class="mi" id="MathJax-Span-4027" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-4028" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4029"><span class="mrow" id="MathJax-Span-4030"><span class="mo" id="MathJax-Span-4031" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4032" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4033" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mi" id="MathJax-Span-4034" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.64em, 4.354em, -1000em); top: -1.933em; left: 0em;"><span class="mtd" id="MathJax-Span-4038"><span class="mrow" id="MathJax-Span-4039"><span class="mi" id="MathJax-Span-4040"></span><span class="mo" id="MathJax-Span-4041" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4042" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4043" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-4044" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mspace" id="MathJax-Span-4045" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4046"><span class="mrow" id="MathJax-Span-4047"><span class="mo" id="MathJax-Span-4048" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4049" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4050"><span class="mrow" id="MathJax-Span-4051"><span class="mo" id="MathJax-Span-4052" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.034em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.713em; border-left: 0px solid; width: 0px; height: 6.007em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mi>B</mi><mi>y</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>B</mi><mi>x</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>z</mi><mi>C</mi><mi>x</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>w</mi><mi>B</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>w</mi><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>D</mi><mi>B</mi></mtd></mtr><mtr><mtd><mi>D</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>y</mi><mi>D</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-147">\begin{align*}
    A & ::= \, xBy \; | \; Bx \; | \; zCx \\
    B & ::= \, wB \; | \; ε \\
    C & ::= \, wC \; | \; DB \\
    D & ::= \, yD \; | \; ε
\end{align*}</script>
</section>

<ol class="org-ol">
<li><a id="org15e2525"></a>Solution<br>
<section class="outline-text-7" id="text-2-4-3-0-3-1">
<table>


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Nonterminal</th>
<th scope="col" class="org-left">FIRST</th>
<th scope="col" class="org-left">FOLLOW</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">A</td>
<td class="org-left">w,x,z</td>
<td class="org-left">∅</td>
</tr>

<tr>
<td class="org-left">B</td>
<td class="org-left">w</td>
<td class="org-left">x,y</td>
</tr>

<tr>
<td class="org-left">C</td>
<td class="org-left">w,y</td>
<td class="org-left">x</td>
</tr>

<tr>
<td class="org-left">D</td>
<td class="org-left">y</td>
<td class="org-left">w</td>
</tr>
</tbody>
</table>

<ul class="org-ul">
<li>for A, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-148-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4053" style="width: 6.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.337em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1005.24em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4054"><span class="texatom" id="MathJax-Span-4055"><span class="mrow" id="MathJax-Span-4056"><span class="mtext" id="MathJax-Span-4057" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-4058" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-4059" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4060" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-4061" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-4062" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>x</mi><mi>B</mi><mi>y</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-148">\textsf{FIRST}(xBy)</script> and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-149-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4063" style="width: 5.626em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.844em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1004.75em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4064"><span class="texatom" id="MathJax-Span-4065"><span class="mrow" id="MathJax-Span-4066"><span class="mtext" id="MathJax-Span-4067" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-4068" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-4069" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-4070" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-4071" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>B</mi><mi>x</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-149">\textsf{FIRST}(Bx)</script> are not
disjoint (both have <code>x</code>)</li>
<li>for C, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-150-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4072" style="width: 5.79em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.967em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1004.87em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4073"><span class="texatom" id="MathJax-Span-4074"><span class="mrow" id="MathJax-Span-4075"><span class="mtext" id="MathJax-Span-4076" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-4077" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-4078" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mi" id="MathJax-Span-4079" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mo" id="MathJax-Span-4080" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>w</mi><mi>C</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-150">\textsf{FIRST}(wC)</script> and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-151-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FIRST&lt;/mtext&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4081" style="width: 5.913em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.09em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1005em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4082"><span class="texatom" id="MathJax-Span-4083"><span class="mrow" id="MathJax-Span-4084"><span class="mtext" id="MathJax-Span-4085" style="font-family: MathJax_SansSerif;">FIRST</span></span></span><span class="mo" id="MathJax-Span-4086" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-4087" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mi" id="MathJax-Span-4088" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mo" id="MathJax-Span-4089" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FIRST</mtext></mrow><mo stretchy="false">(</mo><mi>D</mi><mi>B</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-151">\textsf{FIRST}(DB)</script> are not
disjoint (both have <code>w</code>)</li>
</ul>
</section>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-org988c754" class="outline-4">
<h4 id="org988c754"><span class="section-number-4">2.4.4</span> Left factoring</h4>
<section class="outline-text-4" id="text-2-4-4">
<p>
If a grammar is not predictive, sometimes we can transform it to make
it predictive. One heuristic we can use is a transformation called
<i>left factoring</i>.
</p>

<p>
Suppose we add arrays and functions to expressions (here
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-152-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;F&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;a&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;c&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;t&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;r&lt;/mi&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4090" style="width: 3.327em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.874em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.414em, 1002.94em, 2.351em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4091"><span class="texatom" id="MathJax-Span-4092"><span class="mrow" id="MathJax-Span-4093"><span class="mi" id="MathJax-Span-4094" style="font-family: MathJax_Main; font-style: italic;">F</span><span class="mi" id="MathJax-Span-4095" style="font-family: MathJax_Main; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4096" style="font-family: MathJax_Main; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4097" style="font-family: MathJax_Main; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4098" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4099" style="font-family: MathJax_Main; font-style: italic;">r</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.06em; border-left: 0px solid; width: 0px; height: 0.897em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">F</mi><mi class="MJX-tex-mathit" mathvariant="italic">a</mi><mi class="MJX-tex-mathit" mathvariant="italic">c</mi><mi class="MJX-tex-mathit" mathvariant="italic">t</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">r</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-152">\mathit{Factor}</script> is the nonterminal for arguments of multiplication
after establishing precedence in our grammar):
</p>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-153-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4100" style="width: 22.704em; display: inline-block;"><span style="display: inline-block; position: relative; width: 19.54em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.619em, 1019.28em, 3.363em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4101"><span class="mtable" id="MathJax-Span-4102" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 19.224em; height: 0px;"><span style="position: absolute; clip: rect(2.521em, 1003.66em, 5.09em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 3.695em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1002.99em, 4.206em, -1000em); top: -4.672em; right: 0em;"><span class="mtd" id="MathJax-Span-4103"><span class="mrow" id="MathJax-Span-4104"><span class="mi" id="MathJax-Span-4105" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mi" id="MathJax-Span-4106" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4107" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4108" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4109" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4110" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.168em, 1003.66em, 4.389em, -1000em); top: -3.322em; right: 0em;"><span class="mtd" id="MathJax-Span-4150"><span class="mrow" id="MathJax-Span-4151"><span class="mi" id="MathJax-Span-4152" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4153" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4154" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4155" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4156" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4157" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4158" style="font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(2.451em, 1015.43em, 5.145em, -1000em); top: -4.023em; left: 3.695em;"><span style="display: inline-block; position: relative; width: 15.529em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1015.43em, 4.445em, -1000em); top: -4.672em; left: 0em;"><span class="mtd" id="MathJax-Span-4111"><span class="mrow" id="MathJax-Span-4112"><span class="mi" id="MathJax-Span-4113"></span><span class="mo" id="MathJax-Span-4114" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4115" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4116" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mi" id="MathJax-Span-4117" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-4118" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4119"><span class="mrow" id="MathJax-Span-4120"><span class="mo" id="MathJax-Span-4121" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4122" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4123" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mi" id="MathJax-Span-4124" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-4125" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-4126" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4127" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4128" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4129" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4130" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4131" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4132" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-4133" style="font-family: MathJax_Main;">]</span><span class="mspace" id="MathJax-Span-4134" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4135"><span class="mrow" id="MathJax-Span-4136"><span class="mo" id="MathJax-Span-4137" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4138" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4139" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mi" id="MathJax-Span-4140" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-4141" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-4142" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4143" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4144" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4145" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4146" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4147" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4148" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-4149" style="font-family: MathJax_Main;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1010.7em, 4.444em, -1000em); top: -3.322em; left: 0em;"><span class="mtd" id="MathJax-Span-4159"><span class="mrow" id="MathJax-Span-4160"><span class="mi" id="MathJax-Span-4161"></span><span class="mo" id="MathJax-Span-4162" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4163" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4164" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4165" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4166" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mo" id="MathJax-Span-4167" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-4168" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4169" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4170" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4171" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4172" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4173" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4174" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mspace" id="MathJax-Span-4175" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4176"><span class="mrow" id="MathJax-Span-4177"><span class="mo" id="MathJax-Span-4178" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4179" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4180" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4181" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4182" style="font-family: MathJax_Math; font-style: italic;">p</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.168em; border-left: 0px solid; width: 0px; height: 2.916em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>F</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>I</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>I</mi><mi>d</mi><mo stretchy="false">[</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">]</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>I</mi><mi>d</mi><mo stretchy="false">(</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">)</mo></mtd></mtr><mtr><mtd><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>E</mi><mi>x</mi><mi>p</mi><mo>,</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>E</mi><mi>x</mi><mi>p</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-153">\begin{align*}
    Factor  & ::= \, Id \; | \; Id [ ExpList ] \; | \; Id ( ExpList ) \\
    ExpList & ::= \, Exp, ExpList \; | \; Exp
\end{align*}</script>

<p>
This is not predictive, but we can make it predictive:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-154-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4183" style="width: 19.658em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.954em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.033em, 1016.75em, 4.016em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4184"><span class="mtable" id="MathJax-Span-4185" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 16.609em; height: 0px;"><span style="position: absolute; clip: rect(2.386em, 1003.66em, 6.26em, -1000em); top: -4.54em; left: 0em;"><span style="display: inline-block; position: relative; width: 3.695em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1002.99em, 4.206em, -1000em); top: -5.325em; right: 0em;"><span class="mtd" id="MathJax-Span-4186"><span class="mrow" id="MathJax-Span-4187"><span class="mi" id="MathJax-Span-4188" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mi" id="MathJax-Span-4189" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4190" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4191" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4192" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4193" style="font-family: MathJax_Math; font-style: italic;">r</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.135em, 1002.1em, 4.4em, -1000em); top: -4.02em; right: 0em;"><span class="mtd" id="MathJax-Span-4205"><span class="mrow" id="MathJax-Span-4206"><span class="mi" id="MathJax-Span-4207" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mi" id="MathJax-Span-4208" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4209" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4210" style="font-family: MathJax_Math; font-style: italic;">s</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.168em, 1003.66em, 4.389em, -1000em); top: -2.67em; right: 0em;"><span class="mtd" id="MathJax-Span-4247"><span class="mrow" id="MathJax-Span-4248"><span class="mi" id="MathJax-Span-4249" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4250" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4251" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4252" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4253" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4254" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4255" style="font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.54em;"></span></span><span style="position: absolute; clip: rect(2.407em, 1012.88em, 6.372em, -1000em); top: -4.598em; left: 3.695em;"><span style="display: inline-block; position: relative; width: 12.914em; height: 0px;"><span style="position: absolute; clip: rect(3.135em, 1005.18em, 4.4em, -1000em); top: -5.325em; left: 0em;"><span class="mtd" id="MathJax-Span-4194"><span class="mrow" id="MathJax-Span-4195"><span class="mi" id="MathJax-Span-4196"></span><span class="mo" id="MathJax-Span-4197" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4198" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4199" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mi" id="MathJax-Span-4200" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4201" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mi" id="MathJax-Span-4202" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4203" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4204" style="font-family: MathJax_Math; font-style: italic;">s</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1012.88em, 4.445em, -1000em); top: -4.02em; left: 0em;"><span class="mtd" id="MathJax-Span-4211"><span class="mrow" id="MathJax-Span-4212"><span class="mi" id="MathJax-Span-4213"></span><span class="mo" id="MathJax-Span-4214" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4215" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4216" style="font-family: MathJax_Main; padding-left: 0.278em;">[</span><span class="mi" id="MathJax-Span-4217" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4218" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4219" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4220" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4221" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4222" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4223" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-4224" style="font-family: MathJax_Main;">]</span><span class="mspace" id="MathJax-Span-4225" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4226"><span class="mrow" id="MathJax-Span-4227"><span class="mo" id="MathJax-Span-4228" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4229" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4230" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-4231" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4232" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4233" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4234" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4235" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4236" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4237" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mo" id="MathJax-Span-4238" style="font-family: MathJax_Main;">)</span><span class="mspace" id="MathJax-Span-4239" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4240"><span class="mrow" id="MathJax-Span-4241"><span class="mo" id="MathJax-Span-4242" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4243" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4244"><span class="mrow" id="MathJax-Span-4245"><span class="mo" id="MathJax-Span-4246" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1010.7em, 4.444em, -1000em); top: -2.67em; left: 0em;"><span class="mtd" id="MathJax-Span-4256"><span class="mrow" id="MathJax-Span-4257"><span class="mi" id="MathJax-Span-4258"></span><span class="mo" id="MathJax-Span-4259" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4260" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4261" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4262" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4263" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mo" id="MathJax-Span-4264" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-4265" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4266" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4267" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4268" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="mi" id="MathJax-Span-4269" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4270" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4271" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mspace" id="MathJax-Span-4272" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4273"><span class="mrow" id="MathJax-Span-4274"><span class="mo" id="MathJax-Span-4275" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4276" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4277" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mi" id="MathJax-Span-4278" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4279" style="font-family: MathJax_Math; font-style: italic;">p</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.598em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.925em; border-left: 0px solid; width: 0px; height: 4.43em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>F</mi><mi>a</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>I</mi><mi>d</mi><mi>A</mi><mi>r</mi><mi>g</mi><mi>s</mi></mtd></mtr><mtr><mtd><mi>A</mi><mi>r</mi><mi>g</mi><mi>s</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mo stretchy="false">[</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">]</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo stretchy="false">(</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">)</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr><mtr><mtd><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>E</mi><mi>x</mi><mi>p</mi><mo>,</mo><mi>E</mi><mi>x</mi><mi>p</mi><mi>L</mi><mi>i</mi><mi>s</mi><mi>t</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>E</mi><mi>x</mi><mi>p</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-154">\begin{align*}
    Factor  & ::= \, Id Args \\
    Args    & ::= \, [ ExpList ] \; | \; ( ExpList ) \; | \; ε \\
    ExpList & ::= \, Exp, ExpList \; | \; Exp
\end{align*}</script>

<p>
this transformation is called <i>left-factoring</i>. We are "factoring out"
the leftmost common parts of the rules for a nonterminal, so all the
choices are moved to the immediate beginning of a new nonterminal. In
general, suppose we have:
</p>


<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-155-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4280" style="width: 11.267em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.713em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.294em, 1009.55em, 2.688em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4281"><span class="mtable" id="MathJax-Span-4282" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 9.377em; height: 0px;"><span style="position: absolute; clip: rect(3.16em, 1000.73em, 4.221em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.75em; height: 0px;"><span style="position: absolute; clip: rect(3.135em, 1000.73em, 4.195em, -1000em); top: -3.997em; right: 0em;"><span class="mtd" id="MathJax-Span-4283"><span class="mrow" id="MathJax-Span-4284"><span class="mi" id="MathJax-Span-4285" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.126em, 1008.63em, 4.47em, -1000em); top: -4.023em; left: 0.75em;"><span style="display: inline-block; position: relative; width: 8.627em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1008.63em, 4.444em, -1000em); top: -3.997em; left: 0em;"><span class="mtd" id="MathJax-Span-4286"><span class="mrow" id="MathJax-Span-4287"><span class="mi" id="MathJax-Span-4288"></span><span class="mo" id="MathJax-Span-4289" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4290" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4291" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-4292"><span class="mo" id="MathJax-Span-4293" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msubsup" id="MathJax-Span-4294"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.57em, 4.389em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-4295"><span class="mrow" id="MathJax-Span-4296"><span class="mo" id="MathJax-Span-4297" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.794em; left: 0.566em;"><span class="mn" id="MathJax-Span-4298" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4299" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4300"><span class="mrow" id="MathJax-Span-4301"><span class="mo" id="MathJax-Span-4302" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4303" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4304"><span class="mrow" id="MathJax-Span-4305"><span class="mo" id="MathJax-Span-4306" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msubsup" id="MathJax-Span-4307"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.57em, 4.389em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-4308"><span class="mrow" id="MathJax-Span-4309"><span class="mo" id="MathJax-Span-4310" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.794em; left: 0.566em;"><span class="mn" id="MathJax-Span-4311" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4312" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4313"><span class="mrow" id="MathJax-Span-4314"><span class="mo" id="MathJax-Span-4315" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4316" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4317"><span class="mrow" id="MathJax-Span-4318"><span class="mo" id="MathJax-Span-4319" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="msubsup" id="MathJax-Span-4320"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.57em, 4.389em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-4321"><span class="mrow" id="MathJax-Span-4322"><span class="mo" id="MathJax-Span-4323" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.794em; left: 0.566em;"><span class="mn" id="MathJax-Span-4324" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.385em; border-left: 0px solid; width: 0px; height: 1.35em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msub><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mn>1</mn></msub><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msub><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mn>2</mn></msub><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><msub><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mn>3</mn></msub></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-155">\begin{align*}
    A & ::= \, αβ_1 \; | \; αβ_2 \; | \; αβ_3
\end{align*}</script>

<p>
We are going to factor out the common prefix α, and create a new
nonterminal <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-156-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;Z&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4325" style="width: 0.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.739em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1000.74em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4326"><span class="mi" id="MathJax-Span-4327" style="font-family: MathJax_Math; font-style: italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.888em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>Z</mi></math></span></span><script type="math/tex" id="MathJax-Element-156">Z</script> for the suffixes:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-157-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B1;&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;Z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;Z&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B2;&lt;/mo&gt;&lt;/mrow&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/msub&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4328" style="width: 9.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.816em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.644em, 1007.65em, 3.338em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4329"><span class="mtable" id="MathJax-Span-4330" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.457em; height: 0px;"><span style="position: absolute; clip: rect(2.51em, 1000.73em, 4.871em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.75em; height: 0px;"><span style="position: absolute; clip: rect(3.135em, 1000.73em, 4.195em, -1000em); top: -4.647em; right: 0em;"><span class="mtd" id="MathJax-Span-4331"><span class="mrow" id="MathJax-Span-4332"><span class="mi" id="MathJax-Span-4333" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.168em, 1000.72em, 4.195em, -1000em); top: -3.347em; right: 0em;"><span class="mtd" id="MathJax-Span-4343"><span class="mrow" id="MathJax-Span-4344"><span class="mi" id="MathJax-Span-4345" style="font-family: MathJax_Math; font-style: italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(2.543em, 1006.71em, 5.12em, -1000em); top: -4.023em; left: 0.75em;"><span style="display: inline-block; position: relative; width: 6.707em; height: 0px;"><span style="position: absolute; clip: rect(3.168em, 1003.42em, 4.206em, -1000em); top: -4.647em; left: 0em;"><span class="mtd" id="MathJax-Span-4334"><span class="mrow" id="MathJax-Span-4335"><span class="mi" id="MathJax-Span-4336"></span><span class="mo" id="MathJax-Span-4337" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4338" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4339" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-4340"><span class="mo" id="MathJax-Span-4341" style="font-family: MathJax_Math; font-style: italic;">α</span></span></span><span class="mi" id="MathJax-Span-4342" style="font-family: MathJax_Math; font-style: italic;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1006.71em, 4.444em, -1000em); top: -3.347em; left: 0em;"><span class="mtd" id="MathJax-Span-4346"><span class="mrow" id="MathJax-Span-4347"><span class="mi" id="MathJax-Span-4348"></span><span class="mo" id="MathJax-Span-4349" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4350" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msubsup" id="MathJax-Span-4351" style="padding-left: 0.278em;"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.57em, 4.389em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-4352"><span class="mrow" id="MathJax-Span-4353"><span class="mo" id="MathJax-Span-4354" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.794em; left: 0.566em;"><span class="mn" id="MathJax-Span-4355" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4356" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4357"><span class="mrow" id="MathJax-Span-4358"><span class="mo" id="MathJax-Span-4359" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4360" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="msubsup" id="MathJax-Span-4361"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.57em, 4.389em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-4362"><span class="mrow" id="MathJax-Span-4363"><span class="mo" id="MathJax-Span-4364" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.794em; left: 0.566em;"><span class="mn" id="MathJax-Span-4365" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4366" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4367"><span class="mrow" id="MathJax-Span-4368"><span class="mo" id="MathJax-Span-4369" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4370" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="msubsup" id="MathJax-Span-4371"><span style="display: inline-block; position: relative; width: 0.995em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.57em, 4.389em, -1000em); top: -4.023em; left: 0em;"><span class="texatom" id="MathJax-Span-4372"><span class="mrow" id="MathJax-Span-4373"><span class="mo" id="MathJax-Span-4374" style="font-family: MathJax_Math; font-style: italic;">β</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -3.794em; left: 0.566em;"><span class="mn" id="MathJax-Span-4375" style="font-size: 70.7%; font-family: MathJax_Main;">3</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.139em; border-left: 0px solid; width: 0px; height: 2.858em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>α</mo></mrow><mi>Z</mi></mtd></mtr><mtr><mtd><mi>Z</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><msub><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mn>1</mn></msub><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><msub><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mn>2</mn></msub><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><msub><mrow class="MJX-TeXAtom-ORD"><mo>β</mo></mrow><mn>3</mn></msub></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-157">\begin{align*}
    A & ::= \, αZ \\
    Z & ::= \, β_1 \; | \; β_2 \; | \; β_3
\end{align*}</script>

<p>
The overall algorithm to apply left factoring is iteratively applying
the transformation above for all non-terminals until we reach a
fixpoint (there are no more common prefixes to factor out). Note that
not all grammars can be made predictive (otherwise LL(1) parsers could
parse any context-free language including ambiguous ones), and it is
undecidable to figure out whether one can be.
</p>
</section>

<ol class="org-ol">
<li><a id="orgf0224d2"></a>Note about ε elimination<br>
<section class="outline-text-6" id="text-2-4-4-0-1">
<p>
One might think that we could get rid of <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-158-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;sans-serif&quot;&gt;FOLLOW&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4376" style="width: 4.723em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.064em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.379em, 1004.05em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4377"><span class="texatom" id="MathJax-Span-4378"><span class="mrow" id="MathJax-Span-4379"><span class="mtext" id="MathJax-Span-4380" style="font-family: MathJax_SansSerif;">FOLLOW</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.95em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="sans-serif">FOLLOW</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-158">\textsf{FOLLOW}</script> sets by
eliminating ε from the grammar as we said was possible when we
discussed dealing with left recursion. The problem is that this
elimination can render the grammar non-predictive, and applying left
factoring to make it predictive again re-introduces the ε.
</p>

<p>
Example:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-159-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo&gt;&amp;#xD7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;#xF7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4381" style="width: 13.015em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.207em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.66em, 1011em, 3.273em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4382"><span class="mtable" id="MathJax-Span-4383" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 10.866em; height: 0px;"><span style="position: absolute; clip: rect(2.557em, 1001.06em, 4.789em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -4.606em; right: 0em;"><span class="mtd" id="MathJax-Span-4384"><span class="mrow" id="MathJax-Span-4385"><span class="mi" id="MathJax-Span-4386" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1001.06em, 4.105em, -1000em); top: -3.298em; right: 0em;"><span class="mtd" id="MathJax-Span-4396"><span class="mrow" id="MathJax-Span-4397"><span class="msup" id="MathJax-Span-4398"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4399" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4400" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.425em, 1009.77em, 5.038em, -1000em); top: -3.982em; left: 1.059em;"><span style="display: inline-block; position: relative; width: 9.807em; height: 0px;"><span style="position: absolute; clip: rect(3.05em, 1003.87em, 4.105em, -1000em); top: -4.606em; left: 0em;"><span class="mtd" id="MathJax-Span-4387"><span class="mrow" id="MathJax-Span-4388"><span class="mi" id="MathJax-Span-4389"></span><span class="mo" id="MathJax-Span-4390" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4391" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4392" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="msup" id="MathJax-Span-4393"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4394" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4395" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1009.77em, 4.354em, -1000em); top: -3.298em; left: 0em;"><span class="mtd" id="MathJax-Span-4401"><span class="mrow" id="MathJax-Span-4402"><span class="mi" id="MathJax-Span-4403"></span><span class="mo" id="MathJax-Span-4404" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4405" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4406" style="font-family: MathJax_Main; padding-left: 0.278em;">×</span><span class="mi" id="MathJax-Span-4407" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="msup" id="MathJax-Span-4408"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4409" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4410" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4411" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4412"><span class="mrow" id="MathJax-Span-4413"><span class="mo" id="MathJax-Span-4414" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4415" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4416" style="font-family: MathJax_Main; padding-left: 0.222em;">÷</span><span class="mi" id="MathJax-Span-4417" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="msup" id="MathJax-Span-4418"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4419" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4420" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4421" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4422"><span class="mrow" id="MathJax-Span-4423"><span class="mo" id="MathJax-Span-4424" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4425" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4426"><span class="mrow" id="MathJax-Span-4427"><span class="mo" id="MathJax-Span-4428" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.13em; border-left: 0px solid; width: 0px; height: 2.841em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>T</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>F</mi><msup><mi>T</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>T</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mo>×</mo><mi>F</mi><msup><mi>T</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>÷</mo><mi>F</mi><msup><mi>T</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-159">\begin{align*}
T  & ::= \, F T' \\
T' & ::= \, × F T' \; | \; ÷ F T' \; | \; ε
\end{align*}</script>

<p>
Remove ε:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-160-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo&gt;&amp;#xD7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;#xD7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;#xF7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;#xF7;&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4429" style="width: 18.023em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.517em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.636em, 1015.35em, 3.298em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4430"><span class="mtable" id="MathJax-Span-4431" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 15.176em; height: 0px;"><span style="position: absolute; clip: rect(2.533em, 1001.06em, 4.814em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-4432"><span class="mrow" id="MathJax-Span-4433"><span class="mi" id="MathJax-Span-4434" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1001.06em, 4.105em, -1000em); top: -3.273em; right: 0em;"><span class="mtd" id="MathJax-Span-4450"><span class="mrow" id="MathJax-Span-4451"><span class="msup" id="MathJax-Span-4452"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4453" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4454" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.401em, 1014.12em, 5.063em, -1000em); top: -3.982em; left: 1.059em;"><span style="display: inline-block; position: relative; width: 14.116em; height: 0px;"><span style="position: absolute; clip: rect(3.05em, 1005.45em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-4435"><span class="mrow" id="MathJax-Span-4436"><span class="mi" id="MathJax-Span-4437"></span><span class="mo" id="MathJax-Span-4438" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4439" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4440" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="msup" id="MathJax-Span-4441"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4442" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4443" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4444" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4445"><span class="mrow" id="MathJax-Span-4446"><span class="mo" id="MathJax-Span-4447" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4448" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4449" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.05em, 1014.12em, 4.354em, -1000em); top: -3.273em; left: 0em;"><span class="mtd" id="MathJax-Span-4455"><span class="mrow" id="MathJax-Span-4456"><span class="mi" id="MathJax-Span-4457"></span><span class="mo" id="MathJax-Span-4458" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4459" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4460" style="font-family: MathJax_Main; padding-left: 0.278em;">×</span><span class="mi" id="MathJax-Span-4461" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="msup" id="MathJax-Span-4462"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4463" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4464" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4465" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4466"><span class="mrow" id="MathJax-Span-4467"><span class="mo" id="MathJax-Span-4468" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4469" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4470" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mi" id="MathJax-Span-4471" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mspace" id="MathJax-Span-4472" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4473"><span class="mrow" id="MathJax-Span-4474"><span class="mo" id="MathJax-Span-4475" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4476" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4477" style="font-family: MathJax_Main; padding-left: 0.222em;">÷</span><span class="mi" id="MathJax-Span-4478" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="msup" id="MathJax-Span-4479"><span style="display: inline-block; position: relative; width: 1.059em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-4480" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -4.395em; left: 0.79em;"><span class="mo" id="MathJax-Span-4481" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4482" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4483"><span class="mrow" id="MathJax-Span-4484"><span class="mo" id="MathJax-Span-4485" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4486" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4487" style="font-family: MathJax_Main; padding-left: 0.222em;">÷</span><span class="mi" id="MathJax-Span-4488" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.159em; border-left: 0px solid; width: 0px; height: 2.898em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>T</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>F</mi><msup><mi>T</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>F</mi></mtd></mtr><mtr><mtd><msup><mi>T</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mo>×</mo><mi>F</mi><msup><mi>T</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>×</mo><mi>F</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>÷</mo><mi>F</mi><msup><mi>T</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>÷</mo><mi>F</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-160">\begin{align*}
T  & ::= \, F T' \; | \; F \\
T' & ::= \, × F T' \; | \; × F \; | \; ÷ F T' \; | \; ÷ F
\end{align*}</script>

<p>
Note that the grammar is no longer predictive ( <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-161-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4489" style="width: 0.864em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.739em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.414em, 1000.74em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4490"><span class="mi" id="MathJax-Span-4491" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.884em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>F</mi></math></span></span><script type="math/tex" id="MathJax-Element-161">F</script> is a common
prefix of the rules for producing <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-162-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4492" style="width: 0.823em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.698em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.417em, 1000.7em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4493"><span class="mi" id="MathJax-Span-4494" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.881em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>T</mi></math></span></span><script type="math/tex" id="MathJax-Element-162">T</script>) and we need to use left
factoring, which reintroduces ε.
</p>
</section>
</li>

<li><a id="org160c8fa"></a>Exercise<br>
<section class="outline-text-6" id="text-2-4-4-0-2">
<p>
Left-factor the following grammar:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-163-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4495" style="width: 14.247em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.274em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(0.645em, 1012.11em, 3.289em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4496"><span class="mtable" id="MathJax-Span-4497" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 11.953em; height: 0px;"><span style="position: absolute; clip: rect(2.494em, 1000.76em, 4.805em, -1000em); top: -3.982em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.759em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-4498"><span class="mrow" id="MathJax-Span-4499"><span class="mi" id="MathJax-Span-4500" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-4532"><span class="mrow" id="MathJax-Span-4533"><span class="mi" id="MathJax-Span-4534" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(2.46em, 1011.19em, 5.054em, -1000em); top: -3.982em; left: 0.759em;"><span style="display: inline-block; position: relative; width: 11.194em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1011.19em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-4501"><span class="mrow" id="MathJax-Span-4502"><span class="mi" id="MathJax-Span-4503"></span><span class="mo" id="MathJax-Span-4504" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4505" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4506" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mi" id="MathJax-Span-4507" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4508" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mspace" id="MathJax-Span-4509" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4510"><span class="mrow" id="MathJax-Span-4511"><span class="mo" id="MathJax-Span-4512" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4513" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4514" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-4515" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4516" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-4517" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4518"><span class="mrow" id="MathJax-Span-4519"><span class="mo" id="MathJax-Span-4520" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4521" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4522" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-4523" style="font-family: MathJax_Math; font-style: italic;">w</span><span class="mspace" id="MathJax-Span-4524" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4525"><span class="mrow" id="MathJax-Span-4526"><span class="mo" id="MathJax-Span-4527" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4528" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4529" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4530" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-4531" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.85em, 4.354em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-4535"><span class="mrow" id="MathJax-Span-4536"><span class="mi" id="MathJax-Span-4537"></span><span class="mo" id="MathJax-Span-4538" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4539" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4540" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">p</span><span class="mspace" id="MathJax-Span-4541" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4542"><span class="mrow" id="MathJax-Span-4543"><span class="mo" id="MathJax-Span-4544" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4545" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4546" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.148em; border-left: 0px solid; width: 0px; height: 2.877em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mi>x</mi><mi>y</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>B</mi><mi>x</mi><mi>z</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>B</mi><mi>w</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>x</mi><mi>y</mi><mi>z</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>p</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>q</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-163">\begin{align*}
    A & ::= \, Bxy \; | \; Bxz \; | \; Bw \; | \; xyz \\
    B & ::= \, p \; | \; q
\end{align*}</script>

<p>
Solution:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-164-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4547" style="width: 8.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.102em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-0.704em, 1006.94em, 4.638em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4548"><span class="mtable" id="MathJax-Span-4549" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 6.773em; height: 0px;"><span style="position: absolute; clip: rect(2.91em, 1000.8em, 7.919em, -1000em); top: -5.747em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.828em; height: 0px;"><span style="position: absolute; clip: rect(3.143em, 1000.73em, 4.105em, -1000em); top: -5.98em; right: 0em;"><span class="mtd" id="MathJax-Span-4550"><span class="mrow" id="MathJax-Span-4551"><span class="mi" id="MathJax-Span-4552" style="font-family: MathJax_Math; font-style: italic;">A</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.76em, 4.105em, -1000em); top: -4.631em; right: 0em;"><span class="mtd" id="MathJax-Span-4568"><span class="mrow" id="MathJax-Span-4569"><span class="mi" id="MathJax-Span-4570" style="font-family: MathJax_Math; font-style: italic;">B</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.154em, 1000.76em, 4.127em, -1000em); top: -3.282em; right: 0em;"><span class="mtd" id="MathJax-Span-4583"><span class="mrow" id="MathJax-Span-4584"><span class="mi" id="MathJax-Span-4585" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.176em, 1000.8em, 4.105em, -1000em); top: -1.933em; right: 0em;"><span class="mtd" id="MathJax-Span-4599"><span class="mrow" id="MathJax-Span-4600"><span class="mi" id="MathJax-Span-4601" style="font-family: MathJax_Math; font-style: italic;">D</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 5.747em;"></span></span><span style="position: absolute; clip: rect(3.163em, 1005.95em, 8.456em, -1000em); top: -6.034em; left: 0.828em;"><span style="display: inline-block; position: relative; width: 5.945em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1005.95em, 4.354em, -1000em); top: -5.98em; left: 0em;"><span class="mtd" id="MathJax-Span-4553"><span class="mrow" id="MathJax-Span-4554"><span class="mi" id="MathJax-Span-4555"></span><span class="mo" id="MathJax-Span-4556" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4557" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4558" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">B</span><span class="mi" id="MathJax-Span-4559" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mspace" id="MathJax-Span-4560" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4561"><span class="mrow" id="MathJax-Span-4562"><span class="mo" id="MathJax-Span-4563" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4564" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4565" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4566" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mi" id="MathJax-Span-4567" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.85em, 4.354em, -1000em); top: -4.631em; left: 0em;"><span class="mtd" id="MathJax-Span-4571"><span class="mrow" id="MathJax-Span-4572"><span class="mi" id="MathJax-Span-4573"></span><span class="mo" id="MathJax-Span-4574" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4575" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4576" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">p</span><span class="mspace" id="MathJax-Span-4577" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4578"><span class="mrow" id="MathJax-Span-4579"><span class="mo" id="MathJax-Span-4580" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4581" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4582" style="font-family: MathJax_Math; font-style: italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.014em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1004.98em, 4.354em, -1000em); top: -3.282em; left: 0em;"><span class="mtd" id="MathJax-Span-4586"><span class="mrow" id="MathJax-Span-4587"><span class="mi" id="MathJax-Span-4588"></span><span class="mo" id="MathJax-Span-4589" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4590" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4591" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span><span class="mi" id="MathJax-Span-4592" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mspace" id="MathJax-Span-4593" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4594"><span class="mrow" id="MathJax-Span-4595"><span class="mo" id="MathJax-Span-4596" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4597" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4598" style="font-family: MathJax_Math; font-style: italic;">w</span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; clip: rect(3.109em, 1003.85em, 4.354em, -1000em); top: -1.933em; left: 0em;"><span class="mtd" id="MathJax-Span-4602"><span class="mrow" id="MathJax-Span-4603"><span class="mi" id="MathJax-Span-4604"></span><span class="mo" id="MathJax-Span-4605" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4606" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4607" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mspace" id="MathJax-Span-4608" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4609"><span class="mrow" id="MathJax-Span-4610"><span class="mo" id="MathJax-Span-4611" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4612" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4613" style="font-family: MathJax_Math; font-style: italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.034em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.713em; border-left: 0px solid; width: 0px; height: 6.007em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>A</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>B</mi><mi>C</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>x</mi><mi>y</mi><mi>z</mi></mtd></mtr><mtr><mtd><mi>B</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>p</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>q</mi></mtd></mtr><mtr><mtd><mi>C</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>x</mi><mi>D</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>w</mi></mtd></mtr><mtr><mtd><mi>D</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>y</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>z</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-164">\begin{align*}
    A & ::= \, BC \; | \; xyz \\
    B & ::= \, p \; | \; q \\
    C & ::= \, xD \; | \; w \\
    D & ::= \, y \; | \; z
\end{align*}</script>
</section>
</li>
</ol>
</div>
</div>

<div id="outline-container-orgf2b0f3e" class="outline-3">
<h3 id="orgf2b0f3e"><span class="section-number-3">2.5</span> Building an AST</h3>
<section class="outline-text-3" id="text-2-5">
<p>
A parse tree of a C♭ program contains more information than we really
need or want; it shows exactly <i>how</i> a program was parsed using the
grammar (and it contains information coming from the transformed
grammar), but all we want is the underlying structure of the
program.<label for="18" class="margin-toggle sidenote-number"></label><input type="checkbox" id="18" class="margin-toggle"><span class="sidenote">The additional information in the parse tree may be
useful for other applications such as code formatting tools that need
to keep track of the parentheses and other parsing-related
information.</span> This structure is represented in a data structure called
the <i>abstract syntax tree</i> (AST).
</p>

<p>
Let's look at one of our arithmetic expression grammars:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-165-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msup&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msup&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msup&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;msup&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;msup&gt;&lt;mi&gt;F&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;#x3B5;&lt;/mo&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4614" style="width: 8.911em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.644em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-1.373em, 1007.44em, 5.356em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4615"><span class="mtable" id="MathJax-Span-4616" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 7.287em; height: 0px;"><span style="position: absolute; clip: rect(3.526em, 1001.1em, 9.898em, -1000em); top: -7.011em; left: 0em;"><span style="display: inline-block; position: relative; width: 1.1em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.76em, 4.195em, -1000em); top: -6.656em; right: 0em;"><span class="mtd" id="MathJax-Span-4617"><span class="mrow" id="MathJax-Span-4618"><span class="mi" id="MathJax-Span-4619" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.042em, 1001.09em, 4.195em, -1000em); top: -5.347em; right: 0em;"><span class="mtd" id="MathJax-Span-4630"><span class="mrow" id="MathJax-Span-4631"><span class="msup" id="MathJax-Span-4632"><span style="display: inline-block; position: relative; width: 1.091em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.76em, 4.195em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4633" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.822em;"><span class="mo" id="MathJax-Span-4634" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.171em, 1000.75em, 4.195em, -1000em); top: -3.989em; right: 0em;"><span class="mtd" id="MathJax-Span-4654"><span class="mrow" id="MathJax-Span-4655"><span class="mi" id="MathJax-Span-4656" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.042em, 1001.1em, 4.195em, -1000em); top: -2.68em; right: 0em;"><span class="mtd" id="MathJax-Span-4667"><span class="mrow" id="MathJax-Span-4668"><span class="msup" id="MathJax-Span-4669"><span style="display: inline-block; position: relative; width: 1.1em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.75em, 4.195em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4670" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.831em;"><span class="mo" id="MathJax-Span-4671" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.146em, 1000.76em, 4.217em, -1000em); top: -1.331em; right: 0em;"><span class="mtd" id="MathJax-Span-4691"><span class="mrow" id="MathJax-Span-4692"><span class="mi" id="MathJax-Span-4693" style="font-family: MathJax_Math; font-style: italic;">G</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.011em;"></span></span><span style="position: absolute; clip: rect(3.742em, 1006.15em, 10.47em, -1000em); top: -7.356em; left: 1.1em;"><span style="display: inline-block; position: relative; width: 6.187em; height: 0px;"><span style="position: absolute; clip: rect(3.042em, 1004.06em, 4.195em, -1000em); top: -6.656em; left: 0em;"><span class="mtd" id="MathJax-Span-4620"><span class="mrow" id="MathJax-Span-4621"><span class="mi" id="MathJax-Span-4622"></span><span class="mo" id="MathJax-Span-4623" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4624" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4625" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mspace" id="MathJax-Span-4626" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msup" id="MathJax-Span-4627"><span style="display: inline-block; position: relative; width: 1.091em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.76em, 4.195em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4628" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.822em;"><span class="mo" id="MathJax-Span-4629" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.042em, 1006.1em, 4.444em, -1000em); top: -5.347em; left: 0em;"><span class="mtd" id="MathJax-Span-4635"><span class="mrow" id="MathJax-Span-4636"><span class="mi" id="MathJax-Span-4637"></span><span class="mo" id="MathJax-Span-4638" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4639" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4640" style="font-family: MathJax_Main; padding-left: 0.278em;">+</span><span class="mi" id="MathJax-Span-4641" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span class="mspace" id="MathJax-Span-4642" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msup" id="MathJax-Span-4643"><span style="display: inline-block; position: relative; width: 1.091em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.76em, 4.195em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4644" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.822em;"><span class="mo" id="MathJax-Span-4645" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4646" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4647"><span class="mrow" id="MathJax-Span-4648"><span class="mo" id="MathJax-Span-4649" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4650" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4651"><span class="mrow" id="MathJax-Span-4652"><span class="mo" id="MathJax-Span-4653" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.042em, 1004.11em, 4.217em, -1000em); top: -3.989em; left: 0em;"><span class="mtd" id="MathJax-Span-4657"><span class="mrow" id="MathJax-Span-4658"><span class="mi" id="MathJax-Span-4659"></span><span class="mo" id="MathJax-Span-4660" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4661" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4662" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">G</span><span class="mspace" id="MathJax-Span-4663" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msup" id="MathJax-Span-4664"><span style="display: inline-block; position: relative; width: 1.1em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.75em, 4.195em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4665" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.831em;"><span class="mo" id="MathJax-Span-4666" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.042em, 1006.15em, 4.444em, -1000em); top: -2.68em; left: 0em;"><span class="mtd" id="MathJax-Span-4672"><span class="mrow" id="MathJax-Span-4673"><span class="mi" id="MathJax-Span-4674"></span><span class="mo" id="MathJax-Span-4675" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4676" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4677" style="font-family: MathJax_Main; padding-left: 0.278em;">×</span><span class="mi" id="MathJax-Span-4678" style="font-family: MathJax_Math; font-style: italic;">G</span><span class="mspace" id="MathJax-Span-4679" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="msup" id="MathJax-Span-4680"><span style="display: inline-block; position: relative; width: 1.1em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.75em, 4.195em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4681" style="font-family: MathJax_Math; font-style: italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.106em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.831em;"><span class="mo" id="MathJax-Span-4682" style="font-size: 70.7%; font-family: MathJax_Main;">′</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mspace" id="MathJax-Span-4683" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4684"><span class="mrow" id="MathJax-Span-4685"><span class="mo" id="MathJax-Span-4686" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4687" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4688"><span class="mrow" id="MathJax-Span-4689"><span class="mo" id="MathJax-Span-4690" style="font-family: MathJax_Math; font-style: italic;">ε</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.3em, 4.445em, -1000em); top: -1.331em; left: 0em;"><span class="mtd" id="MathJax-Span-4694"><span class="mrow" id="MathJax-Span-4695"><span class="mi" id="MathJax-Span-4696"></span><span class="mo" id="MathJax-Span-4697" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4698" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4699" style="font-family: MathJax_Main; padding-left: 0.278em;">(</span><span class="mi" id="MathJax-Span-4700" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-4701" style="font-family: MathJax_Main;">)</span><span class="mspace" id="MathJax-Span-4702" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4703"><span class="mrow" id="MathJax-Span-4704"><span class="mo" id="MathJax-Span-4705" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4706" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4707" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4708" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 7.356em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -3.479em; border-left: 0px solid; width: 0px; height: 7.538em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>E</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>F</mi><mspace width="thinmathspace"></mspace><msup><mi>E</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>E</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mo>+</mo><mi>F</mi><mspace width="thinmathspace"></mspace><msup><mi>E</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr><mtr><mtd><mi>F</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>G</mi><mspace width="thinmathspace"></mspace><msup><mi>F</mi><mo>′</mo></msup></mtd></mtr><mtr><mtd><msup><mi>F</mi><mo>′</mo></msup></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mo>×</mo><mi>G</mi><mspace width="thinmathspace"></mspace><msup><mi>F</mi><mo>′</mo></msup><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo>ε</mo></mrow></mtd></mtr><mtr><mtd><mi>G</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>i</mi><mi>d</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-165">\begin{align*}
    E   & ::= \, F \, E' \\
    E'  & ::= \, + F \, E'  \; | \; ε \\
    F   & ::= \, G \, F' \\
    F'  & ::= \, \times G \, F'  \; | \; ε \\
    G   & ::= \, (E)  \; | \; id
\end{align*}</script>

<p>
and compute the parse tree for "x + y × z":
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-lre-parse-tree.png" alt="exp-lre-parse-tree.png">

</figure>

<p>
This contains a lot of information that we do not care about, like
exactly how we derived an identifier or an empty string. All we really
need to know is the following:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exp-ast.png" alt="exp-ast.png">

</figure>

<p>
This is why we call it an AST; it abstracts out the unimportant
information from the parse tree and just gives us what we need. Notice
that the representation above is same as how we represented
expressions in assignment 1. The full AST for C♭ is defined in <code>ast.h</code> of
the assignment template, which you should read.
</p>

<p>
How do we compute the AST during parsing? We just insert the
appropriate logic into the parsing functions: Given the exact input
characters they recognized, they create the appropriate AST nodes and
return the root of the tree they created.
</p>

<p>
So, what we do is (1) define the AST data structure; and (2) determine
how to insert the appropriate logic into the parsing functions. Let's
look at this in action on the grammar above.
</p>
</section>

<div id="outline-container-org36f3d76" class="outline-4">
<h4 id="org36f3d76"><span class="section-number-4">2.5.1</span> Example AST for arithmetic expressions</h4>
<section class="outline-text-4" id="text-2-5-1">
<p>
we can define the AST in a way that looks like a grammar, but we will
interpret it as describing a tree instead. For the example grammar, we
can define the following AST:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-166-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;add&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;mul&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4709" style="width: 14.601em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.586em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.294em, 1012.42em, 2.688em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4710"><span class="mtable" id="MathJax-Span-4711" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 12.228em; height: 0px;"><span style="position: absolute; clip: rect(3.196em, 1000.76em, 4.221em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.764em; height: 0px;"><span style="position: absolute; clip: rect(3.171em, 1000.76em, 4.195em, -1000em); top: -3.997em; right: 0em;"><span class="mtd" id="MathJax-Span-4712"><span class="mrow" id="MathJax-Span-4713"><span class="mi" id="MathJax-Span-4714" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.126em, 1011.46em, 4.47em, -1000em); top: -4.023em; left: 0.764em;"><span style="display: inline-block; position: relative; width: 11.464em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1011.46em, 4.444em, -1000em); top: -3.997em; left: 0em;"><span class="mtd" id="MathJax-Span-4715"><span class="mrow" id="MathJax-Span-4716"><span class="mi" id="MathJax-Span-4717"></span><span class="mo" id="MathJax-Span-4718" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4719" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4720" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">i</span><span class="mi" id="MathJax-Span-4721" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-4722" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4723"><span class="mrow" id="MathJax-Span-4724"><span class="mo" id="MathJax-Span-4725" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4726" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4727"><span class="mrow" id="MathJax-Span-4728"><span class="mtext" id="MathJax-Span-4729" style="font-family: MathJax_Typewriter;">add</span></span></span><span class="mspace" id="MathJax-Span-4730" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4731" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mspace" id="MathJax-Span-4732" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4733" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mspace" id="MathJax-Span-4734" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4735"><span class="mrow" id="MathJax-Span-4736"><span class="mo" id="MathJax-Span-4737" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4738" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4739"><span class="mrow" id="MathJax-Span-4740"><span class="mtext" id="MathJax-Span-4741" style="font-family: MathJax_Typewriter;">mul</span></span></span><span class="mspace" id="MathJax-Span-4742" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4743" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mspace" id="MathJax-Span-4744" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4745" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.385em; border-left: 0px solid; width: 0px; height: 1.35em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>E</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thinmathspace"></mspace><mi>i</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">add</mtext></mrow><mspace width="thinmathspace"></mspace><mi>E</mi><mspace width="thinmathspace"></mspace><mi>E</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">mul</mtext></mrow><mspace width="thinmathspace"></mspace><mi>E</mi><mspace width="thinmathspace"></mspace><mi>E</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-166">\begin{align*}
    E  & ::= \, id  \; | \; \texttt{add} \, E \, E  \; | \; \texttt{mul} \, E \, E
\end{align*}</script>

<p>
Notice that we do not care about ambiguity at all for the AST
definition, because the concrete syntax grammar already took care of
that for us. We are just describing the data structure that will hold
the result of the parse. Think of E as the abstract base class of the
AST and each righthand side as a different type of node in the AST
data structure (we are using plain old raw pointers here for the sake
of brevity, the code for the assignments should use smart pointers):
</p>

<pre class="code"><code>abstract <span style="color: #a020f0;">class</span> <span style="color: #228b22;">E</span> { ... }
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Id</span>  : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">E</span> { <span style="color: #228b22;">string</span> <span style="color: #a0522d;">name</span>; }
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Add</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">E</span> { <span style="color: #228b22;">E</span>* <span style="color: #a0522d;">left_child</span>; <span style="color: #228b22;">E</span>* <span style="color: #a0522d;">right_child</span> }
<span style="color: #a020f0;">class</span> <span style="color: #228b22;">Mul</span> : <span style="color: #a020f0;">public</span> <span style="color: #228b22;">E</span> { <span style="color: #228b22;">E</span>* <span style="color: #a0522d;">left_child</span>; <span style="color: #228b22;">E</span>* <span style="color: #a0522d;">right_child</span> }
</code></pre>

<p>
Now, the recursive descent parser for the grammar above would be:
</p>

<pre class="code"><code><span style="color: #228b22;">void</span> <span style="color: #0000ff;">E</span>() { F(); E<span style="color: #ff0000; font-weight: bold;">'</span>(); }
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">E</span><span style="color: #ff0000; font-weight: bold;">'</span>() {
  <span style="color: #a020f0;">if</span> (next == <span style="color: #8b2252;">'+'</span>) { match(+); F(); E<span style="color: #ff0000; font-weight: bold;">'</span>(); }
}
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">F</span>() { G(); F<span style="color: #ff0000; font-weight: bold;">'</span>(); }
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">F</span><span style="color: #ff0000; font-weight: bold;">'</span>() {
  <span style="color: #a020f0;">if</span> (next == <span style="color: #8b2252;">'*'</span>) { <span style="color: #228b22;">match</span>(*); G(); F<span style="color: #ff0000; font-weight: bold;">'</span>(); }
}
<span style="color: #228b22;">void</span> <span style="color: #0000ff;">G</span>() {
  <span style="color: #a020f0;">if</span> (next == <span style="color: #8b2252;">'('</span>) { match(<span style="color: #8b2252;">'('</span>); E(); match(<span style="color: #8b2252;">')'</span>); }
  <span style="color: #a020f0;">else</span> { match(id); }
}
</code></pre>

<p>
To create the AST we modify the functions appropriately, and produce
AST nodes for the part of the input consumed by each parsing function:
</p>

<pre class="code"><code><span style="color: #228b22;">E</span>* <span style="color: #0000ff;">E</span>() {
  a = F();
  b = E<span style="color: #ff0000; font-weight: bold;">'</span>();
  <span style="color: #a020f0;">if</span> (b != <span style="color: #008b8b;">nullptr</span>) <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Add</span>(a, b);
  <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">return</span> a;
}
<span style="color: #228b22;">E</span>* <span style="color: #0000ff;">E</span><span style="color: #ff0000; font-weight: bold;">'</span>() {
  <span style="color: #a020f0;">if</span> (next == <span style="color: #8b2252;">'+'</span>) {
    match(+);
    a = F();
    b = E<span style="color: #ff0000; font-weight: bold;">'</span>();
    <span style="color: #a020f0;">if</span> (b != <span style="color: #008b8b;">nullptr</span>) <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Add</span>(a, b);
    <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">return</span> a;
  }
  <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">nullptr</span>;
}
<span style="color: #228b22;">E</span>* <span style="color: #0000ff;">F</span>() {
  a = G();
  b = F<span style="color: #ff0000; font-weight: bold;">'</span>();
  <span style="color: #a020f0;">if</span> (b != <span style="color: #008b8b;">nullptr</span>) <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Mul</span>(a, b);
  <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">return</span> a;
}
<span style="color: #228b22;">E</span>* <span style="color: #0000ff;">F</span><span style="color: #ff0000; font-weight: bold;">'</span>() {
  <span style="color: #a020f0;">if</span> (next == <span style="color: #8b2252;">'*'</span>) {
    <span style="color: #228b22;">match</span>(*);
    a = G();
    b = F<span style="color: #ff0000; font-weight: bold;">'</span>();
    <span style="color: #a020f0;">if</span> (b != <span style="color: #008b8b;">nullptr</span>) <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Mul</span>(a, b);
    <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">return</span> a;
  }
  <span style="color: #a020f0;">return</span> <span style="color: #008b8b;">nullptr</span>;
}
<span style="color: #228b22;">E</span>* <span style="color: #0000ff;">G</span>() {
  <span style="color: #a020f0;">if</span> (next == <span style="color: #8b2252;">'('</span>) {
    match(<span style="color: #8b2252;">'('</span>);
    a = E();
    match(<span style="color: #8b2252;">')'</span>);
    <span style="color: #a020f0;">return</span> a;
  }
  <span style="color: #a020f0;">else</span> {
    a = match(id);
    <span style="color: #a020f0;">return</span> <span style="color: #a020f0;">new</span> <span style="color: #228b22;">Id</span>(a);
  }
}
</code></pre>

<p>
Let's go through the expression <code>x + y × z</code>:
</p>

<pre class="code"><code>call E():
| a = F()
|   call F():
|   | a = G()
|   |   call G():
|   |     next ≠ '(' // it is x
|   |     a = match(id); // a = 'x'
|   |   return Id(a) // returns Id(x)
|   | // now a = Id(x) in F()
|   | b = F'()
|   |   call F'():
|   |     next ≠ '*' // it is +
|   |	return nullptr
|   | // now b = nullptr
|   return a // F returns Id(x)
| // a = Id(x) in E
| b = E'()
|   call E'():
|   | next == '+'
|   | match(+)
|   | a = F()
|   |   call F():
|   |   | a = G()
|   |   |   call G():
|   |   |     next ≠ '(' // it is y
|   |   |     a = match(id); // a = 'y'
|   |   |   return Id(a) // returns Id(y)
|   |   | // now a = Id(y) in F()
|   |   | b = F'()
|   |   |   call F'():
|   |   |   | next == '*'
|   |	|   | match(*)
|   |	|   | a = G()
|   |   |   |   call G():
|   |   |   |     next ≠ '(' // it is z
|   |   |   |     a = match(id); // a = 'z'
|   |   |   |   return Id(a) // returns Id(z)
|   |	|   | b = F'()
|   |   |   |   call F'():
|   |   |   |     next ≠ '*' // end of input
|   |	|   |   return nullptr
|   |	|   | b == nullptr
|   |	|   return a // returns Id(z)
|   |   | // b == Id(z)
|   |   return Mul(a, b) // returns Mul(y, z)
|   | b = E'()
|   |   call E'():
|   |     next ≠ '+' // end of input
|   |	return nullptr
|   | // b == nullptr
|   return a // returns Mul(y, z)
| // b = Mul(y, z)
return Add(a, b) // returns Add(x, Mul(y, z))
</code></pre>

<p>
We built the AST we want. Note that this makes all the operators
right associative because of right recursion; if we want them to be
left associative we need to modify the way we build the AST (in the
parsers of <code>E'</code> and <code>F'</code>).
</p>
</section>
</div>

<div id="outline-container-org804a2bc" class="outline-4">
<h4 id="org804a2bc"><span class="section-number-4">2.5.2</span> Exercise</h4>
<section class="outline-text-4" id="text-2-5-2">
<p>
Given the following grammar:
</p>

<pre class="code"><code>
A ::= A y B | A z B | B
B ::= B w C | B x C | C
C ::= p C | a
</code></pre>

<p>
and the following AST definition:
</p>

<pre class="code"><code>AST ::= a | wOp AST AST | xOp AST AST | yOp AST AST | zOp AST AST | pOp AST
</code></pre>

<p>
Apply left recursion elimination to make the grammar predictive, then
write a recursive descent parser that produces an appropriate AST.
</p>

<p>
Verify the the input <code>p a y a w a z a x a</code> produces the AST:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exercise-ast.png" alt="exercise-ast.png">

</figure>
</section>
</div>
</div>

<div id="outline-container-orgbb25a66" class="outline-3">
<h3 id="orgbb25a66"><span class="section-number-3">2.6</span> Validating the AST</h3>
<section class="outline-text-3" id="text-2-6">
<p>
Once we have the AST, we are almost finished. We still need to
validate the AST to make sure it isn't nonsense (i.e., syntactically
correct but semantically meaningless like the example English sentence
"Colorless green ideas sleep furiously"). For our language there are
only a few trivial checks that we need to perform:
</p>

<ol class="org-ol">
<li>Is every variable declared before it's used?</li>
<li>Is every called function defined?</li>
<li>Is every parameter name and defined function name unique?</li>
</ol>

<p>
For (1) we just write a checker to do a recursive traversal of the AST
with a set <span class="underline">DECLARED</span> that contains the variables declared in the
current scope. it starts empty; each time we enter a block of code we
add in that block's declared variables. for each statement, we look at
all variables it refers to and verify that they are in the current
<span class="underline">DECLARED</span> set.
</p>

<p>
The only thing we need to be a little careful of is to distinguish
between different scopes. Consider:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;
<span style="color: #a020f0;">if</span> (x &lt; y) {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">z</span>;
  <span style="color: #008b8b;">y</span> := x + z;
} <span style="color: #a020f0;">else</span> {
  <span style="color: #008b8b;">y</span> := x - z;
}
</code></pre>

<p>
There is an error here because 'z' is not in scope in the conditional
false branch. There's an easy way to ensure we do it correctly: given
a <span class="underline">DECLARED</span> set D, when the checker makes a recursive call we always
pass in a copy of D rather than D itself. so in the above example, the
initial D would have <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-167-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4746" style="width: 2.917em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.504em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1002.44em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4747"><span class="mrow" id="MathJax-Span-4748"><span class="mo" id="MathJax-Span-4749" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-4750"><span class="mi" id="MathJax-Span-4751" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-4752" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-4753" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span class="mo" id="MathJax-Span-4754" style="font-family: MathJax_Main;">}</span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>y</mi></mrow><mo>}</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-167">\set{x,y}</script>. We pass in a copy of D when making
a recursive checker call to the true branch and modify the copy to
contain <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-168-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;z&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4755" style="width: 3.984em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.407em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1003.34em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4756"><span class="mrow" id="MathJax-Span-4757"><span class="mo" id="MathJax-Span-4758" style="font-family: MathJax_Main;">{</span><span class="mrow" id="MathJax-Span-4759"><span class="mi" id="MathJax-Span-4760" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-4761" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-4762" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-4763" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-4764" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.167em;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span class="mo" id="MathJax-Span-4765" style="font-family: MathJax_Main;">}</span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>{</mo><mrow><mi>x</mi><mo>,</mo><mi>y</mi><mo>,</mo><mi>z</mi></mrow><mo>}</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-168">\set{x,y,z}</script>. When the recursive call returns we throw away
the copy and pass the orignal D when making a recursive checker call
to the false branch. this keeps the branches separate and everything
works right.
</p>

<p>
For (2) it's even easier: Just collect the set of defined functions,
then go through all call statements and check that they only call one
of the defined functions. We also need to check that the call uses the
correct number of arguments.
</p>

<p>
For (3) all we do is go through the defined functions and check that
their names are unique, then for every function's parameter list go
through and check that they are all distinct from each other. Note
that many languages do not require unique function names as long as
the function signatures are different; we will keep things simple and
require uniqueness (it will also help making the code generation phase
simple).
</p>

<p>
In general the AST validation phase can be much more complicated. type
checking makes up a big piece, but since we only have one type it
doesn't really matter to us. So, we are going to defer these checks to
the backend of our compiler for now. We are going to do all of the
checks above and more when we extend our language, and introduce a
type system later in class.
</p>
</section>

<div id="outline-container-orgf579983" class="outline-4">
<h4 id="orgf579983"><span class="section-number-4">2.6.1</span> Example</h4>
<section class="outline-text-4" id="text-2-6-1">
<p>
Consider the following program, it has several errors:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> { <span style="color: #008b8b;">x</span> := bar(42); <span style="color: #a020f0;">return</span> x; }
<span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>() : <span style="color: #228b22;">int</span> { <span style="color: #a020f0;">return</span> 42; }
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">foo</span>(1, 2);
</code></pre>

<p>
Let's build the <span class="underline">DECLARED</span> sets for the functions and the variables:
</p>

<p>
For variables (check 1):
</p>

<p>
Inside <code>foo</code> in line 1, there is only one scope and all parameters are
declared inside that block. When we are building the <span class="underline">DECLARED</span> set
for <code>foo</code>'s body, we have a set containing <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-169-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;}&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4766" style="width: 1.767em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.519em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1001.45em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4767"><span class="mrow" id="MathJax-Span-4768"><span class="mo" id="MathJax-Span-4769" style="font-family: MathJax_Main;">{</span><span class="mi" id="MathJax-Span-4770" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mo" id="MathJax-Span-4771" style="font-family: MathJax_Main;">}</span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow><mo>{</mo><mi>a</mi><mo>}</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-169">\set{a}</script>. Now, the
assignment and the return expression both use the variable <code>x</code> but it
is not in the declared set, those are the errors for the first kind.
</p>

<p>
Inside <code>foo</code> in line 2, the <span class="underline">DECLARED</span> set is ∅. Since no variables
are used inside the body of that function there are no errors there.
</p>

<p>
For the global scope, there are no variables declared either so the
<span class="underline">DECLARED</span> set is ∅. There are no statements, and the output
expression does not use variables so there are no errors there either.
</p>

<p>
Now, let's check if every called function is defined (check 2):
</p>

<p>
The only declared function is <code>foo</code> (although it is declared
twice). On line 1, there is a call to <code>bar</code> but <code>bar</code> is not defined,
so that is an error.
</p>

<p>
There is a call to <code>foo</code> on line 3, with 2 arguments and there is a
definition of <code>foo</code> with 2 arguments so that call is valid.
</p>

<p>
For our last check (3):
</p>

<p>
In implementation, this check will occur before checks 1 and 2 because
we would make this check when building the <span class="underline">DECLARED</span> sets. First, for
functions: There are 2 definitions of <code>foo</code> so that is an error. Then,
for the parameters of each function: the parameter <code>a</code> is defined
twice on line 1, that is also an error.
</p>
</section>
</div>
</div>
</section>

<section id="outline-container-org9ad1912" class="outline-2">
<h2 id="org9ad1912"><span class="section-number-2">3</span> Front-end wrap-up</h2>
<section class="outline-text-2" id="text-3">
<p>
We have gone through a lot of steps to get through the frontend; let's
recap what's going on and put it all together.
</p>

<p>
given: grammar for concrete syntax of the language
</p>
<ol class="org-ol">
<li>decide on precedence levels</li>
<li>factor grammar to enforce desired precedence</li>
<li>eliminate left recursion</li>
<li>check if grammar is predictive
<ul class="org-ul">
<li>if not, apply left factoring</li>
<li>recheck if grammar is predictive now</li>
<li>if not, the concrete grammar needs to change somehow</li>
</ul></li>
<li>define AST data structure</li>
<li>translate grammar to recursive descent parser</li>
<li>install AST-building logic into parsing functions</li>
</ol>

<p>
given: a sequence of characters representing the source code
</p>
<ol class="org-ol">
<li>lexer: convert to sequence tokens using DFA/NFA</li>
<li>parser: convert sequence of tokens into AST</li>
<li>check AST for validity</li>
</ol>

<p>
Note that we have simplified some issues that happen in real-world
languages like C, C++, Java, etc. These often require some creative
thinking to get them to fit into the frontend framework we have
covered here, mostly because of ambiguity in the lexemes and/or
grammar or because lexemes are not regular. We carefully designed our
language to get around these issues so the programs in our language
can be parsed using the techniques we covered so far.
</p>

<p>
To give an example, in C++ the statement <code>A * B;</code> can be parsed in 2
ways and the parser needs to build contextual information to resolve
it (so C++ is <b>not context-free</b>):
</p>

<ul class="org-ul">
<li>If <code>A</code> is a type like a class name, then it means "declare a
variable <code>B</code> of type <code>A *</code>".</li>
<li>If <code>A</code> is a variable, then it means "call <code>operator *</code> method of <code>A</code>
with argument <code>B</code>".</li>
</ul>

<p>
So, the parser needs to figure out whether <code>A</code> is a type name or not
before parsing this statement. C++ compilers use hand-written parsers
and build semantic information while parsing to resolve this
ambiguity.
</p>
</section>

<div id="outline-container-orgb48143c" class="outline-3">
<h3 id="orgb48143c"><span class="section-number-3">3.1</span> More on parsing</h3>
<section class="outline-text-3" id="text-3-1">
<p>
There are several topics related to parsing (and lexing) we have not
covered. I will list them here (none of them are required for the
class), so if you want to check them out, you can reach me to provide
resources (or search them on the web):
</p>

<dl class="org-dl">
<dt>Error recovery</dt><dd>Usually error recovery requires explicitly
designing the parser to build error nodes, or
using a parser generator with good error recovery
capabilities. Another step that helps with error
messages is to add position information to each
token and AST node so the error messages can tell
the programmer where the error occurs.</dd>
<dt>Parser generators</dt><dd>We have not covered parser generators in
detail. They are tools that implement algorithms that transform a
given grammar to produce a parser. You can look into ANTLR,
bison, LALRPOP for some examples.</dd>
<dt>Parser combinators</dt><dd>Parser combinators are an idea that is
popularized by the functional programming community. The idea is
to build parsers, and combinators that operate over parsers so we
can algebraically combine parsers to build more complicated
ones. Parser combinators may be slow for non-predictive grammars
(the performance depends a lot on the specific grammar). They can
get more performant using memoization techniques like packrat
parsers.</dd>
<dt>Parsing expression grammar (PEG)</dt><dd>PEGs are an alternative to CFGs
for describing grammars. They are similar to CFGs however they
are unambiguous by design (specifically "A | B" means "try A, if
it fails try B" in PEGs so it is not same as "B | A" whereas the
two are interchangeable in CFGs).</dd>
<dt>Parsing with derivatives</dt><dd>This is a cool idea that generalizes
derivatives of regular expressions to CFGs to build parsers for
arbitrary CFGs. The naive algorithm is quite slow (it takes
exponential time), and the optimized version takes cubic
time. However, it is still a useful tool to experiment with
grammars in language design phase.</dd>
</dl>
</section>
</div>
</section>
<section id="outline-container-orga85dfba" class="outline-2">
<h2 id="orga85dfba"><span class="section-number-2">4</span> Code generation, naïvely</h2>
<section class="outline-text-2" id="text-4">
<p>
Given an AST, the code generator's job is to translate it into a
sequence of assembly instructions for our target architecture. For the
purposes of these lectures i will use a generic assembly language; the
assignments will target 32-bit x86 assembly instructions.
</p>
</section>

<div id="outline-container-org3074808" class="outline-3">
<h3 id="org3074808"><span class="section-number-3">4.1</span> Where code generation fits in</h3>
<section class="outline-text-3" id="text-4-1">
<p>
Recall from earlier in class that the compiler is only one part of the
pipeline from source code to executable:
</p>

<pre class="code"><code>source1 --[compiler]-&gt; assembly --[assembler]-&gt; object file 1 ---
source2 --[compiler]-&gt; assembly --[assembler]-&gt; object file 2 ---\
...                                                               |--[linker]-&gt; executable
sourceN --[compiler]-&gt; assembly --[assembler]-&gt; object file N .../
</code></pre>

<p>
To give an example, let's compile a simple C program:
</p>

<pre class="code"><code>~/lab/cs160 $ cat square.c
int square(int x) {
  return x * x;
}
~/lab/cs160 $ gcc -c square.c 
~/lab/cs160 $ objdump -t square.o

square.o:	file format Mach-O 64-bit x86-64

SYMBOL TABLE:
0000000000000000 g     F __TEXT,__text _square
</code></pre>

<p>
Here, the object file defines a single symbol for the linker to find:
<code>_square</code> for our square function. So, the linker can find where
<code>square</code> is defined when linking this file with other object
files. You can use <code>objdump</code> to inspect object files yourselves as
well. Let's look at another part of the program that uses the <code>square</code>
function:
</p>

<pre class="code"><code>~/lab/cs160 $ cat main.c
int square(int x);  // note that this is just a declaration

int main(int argc, char **argv) {
  return square(argc);
}
~/lab/cs160 $ gcc -c main.c
~/lab/cs160 $ objdump -t main.o

main.o:	file format Mach-O 64-bit x86-64

SYMBOL TABLE:
0000000000000000 g     F __TEXT,__text _main
0000000000000000         *UND* _square
</code></pre>

<p>
Here, the symbol table <i>for the object file</i> (this is <b>different from
the symbol tables we will build</b>, those will also contain local
variables) lists <code>main</code> as a function defined in this object file, and
<code>square</code> as an undefined object (that is what <code>*UND*</code> means in this
output). So, when we call the linker to link the two object files, the
linker will match the square function defined in <code>square.o</code> with the
square function declared in <code>main.o</code>:
</p>

<pre class="code"><code>~/lab/cs160 $ gcc square.o main.o -o example-program
~/lab/cs160 $ objdump -t example-program 
example-program:	file format Mach-O 64-bit x86-64

SYMBOL TABLE:
0000000100000000 g     F __TEXT,__text __mh_execute_header
0000000100000f90 g     F __TEXT,__text _main
0000000100000f80 g     F __TEXT,__text _square
0000000000000000         *UND* dyld_stub_binder
</code></pre>
</section>

<div id="outline-container-orgac2a4e1" class="outline-4">
<h4 id="orgac2a4e1"><span class="section-number-4">4.1.1</span> Static vs dynamic libraries</h4>
<section class="outline-text-4" id="text-4-1-1">
<p>
Even after using the linker it's possible we still do not have all the
code. It depends on whether we're using <i>static linking</i> or <i>dynamic
linking</i> for libraries.
</p>

<p>
Static libraries have a '*.a' extension (for "archive") on most
Unixes. They are linked in with the other code the same way as object
files.
</p>

<p>
Dynamic libraries have a '*.so' extension (for "shared object"). They
are not linked in at compilation time. Instead, they are linked in at
load time when the code is being put into memory. The part of the
operating system responsible for finding and loading the dynamic
libraries is called <i>loader</i> appropriately.
</p>

<p>
There are pros and cons to each approach, and both are widely used.
</p>
<dl class="org-dl">
<dt>Static</dt><dd>Larger executable size, can be multiple copies in memory at
once for different executables, but guaranteed to have the right
version.</dd>
<dt>Dynamic</dt><dd>Smaller executable size, can be shared by multiple
executables, but the library can get out of sync with the
executable. For example, most C programs link dynamically
against the standard library and other libraries that are
shipped with the operating system. The standard library
and other libraries are updated when the operating system
is updated.</dd>
</dl>

<p>
You do not have to be aware of this for writing the compiler, but you
should know the difference in general. We will link statically against
a bootstrap code that calls our main function, and dynamically against
the C++ standard library because the bootstrap code will use it to
print the output.
</p>
</section>
</div>


<div id="outline-container-org722b2b6" class="outline-4">
<h4 id="org722b2b6"><span class="section-number-4">4.1.2</span> Process layout in memory</h4>
<section class="outline-text-4" id="text-4-1-2">
<p>
It will be useful to know how the process is laid out in memory while
executing, so we can generate the code to read data from, and write to
appropriate places in memory. As a side note, we are working on
virtual memory, not physical memory; so, this is the memory as seen by
our program, the operating system is responsible for mapping the
physical memory to virtual memory, and the mapping is invisible for
our program. So, the memory looks like this from our perspective:
</p>

<pre class="code"><code>--------- addresses go low to high in this direction ----&gt;
(address 0) [code segment | static segment | data segment]
</code></pre>

<p>
The code segment (also called text segment in some architectures)
contains the machine code. The static segment also contains globals
and constant strings, and the data segment is laid out as:
</p>

<pre class="code"><code>(low address) [heap | stack]
</code></pre>

<p>
Note that this is where the errors "segmentation fault" <label for="19" class="margin-toggle sidenote-number"></label><input type="checkbox" id="19" class="margin-toggle"><span class="sidenote">accessing
the wrong segment, although the virtual memory is vast these days and
segments are more interleaved however the term has carried on and this
simple mental image is useful</span> and "stack overflow" (using up too much
stack space and starting to overwrite the heap) come from.
</p>

<p>
The heap is where memory is allocated from while the program is
running (e.g., when you call <span class="underline">new</span> or <span class="underline">malloc</span>); it is generally
handled by the language runtime.
</p>

<p>
The stack is for procedure calls; and allocating the space for local
variables. Each call will push a "stack frame" onto the stack, so each
instance of a procedure will have its own stack frame. Stack
manipulation is generally handled by the compiler. The stack frame is
where a procedure's local variables and argument values are stored,
among other things; we will get more into procedures and stack frames
later.
</p>

<p>
Note that the stack grows downwards; this is typical for most
architectures, including x86, but not always true (there are some
where it grows up, and even some where it goes in a circle).
</p>

<p>
Two important values with respect to the stack are:
</p>

<dl class="org-dl">
<dt>The "stack pointer"</dt><dd>Points to
the current top of the stack.</dd>
<dt>The "frame pointer"</dt><dd>(aka base pointer) Points to the bottom of
the current stack frame.</dd>
</dl>

<p>
The part of the stack between where the stack pointer and the frame
pointer point to is the current stack frame.
</p>
</section>
</div>

<div id="outline-container-org5bf19cb" class="outline-4">
<h4 id="org5bf19cb"><span class="section-number-4">4.1.3</span> alignment and padding</h4>
<section class="outline-text-4" id="text-4-1-3">
<p>
Architectures generally have restrictions on alignment, i.e., how
values can match up to word boundaries. When assigning memory
locations to variables, we need to respect the alignment restrictions.
For example, 32-bit floating point and integer values should begin on
a full-word (32-bit) boundary.
</p>

<p>
A potential scheme for allocating values on boundary is: place values
with identical alignment restrictions next to each other; assign
offsets from most restrictive to least; if needed, insert padding to
match restrictions.
</p>

<p>
We won't have to worry about this for our language because we only
have one type of thing: int32. But this is something that compiler
writers have to worry about in general. For example, consider the
following struct in C:
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> <span style="color: #228b22;">foo</span> { <span style="color: #228b22;">char</span> <span style="color: #a0522d;">a</span>; <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>; <span style="color: #228b22;">short</span> <span style="color: #a0522d;">c</span>; <span style="color: #228b22;">long</span> <span style="color: #228b22;">long</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">d</span>; };
</code></pre>

<p>
Assume an architecture where char:8, short:16, int:32, and long long
int:64; chars are byte-aligned, shorts are aligned to 2 bytes
(half-word), ints are word-aligned, and long long ints are
double-word-aligned. So we would have to lay this out in memory as
(where each cell represents a byte):
</p>

<pre class="code"><code>|a| | | |b|b|b|b|c|c| | | | | | |d|d|d|d|d|d|d|d|
</code></pre>

<p>
This is why it's bad practice when C/C++ programmers try to manually
index into a struct, like:
</p>

<pre class="code"><code><span style="color: #228b22;">foo</span> <span style="color: #a0522d;">x</span>{8,16,32,64};
<span style="color: #228b22;">char</span> <span style="color: #a0522d;">y</span> = *((<span style="color: #228b22;">char</span>*)&amp;x + 1);
</code></pre>

<p>
This code tries to read the first byte of x.b, but it's actually
getting the padding between x.a and x.b that was inserted by the
compiler, which is garbage.  Note that, laying out the fields of a
struct is a requirement in C's definition (and most places in C++'s
definition). Other languages may not give this guarantee and
re-arrange this struct so that it would take only 15 bytes rather than
24 bytes while abiding by the architecture's alignment rules.
</p>
</section>
</div>
</div>

<div id="outline-container-orgc5958a3" class="outline-3">
<h3 id="orgc5958a3"><span class="section-number-3">4.2</span> Symbol table</h3>
<section class="outline-text-3" id="text-4-2">
<p>
During compilation it's generally useful to have a single repository
of information about symbols in the program (e.g., functions and
variables) so that we can generate the code that accesses such
objects. Here are some example information that we would want to keep
track of for code generation:
</p>

<ul class="org-ul">
<li>functions: number of parameters and their types, …</li>
<li>variables: type, memory location, array dimensions, …</li>
<li>structs and records: their fields, layout, and size, …</li>
<li>etc</li>
</ul>

<p>
We can find this information out by traversing the code whenever we
need it, but it's more efficient to figure it out once and store the
information to a place we can look it up whenever we need it.
</p>

<p>
Note that this information is used by the front-end, middle-end, and
back-end, and that it isn't all available at the same time; the
information gets filled in as it becomes available (e.g., variable
types may be filled in before memory locations).
</p>

<p>
Naively we might think to implement the symbol table as a global map
from symbol to info, but that doesn't quite work due to the issue of
<i>scope</i>: Some variables are defined only for a delimited portion of
the program.
</p>
</section>

<div id="outline-container-org65c7870" class="outline-4">
<h4 id="org65c7870"><span class="section-number-4">4.2.1</span> scope</h4>
<section class="outline-text-4" id="text-4-2-1">
<p>
Most programming languages have the concept of scope, i.e., an area of
code for which a particular variable is defined. For example, every
function has its own scope, and its parameters and locals are entirely
independent of any other function's parameters and locals even if they
are named the same:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span> = a + 1; <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span> = b + 2; <span style="color: #a020f0;">return</span> x * y; }
<span style="color: #228b22;">double</span> <span style="color: #0000ff;">bar</span>(<span style="color: #228b22;">double</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">double</span> <span style="color: #a0522d;">b</span>) { <span style="color: #228b22;">double</span> <span style="color: #a0522d;">x</span> = a - 1; <span style="color: #228b22;">double</span> <span style="color: #a0522d;">y</span> = b - 2; <span style="color: #a020f0;">return</span> x / y; }
</code></pre>

<p>
We need to keep the info about foo's variables separate from the info
about bar's variables. The first solution we might try is just to keep
a separate symbol table for each scope (i.e., each function):
</p>

<pre class="code"><code>foo --&gt; [a -&gt; ..., b -&gt; ..., x -&gt; ..., y -&gt; ...]
bar --&gt; [a -&gt; ..., b -&gt; ..., x -&gt; ..., y -&gt; ...]
</code></pre>

<p>
This is a good start (earlier versions of C and other early
programming languages use this) but it also has a problem, namely,
<i>nested scope</i>.
</p>
</section>
</div>

<div id="outline-container-org2fe015a" class="outline-4">
<h4 id="org2fe015a"><span class="section-number-4">4.2.2</span> nested scope</h4>
<section class="outline-text-4" id="text-4-2-2">
<p>
Scopes can be nested inside of each other, and variables in an inner
scope can shadow variables in an outer scope. Consider the following
example:
</p>

<pre class="code"><code><span style="color: #b22222;">// </span><span style="color: #b22222;">SCOPE LEVEL 0</span>
<span style="color: #a020f0;">static</span> <span style="color: #228b22;">int</span> <span style="color: #a0522d;">w</span>;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;

<span style="color: #228b22;">void</span> <span style="color: #0000ff;">example</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) { <span style="color: #b22222;">// </span><span style="color: #b22222;">SCOPE LEVEL 1</span>
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
  { <span style="color: #b22222;">// </span><span style="color: #b22222;">SCOPE LEVEL 2a</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>, <span style="color: #a0522d;">z</span>;
  }
  { <span style="color: #b22222;">// </span><span style="color: #b22222;">SCOPE LEVEL 2b</span>
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #a0522d;">x</span>;
    { <span style="color: #b22222;">// </span><span style="color: #b22222;">SCOPE LEVEL 3</span>
      <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>, <span style="color: #a0522d;">x</span>;
      b = a + b + c + x + w;
    }
  }
}
</code></pre>

<p>
All modern programming languages use <b>lexical scoping</b>, which means
that a variable always refers to its syntactically nearest
definition. In other words, start from the scope the variable is being
used in and see if that scope defines that variable; if so then that's
the definition it refers to. Otherwise, look in the scope containing
the current scope and check there. Keep going up the chain of
enclosing scopes until you find the nearest one that defines the
variable; that's the definition that variable use refers to.
</p>

<pre class="code"><code>level_0 --&gt; level_1 --&gt; level_2a
                    \-&gt; level_2b --&gt; level_3
</code></pre>

<p>
For the above example, if we subscript the variable with the scope
they are defined in we see that the assignment in the example becomes:
</p>

<pre class="code"><code>b_1 = a_2b + b_1 + c_3 + x_3 + w_0;
</code></pre>

<p>
Note that there's no way that any variable used in scope 2b can refer
to scope 2a because 2a does not enclose 2b.
</p>

<p>
So how do we arrange the symbol table to make the resolution possible?
the basic idea is to create a new table for each scope and chain them
together in a way that mirrors the scoping tree we just saw. We will use
the following data structure and API for symbol table creation:
</p>

<ul class="org-ul">
<li>SymbolTable: Struct for the symbol table. Fields:
<ul class="org-ul">
<li>parent: pointer to enclosing symbol table</li>
<li>table: map from symbol to info</li>
</ul></li>
<li>currScope: pointer to current symbol table, initialized to <code>nullptr</code> /empty <code>unique_ptr</code></li>
<li>CreateScope():
<ul class="org-ul">
<li>creates a new symbol table</li>
<li>sets the table's parent to currScope</li>
<li>sets currScope to the new table</li>
</ul></li>
<li>Insert(symbol, info):
<ul class="org-ul">
<li>inserts symbol and its info in currScope's table</li>
</ul></li>
<li>Lookup(symbol): looks up symbol to get its info
<ul class="org-ul">
<li>starts in currScope and keeps looking for symbol until it's found,
walking up the parents.</li>
</ul></li>
<li>EndScope():
<ul class="org-ul">
<li>sets currScope to currScope's parent</li>
</ul></li>
</ul>

<p>
Check out the lecture videos to see how this structure is built for
the example above.
</p>
</section>
</div>

<div id="outline-container-org337408d" class="outline-4">
<h4 id="org337408d"><span class="section-number-4">4.2.3</span> Implementation in our compiler</h4>
<section class="outline-text-4" id="text-4-2-3">
<p>
C♭ is very simple, and so is our compiler, so a full-fledged symbol
table with type information is kind of overkill. All we really need to
keep track of is the memory location of each variable. Note that we
still do need to worry about scope and nested scopes.
</p>

<p>
We will be doing code generation using a recursive traversal of the
AST as described below. as part of the recursive traversal we will
pass a map from variable to memory location (we will describe how to
compute the memory location in a bit). We use the <code>currScope</code> field of
the code generator to keep the symbol table for the current scope.
</p>

<p>
Notice that this is essentially the scheme we talked about in an
earlier lecture on validating the AST by checking that all variables
were declared before being used.
</p>

<p>
We can get away with this scheme because we're not keeping around any
other information, and once we're done with code generation for a
given scope we do not need the memory location information, so we can
just get rid of the maps as we leave each scope, and restore
<code>currScope</code> to its original value.
</p>
</section>
</div>

<div id="outline-container-orgcb2cbe8" class="outline-4">
<h4 id="orgcb2cbe8"><span class="section-number-4">4.2.4</span> Specifics of scope in C♭</h4>
<section class="outline-text-4" id="text-4-2-4">
<p>
Recall that the programs in C♭ are described as follows:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-170-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;g&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;msup&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msup&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;m&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;output&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;;&lt;/mtext&gt;&lt;/mrow&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4772" style="width: 34.313em; display: inline-block;"><span style="display: inline-block; position: relative; width: 29.54em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.308em, 1029.19em, 2.674em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4773"><span class="mtable" id="MathJax-Span-4774" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 29.179em; height: 0px;"><span style="position: absolute; clip: rect(3.148em, 1028.99em, 4.456em, -1000em); top: -4.023em; left: 0em;"><span style="display: inline-block; position: relative; width: 29.179em; height: 0px;"><span style="position: absolute; clip: rect(3.109em, 1028.99em, 4.416em, -1000em); top: -3.983em; right: 0em;"><span class="mtd" id="MathJax-Span-4775"><span class="mrow" id="MathJax-Span-4776"><span class="mi" id="MathJax-Span-4777" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4778" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4779" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4780" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4781" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4782" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4783" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mo" id="MathJax-Span-4784" style="font-family: MathJax_Main; padding-left: 0.278em;">∈</span><span class="mi" id="MathJax-Span-4785" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.109em;"></span></span><span class="mi" id="MathJax-Span-4786" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4787" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4788" style="font-family: MathJax_Math; font-style: italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-4789" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4790" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4791" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mspace" id="MathJax-Span-4792" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4793" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4794" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4795" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mi" id="MathJax-Span-4796" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-4797" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4798" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4799" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4800" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4801" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4802" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4803" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mi" id="MathJax-Span-4804" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="msubsup" id="MathJax-Span-4805"><span style="display: inline-block; position: relative; width: 1.047em; height: 0px;"><span style="position: absolute; clip: rect(3.146em, 1000.55em, 4.4em, -1000em); top: -4.023em; left: 0em;"><span class="mi" id="MathJax-Span-4806" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; top: -4.436em; left: 0.618em;"><span class="mo" id="MathJax-Span-4807" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span><span class="mi" id="MathJax-Span-4808" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mspace" id="MathJax-Span-4809" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4810" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4811" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4812" style="font-family: MathJax_Math; font-style: italic;">m</span><span class="mi" id="MathJax-Span-4813" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4814" style="font-family: MathJax_Math; font-style: italic;">B</span><span class="mi" id="MathJax-Span-4815" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-4816" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4817" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4818" style="font-family: MathJax_Math; font-style: italic;">k</span><span class="mspace" id="MathJax-Span-4819" style="height: 0em; vertical-align: 0em; width: 0.167em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4820"><span class="mrow" id="MathJax-Span-4821"><span class="mtext" id="MathJax-Span-4822" style="font-family: MathJax_Typewriter;">output&nbsp;</span></span></span><span class="mi" id="MathJax-Span-4823" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4824" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-4825" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mi" id="MathJax-Span-4826" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="texatom" id="MathJax-Span-4827"><span class="mrow" id="MathJax-Span-4828"><span class="mtext" id="MathJax-Span-4829" style="font-family: MathJax_Typewriter;">;</span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.369em; border-left: 0px solid; width: 0px; height: 1.318em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>p</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi><mo>∈</mo><mi>P</mi><mi>r</mi><mi>o</mi><mi>g</mi><mi>r</mi><mi>a</mi><mi>m</mi><mspace width="thickmathspace"></mspace><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>D</mi><mi>e</mi><msup><mi>f</mi><mo>∗</mo></msup><mi>a</mi><mspace width="thinmathspace"></mspace><mi>s</mi><mi>t</mi><mi>m</mi><mi>t</mi><mi>B</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>k</mi><mspace width="thinmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">output&nbsp;</mtext></mrow><mi>a</mi><mi>e</mi><mi>x</mi><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">;</mtext></mrow></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-170">\begin{align*}
program \in Program \; ::= \; functionDef^*a \, stmtBlock \, \texttt{output } aexp \texttt{;}
\end{align*}</script>

<p>
In C♭, each statement block creates a new scope, so each block under a
conditional or loop has its own scope. There are a few more details
about scopes relating to the syntax above:
</p>

<ul class="org-ul">
<li>Each function's name is included in all function bodies including
its own (so we can call functions recursively, in the global scope,
or in other functions).</li>
<li>Each function's body includes the parameters in its own scope. The
parameters are placed in a different part of the stack than the
local variables. We are going to cover that later in this class.</li>
<li>The output expression can refer to the variables in the global
scope, so you should treat it as part of the global scope.</li>
<li>Similarly, the return expressions in functions can refer to the
parameters and locals inside the function.</li>
</ul>
</section>
</div>
</div>

<div id="outline-container-orgfa5615b" class="outline-3">
<h3 id="orgfa5615b"><span class="section-number-3">4.3</span> Code generation strategies</h3>
<section class="outline-text-3" id="text-4-3">
</section>
<div id="outline-container-orge4fe6ca" class="outline-4">
<h4 id="orge4fe6ca"><span class="section-number-4">4.3.1</span> recursive AST traversal</h4>
<section class="outline-text-4" id="text-4-3-1">
<p>
A modern optimizing compiler will almost certainly translate the AST
to a simpler intermediate representation (IR) before doing code
generation. However, for our first compiler we will translate directly
from the AST to assembly. The implementation of code generation will
be based on a recursive traversal of the AST; as we traverse it we
will emit the appropriate assembly so that by the time we have traversed
the entire tree we have finished compilation.
</p>

<p>
Our compiler is written in C++, and the idiomatic way to do something
like this in an object oriented language is called the "Visitor Design
Pattern". We have covered it in the first assignment and the first
discussion section. Please visit those materials, if you do not
remember Visitor Pattern.
</p>

<p>
Also note that because we are directly generating code from the AST
rather than translating to an IR and then optimizing, the code we
generate will be very inefficient with lots of redundant loads and
stores; this is the price we pay for a simple, uniform code generation
strategy. Later in class, we are going to cover how to implement
optimizations over an IR to generate more efficient code.
</p>

<p>
There are two popular categories of machines that we can generate code
for: stack-based, and register-based.
</p>
</section>
</div>


<div id="outline-container-orgb64dd1d" class="outline-4">
<h4 id="orgb64dd1d"><span class="section-number-4">4.3.2</span> Stack-based machines</h4>
<section class="outline-text-4" id="text-4-3-2">
<p>
Often we can (or must) treat the target architecture as a stack
machine: there is a system stack (logically distinct from the function
stack/call stack) and when generating code, the operands and result
are always on the stack and do not need to be explicitly stated. For
those familiar with it, the code looks like reverse polish notation.
For example, the following statement
</p>

<pre class="code"><code>x = (1 + 2) * 3
</code></pre>

<p>
would generate the following instruction listing:
</p>

<pre class="code"><code><span style="color: #0000ff;">push</span> <span style="color: #a020f0;">1</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">2</span>
<span style="color: #0000ff;">add</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">3</span>
<span style="color: #0000ff;">mul</span>
<span style="color: #0000ff;">store</span> [address of x]
</code></pre>

<p>
The JVM is an example of a stack machine, as is the CLR<label for="20" class="margin-toggle sidenote-number"></label><input type="checkbox" id="20" class="margin-toggle"><span class="sidenote">Common
Language Runtime, the virtual machine that C# and other languages on
.Net platform compile to.</span>. The x86 architecture is not really a stack
machine, but we could repurpose the function stack and treat it as a
stack machine if we wanted to.
</p>

<p>
Advantages of stack machines:
</p>

<ul class="org-ul">
<li>easy to generate code</li>
<li>no temporary variables</li>
<li>no register allocation, smaller code. This last part is seen
important for cases when the target architecture has a small memory,
or when the code needs to be sent across a slow or expensive
channel.</li>
</ul>

<p>
Disadvantages of stack machines:
</p>
<ul class="org-ul">
<li>can be much slower than register-based because of the stack load &amp;
store operations</li>
</ul>
</section>
</div>

<div id="outline-container-org07cdd05" class="outline-4">
<h4 id="org07cdd05"><span class="section-number-4">4.3.3</span> Register-based machines</h4>
<section class="outline-text-4" id="text-4-3-3">
<p>
A more common target architecture is a register-based machine: It uses
high-speed memory integrated directly into the CPU (i.e., registers)
to hold operands and results and requires instructions to explicitly
state where the operands are and where the result should be put.
For example, the same source code
</p>

<pre class="code"><code>x = (1 + 2) * 3
</code></pre>

<p>
would generate:
</p>

<pre class="code"><code>mov 1 R1
mov 2 R2
add R1 R2
mov 3 R3
mul R2 R3
store R3 [memory location of x]
</code></pre>

<p>
Here, we are using a somewhat generic assembly language modeled off of
x86 but not exactly the same; when there are two operands, the
operation is applied and the result is put in the second one. R1, R2,
and R3 are registers.
</p>

<p>
x86, ARM, MIPS, etc are all register-based machines (though most can,
as mentioned above, pretend to be stack-based machines by repurposing
the function stack).
</p>

<p>
The advantages are disadvantages of register-based machines are
basically the reverse of those for stack-based machines.
</p>

<p>
We will be targeting x86 as a register-based machine for our
compiler. However, we are going to generate code that uses the
register machine naively, rather than generating code that utilizes
more registers effectively.
</p>
</section>
</div>
</div>

<div id="outline-container-orgba07de5" class="outline-3">
<h3 id="orgba07de5"><span class="section-number-3">4.4</span> Naïve register-based code generation</h3>
<section class="outline-text-3" id="text-4-4">
<p>
We are going to approach code generation in a piecemeal fashion: We
will start by assuming a program without any function definitions or
calls. Thus, all we have is the single global block of
statements. Then, we will add functions and function calls to our
language. For our single-block version, we are going to work our way
up from variables to different kinds of expressions, all the way to
complex control flow statements.
</p>
</section>
</div>

<div id="outline-container-org2900b35" class="outline-3">
<h3 id="org2900b35"><span class="section-number-3">4.5</span> Variable memory locations</h3>
<section class="outline-text-3" id="text-4-5">
<p>
We need to figure out where the variables declared in this block will
live and put that information into our symbol table. we will put all the
variables on the function stack:
</p>

<ol class="org-ol">
<li>Note that the stack and frame pointers are initialized to the base
of the stack.</li>
<li>Compute how many variables are being declared; call this <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-171-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4830" style="width: 1.069em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.903em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1000.9em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4831"><span class="mi" id="MathJax-Span-4832" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.888em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-171">N</script>.</li>
<li>Remember that each variable is a 4-byte integer, so we need <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-172-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4833" style="width: 1.644em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.396em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1001.4em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4834"><span class="mn" id="MathJax-Span-4835" style="font-family: MathJax_Main;">4</span><span class="mi" id="MathJax-Span-4836" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.888em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4</mn><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-172">4N</script>
bytes of space.</li>
<li>Advance the stack pointer by <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-173-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4837" style="width: 1.644em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.396em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.411em, 1001.4em, 2.34em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4838"><span class="mn" id="MathJax-Span-4839" style="font-family: MathJax_Main;">4</span><span class="mi" id="MathJax-Span-4840" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.048em; border-left: 0px solid; width: 0px; height: 0.888em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>4</mn><mi>N</mi></math></span></span><script type="math/tex" id="MathJax-Element-173">4N</script>, giving us a stack frame (from the
frame pointer to the stack pointer).</li>
<li>All variables are initialized to 0, so write 0 into each word of
the stack frame.</li>
<li>In the symbol table, map each declared variable to an offset from
the frame pointer.
<ul class="org-ul">
<li>Remember that the stack grows downward, so the offset will be
non-positive.</li>
</ul></li>
</ol>

<p>
We would have to worry about alignment and padding here except that
everything is a 4-byte integer so it all works out.
</p>

<p>
Now whenever we need to know where a variable is stored in memory, we
just look up the offset stored in the symbol table.
</p>
</section>
<ol class="org-ol">
<li><a id="org5e0325b"></a>Example<br>
<section class="outline-text-5" id="text-4-5-0-1">
<p>
Suppose we are generating the code to allocate the variables in the
following program:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;
<span style="color: #008b8b;">x</span> := 1 + 2;
<span style="color: #008b8b;">y</span> := x * 3;
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">y</span>;
</code></pre>

<p>
Here are the steps we take to generate the code and update the symbol
table. For these lecture notes, we are going to use <code>STACK_REG</code> for
the stack pointer register (<code>%esp</code> in x86), and <code>FRAME_REG</code> for the
frame pointer register (<code>%ebp</code> in x86). Also, in our notation,
<code>[register+offset]</code> means the address pointed to by the register's
value, and offset. For example, if <code>RR</code> contains the value <code>100</code>, then
<code>[RR+4]</code> would mean the memory location 100+4 = 104.
</p>

<ol class="org-ol">
<li><p>
There are 2 variables, increase stack by <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-174-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;&amp;#x00D7;&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;8&lt;/mn&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4841" style="width: 4.723em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.064em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.417em, 1004.02em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4842"><span class="mn" id="MathJax-Span-4843" style="font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-4844" style="font-family: MathJax_Main; padding-left: 0.222em;">×</span><span class="mn" id="MathJax-Span-4845" style="font-family: MathJax_Main; padding-left: 0.222em;">4</span><span class="mo" id="MathJax-Span-4846" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mn" id="MathJax-Span-4847" style="font-family: MathJax_Main; padding-left: 0.278em;">8</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.906em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>×</mo><mn>4</mn><mo>=</mo><mn>8</mn></math></span></span><script type="math/tex" id="MathJax-Element-174"> 2 \times 4 = 8 </script> bytes.
</p>

<p>
emit instruction: <code>sub 8 STACK_REG</code>
</p></li>

<li><p>
Initialize them both to 0.
</p>

<p>
emit instructions:
</p>
<pre class="code"><code><span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FRAME_REG-0]
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FRAME_REG-4]
</code></pre>

<p>
Note that <code>[FRAME_REG-n]</code> means take the value of <code>FRAME_REG</code>,
subtract n, and access that location in memory. The offsets are
non-positive because the stack grows downward (toward lower memory
addresses).
</p></li>

<li><p>
Add info to the symbol table:
</p>

<pre class="code"><code>x --&gt; 0   [i.e., x is at a 0 offset from the frame pointer]
y --&gt; -4  [i.e., x is at a -4 offset from the frame pointer]
</code></pre></li>
</ol>

<p>
We will do this each time we enter a new scope, and call this the
"preamble code" for that scope. In this example, the preamble code we
emit is:
</p>

<pre class="code"><code><span style="color: #0000ff;">sub</span> <span style="color: #a020f0;">8</span> STACK_REG
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FRAME_REG-0]
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FRAME_REG-4]
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-org14d845f" class="outline-3">
<h3 id="org14d845f"><span class="section-number-3">4.6</span> Expressions</h3>
<section class="outline-text-3" id="text-4-6">
<p>
We are targeting a register-based machine, but we do not want to do
register allocation (at least, for now) so we need to evaluate
expressions assuming a very limited set of available registers. to
generate code for an expression we will do a recursive traversal in
post-order (that is, visit the children first, then generate code for
the parent).
</p>
</section>

<div id="outline-container-orga1f4e15" class="outline-4">
<h4 id="orga1f4e15"><span class="section-number-4">4.6.1</span> Arithmetic</h4>
<section class="outline-text-4" id="text-4-6-1">
<p>
let's start with a simple example expression: <code>(1 + 2) * (3 - 4)</code>
</p>

<p>
as an AST, this is <code>[* [+ 1 2] [- 3 4]]</code>
</p>

<p>
Here is a scheme we might attempt (that will turn out to be broken):
when processing the *,+,- nodes we want the left subtree's value to
end in one register (let's call it LEFT<sub>REG</sub>) and the right subtree's
value to end in another (call it RIGHT<sub>REG</sub>). To generate code for this
example, we might try the following:
</p>

<pre class="code"><code>call generate_aexp(* node, left):
  call generate_aexp(+ node, left):
    call generate_aexp(1 node, left):
      emit "mov 1 LEFT_REG"
    call generate_aexp(2 node, right):
      emit "mov 2 RIGHT_REG"
    emit "add RIGHT_REG LEFT_REG"
 call generate_aexp(- node, right):
   call generate_aexp(3 node, left):
     emit "mov 3 LEFT_REG"
   call generate_aexp(4 node, right):
     emit "mov 4 RIGHT_REG"
   emit "sub RIGHT_REG LEFT_REG" "mov LEFT_REG RIGHT_REG"
 emit "mul RIGHT_REG LEFT_REG"
</code></pre>

<p>
The second parameter to <code>generate_aexp()</code> tells it which register the
result should end up in (we can pick arbitrarily for the root node of
the expression). the final emitted code is:
</p>

<pre class="code"><code><span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">1</span> LEFT_REG
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">2</span> RIGHT_REG
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">RIGHT</span>_REG LEFT_REG
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">3</span> LEFT_REG
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">4</span> RIGHT_REG
<span style="color: #0000ff;">sub</span> <span style="color: #a020f0;">RIGHT</span>_REG LEFT_REG
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">LEFT</span>_REG RIGHT_REG
<span style="color: #0000ff;">mul</span> <span style="color: #a020f0;">RIGHT</span>_REG LEFT_REG
</code></pre>

<p>
We see that there is a problem: Line 03 puts the result of the add in
LEFT<sub>REG</sub>, but then line 04 immediately overwrites it in order to set
up computing the result of <code>sub</code>. If we were doing a stack machine
this wouldn't matter because we do not need registers and we put the
new operands to the top of the stack. If we were doing register
allocation (as a separate stage) we could handle this by assuming that
there are an arbitrary number of registers available and then fix it
later. But we are not doing either of those things, so how do we handle
it?
</p>

<p>
The only thing that can store an arbitrary number of values is memory,
so we're going to have to create some memory locations to hold
temporary values during expression evaluation. In other words, we need
to add a set of temporary variables in addition to the other variables
declared in this scope. How do we know how many to add when we enter a
particular scope? We will dynamically add them to the symbol table as
we generate code for an expression. To keep our strategy simple, we
are going to keep track of the space needed for the current scope as
allocate temporaries, then, we will go back and update the code that
adjusts the stack pointer in the preamble code for this scope to
allocate memory only once.
</p>

<p>
Note that we can reuse temporary variables between different
expressions (e.g., for <code>x := &lt;aexp₁&gt;; y := &lt;aexp₂&gt;;</code> we only need
<code>max(#tmp(&lt;aexp₁&gt;), #tmp(&lt;aexp₂&gt;))</code> temporary variables.
</p>

<p>
Let's see how we can handle the above example now:
</p>

<pre class="code"><code>call generate_aexp(* node, tmp_num = 0):
  call generate_aexp(+ node, tmp_num = 1):
    call generate_aexp(1 node, tmp_num = 2):
      emit "mov 1 RESULT_REG"
    insert _tmp1 into symbol table
    emit "store RESULT_REG [_tmp1]"
    call generate_aexp(2 node, tmp_num = 2):
      emit "mov 2 RESULT_REG"
    emit "ld [_tmp1] OTHER_REG" "add OTHER_REG RESULT_REG"
    remove _tmp1 from symbol table
  insert _tmp0 into symbol table
  emit "store RESULT_REG [_tmp0]"
  call generate_aexp(- node, tmp_num = 1):
    insert _tmp1 into symbol table
    call generate_aexp(3 node, tmp_num = 2):
      emit "mov 3 RESULT_REG"
    emit "store RESULT_REG [_tmp1]"
    call generate_aexp(4 node, tmp_num = 2):
      emit "mov 4 RESULT_REG"
    emit "ld [_tmp1] OTHER_REG" "sub RESULT_REG OTHER_REG" "mov OTHER_REG RESULT_REG"
    remove _tmp1 from symbol table
  emit "ld [_tmp0] OTHER_REG" "mul OTHER_REG RESULT_REG"
  remove _tmp0 from symbol table
</code></pre>

<p>
Notice that each call to <code>generate_aexp</code> puts the result of that call
into RESULT<sub>REG</sub>, and because we're storing the intermediate results in
temporary variables we're never overwriting anything important. Also
notice that we can reuse temporary variables once we are done with
them (as we do above with <code>_tmp1</code>). When implementing code generation
for the assignment, the visitors would not carry the extra parameter
so you'd keep track of the temporary variable number (<code>tmp_num</code>) in
the code generator class.
</p>

<p>
The final emitted code is:
</p>

<pre class="code"><code><span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">1</span> RESULT_REG
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp1]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">2</span> RESULT_REG
<span style="color: #0000ff;">ld</span> [_tmp1] OTHER_REG
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">OTHER</span>_REG RESULT_REG
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp0]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">3</span> RESULT_REG
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp1]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">4</span> RESULT_REG
<span style="color: #0000ff;">ld</span> [_tmp1] OTHER_REG
<span style="color: #0000ff;">sub</span> <span style="color: #a020f0;">RESULT</span>_REG OTHER_REG
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">OTHER</span>_REG RESULT_REG
<span style="color: #0000ff;">ld</span> [_tmp0] OTHER_REG
<span style="color: #0000ff;">mul</span> <span style="color: #a020f0;">OTHER</span>_REG RESULT_REG
</code></pre>

<p>
In total we needed two temporary variables (<code>_tmp0</code> and <code>_tmp1</code>) and
so needed to add two entries to the symbol table and increase the
stack pointer by 8 bytes (remember that the stack pointer addition
happens at the beginning of the scope, so we need to go back to that
code and update it). note that we used the names <code>_tmp&lt;n&gt;</code>, which are
not valid variable names in our syntax, thus avoiding name clashes and
making it easy to tell which variables were created by the compiler vs
the user.
</p>

<p>
So now we have it working on an example; let's generalize the
algorithm for arbitrary arithmetic expressions:
</p>

<pre class="code"><code><span style="color: #0000ff;">generate_aexp</span>(<span style="color: #228b22;">AST</span>* <span style="color: #a0522d;">node</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tmp_num</span> = 0) {
  <span style="color: #a020f0;">if</span> (node is a <span style="color: #228b22;">constant</span> <span style="color: #228b22;">number</span> &lt;n&gt;) { emit <span style="color: #8b2252;">"mov &lt;n&gt; RESULT_REG"</span>; <span style="color: #a020f0;">return</span>; }
  <span style="color: #a020f0;">if</span> (node is <span style="color: #228b22;">a</span> <span style="color: #228b22;">variable</span> &lt;x&gt;) { emit <span style="color: #8b2252;">"ld [x] RESULT_REG"</span>; <span style="color: #a020f0;">return</span>; }

  <span style="color: #b22222;">// </span><span style="color: #b22222;">node must be one of +,-,*</span>
  generate_aexp(node-&gt;left, tmp_num+1);
  insert <span style="color: #228b22;">_tmp</span>&lt;tmp_num&gt; <span style="color: #a0522d;">into</span> symbol table;
  emit <span style="color: #8b2252;">"store RESULT_REG [_tmp&lt;tmp_num&gt;]"</span>;
  generate_aexp(node-&gt;right, tmp_num+1);
  emit <span style="color: #8b2252;">"ld [_tmp&lt;tmp_num&gt;] OTHER_REG"</span>;

  <span style="color: #b22222;">// </span><span style="color: #b22222;">left-hand value is in OTHER_REG, right-hand value is in RESULT_REG</span>
  <span style="color: #a020f0;">if</span> (<span style="color: #228b22;">node</span> <span style="color: #a0522d;">is</span> +) { emit <span style="color: #8b2252;">"add OTHER_REG RESULT_REG"</span>; <span style="color: #a020f0;">return</span>; }
  <span style="color: #a020f0;">if</span> (<span style="color: #228b22;">node</span> <span style="color: #a0522d;">is</span> -) { emit <span style="color: #8b2252;">"sub RESULT_REG OTHER_REG"</span>; emit <span style="color: #8b2252;">"mov OTHER_REG RESULT_REG"</span>; <span style="color: #a020f0;">return</span>; }
  emit <span style="color: #8b2252;">"mul OTHER_REG RESULT_REG"</span>;

  remove <span style="color: #228b22;">_tmp</span>&lt;tmp_num&gt; <span style="color: #a0522d;">from</span> symbol table;
}
</code></pre>

<p>
Remember, it's important that inserting a <i>new</i> temporary variable in
the symbol table <i>also</i> adjusts the amount by which the preamble code
for the enclosing scope adds to the stack pointer to create the stack
frame. However, we do not have to initialize the new memory locations
to 0 because we are guaranteed to always store a value to them before
reading them. Here, when we remove a temporary from the symbol table,
we need to adjust the next offset so the space it used to occupy
becomes available. With the way the recursive calls work for this
algorithm ensures that all the variables allocated between inserting
and removing _tmpN are removed before _tmpN is removed, so we can just
decrease the next offset field when removing a temporary variable.
</p>

<p>
Also, note that we use only 2 registers: the result register, and the
other register. We are going to use <code>%eax</code> and <code>%edx</code> for these in x86
code generation.
</p>
</section>

<ol class="org-ol">
<li><a id="orgdbe8833"></a>Exercise<br>
<section class="outline-text-5" id="text-4-6-1-1">
<p>
Generate code for the following expression:
</p>

<pre class="code"><code>((1 - 2) * (3 * 4)) + (5 - (6 + 7))
</code></pre>

<p>
The AST is:
</p>

<pre class="code"><code>[+ [* [- 1 2] [* 3 4]] [- 5 [+ 6 7]]
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code><span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">1</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">2</span> RR
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">sub</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp1]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">3</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">4</span> RR
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">mul</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">ld</span> [_tmp1] OR
<span style="color: #0000ff;">mul</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp0]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">5</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp1]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">6</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">7</span> RR
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">ld</span> [_tmp1] OR
<span style="color: #0000ff;">sub</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">ld</span> [_tmp0] OR
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">OR</span> RR
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-orgc254720" class="outline-4">
<h4 id="orgc254720"><span class="section-number-4">4.6.2</span> relational / logical</h4>
<section class="outline-text-4" id="text-4-6-2">
<p>
Now that we have handled arithmetic expressions, the relational
expressions are easy. The main thing we need to do is decide how to
represent the results of a relational expression (i.e., how do we
represent a Boolean). We will use the same method as c/c++: a 0 is
interpreted as false, a non-0 is interpreted as true. However, we are
going to guarantee that result of all relational expressions will be
only 0 or 1 (this makes implementing logical negation much easier on
x86).
</p>

<p>
Often assembly instructions that compare values store the results as a
flag rather than in a register, so we need to compensate for
that. let's look at an example:
</p>

<pre class="code"><code>(1 &lt; 2) &amp;&amp; ((3 &lt;= 4) || (5 = 6))
</code></pre>

<p>
as a tree this is:
</p>

<pre class="code"><code>[&amp;&amp; [&lt; 1 2] [|| [&lt;= 3 4] [= 5 6]]]
</code></pre>

<p>
So the process we want the code generator to go through is:
</p>

<pre class="code"><code>call generate_rexp(&amp;&amp; node, tmp_num = 0):
  call generate_rexp(&lt; node, tmp_num = 1):
    insert _tmp1 into symbol table
    call generate_aexp(1 node, tmp_num = 2)
    emit "store RESULT_REG [_tmp1]"
    call generate_aexp(2 node, tmp_num = 2)
    emit "ld [_tmp1] OTHER_REG" "cmp RESULT_REG OTHER_REG" "setlt RESULT_REG"
    remove _tmp1 from symbol table
  insert _tmp0 into symbol table
  emit "store RESULT_REG [_tmp0]"
  call generate_rexp(|| node, tmp_num = 1):
    insert _tmp1 into symbol table // does nothing
    call generate_rexp(&lt;= node, tmp_num = 2):
      insert _tmp2 into symbol table
      call generate_aexp(3, tmp_num = 3)
      emit "store RESULT_REG [_tmp2]"
      call generate_aexp(4, tmp_num = 3)
      emit "ld [_tmp2] OTHER_REG" "cmp RESULT_REG OTHER_REG" "setle RESULT_REG"
      remove _tmp2 from symbol table
    emit "store RESULT_REG [_tmp1]"
    call generate_rexp(= node, tmp_num = 2):
      insert _tmp2 into symbol table // does nothing
      call generate_aexp(5, tmp_num = 3)
      emit "store RESULT_REG [_tmp2]"
      call generate_aexp(6, tmp_num = 3)
      emit "ld [_tmp2] OTHER_REG" "cmp RESULT_REG OTHER_REG" "sete RESULT_REG"
      remove _tmp2 from symbol table
    emit "ld [_tmp1] OTHER_REG" "or OTHER_REG RESULT_REG"
    remove _tmp1 from symbol table
  emit "ld [_tmp0] OTHER_REG" "and OTHER_REG RESULT_REG"
  remove _tmp2 from symbol table
</code></pre>

<p>
and the final generated code is:
</p>

<pre class="code"><code>[code from generate_aexp]
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp1]
[code from generate_aexp]
<span style="color: #0000ff;">ld</span> [_tmp1] OTHER_REG
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RESULT</span>_REG OTHER_REG
<span style="color: #0000ff;">setlt</span> <span style="color: #a020f0;">RESULT</span>_REG
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp0]
[code from generate_aexp]
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp2]
[code from generate_aexp]
<span style="color: #0000ff;">ld</span> [_tmp2] OTHER_REG
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RESULT</span>_REG OTHER_REG
<span style="color: #0000ff;">setle</span> <span style="color: #a020f0;">RESULT</span>_REG
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp1]
[code from generate_aexp]
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RESULT</span>_REG [_tmp2]
[code from generate_aexp]
<span style="color: #0000ff;">ld</span> [_tmp2] OTHER_REG
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RESULT</span>_REG OTHER_REG
<span style="color: #0000ff;">sete</span> <span style="color: #a020f0;">RESULT</span>_REG
<span style="color: #0000ff;">ld</span> [_tmp1] OTHER_REG
<span style="color: #0000ff;">or</span> <span style="color: #a020f0;">OTHER</span>_REG RESULT_REG
<span style="color: #0000ff;">ld</span> [_tmp0] OTHER_REG
<span style="color: #0000ff;">and</span> <span style="color: #a020f0;">OTHER</span>_REG RESULT_REG
</code></pre>

<p>
Note that you need to generate slightly different code for x86
(because of the peculiarities of the architecture). It's basically
like the arithmetic expressions except that the comparison
instructions set a condition flag, which we then need to read in order
to set a register. So the <code>generate_rexp</code> code is:
</p>

<pre class="code"><code><span style="color: #0000ff;">generate_rexp</span>(<span style="color: #228b22;">AST</span>* <span style="color: #a0522d;">node</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">tmp_num</span> = 0) {
  <span style="color: #a020f0;">if</span> (node is <span style="color: #228b22;">a</span> <span style="color: #a0522d;">comparison</span>) {
    generate_aexp(node-&gt;left, tmp_num+1);
    insert <span style="color: #228b22;">_tmp</span>&lt;tmp_num&gt; <span style="color: #a0522d;">into</span> symbol table;
    emit <span style="color: #8b2252;">"store RESULT_REG [_tmp&lt;tmp_num&gt;]"</span>;
    generate_aexp(node-&gt;right, tmp_num+1);
    emit <span style="color: #8b2252;">"ld [_tmp&lt;tmp_num&gt;] OTHER_REG"</span>;
    emit <span style="color: #8b2252;">"cmp RESULT_REG OTHER_REG"</span>;
    emit <span style="color: #8b2252;">"set&lt;op&gt; RESULT_REG"</span> <span style="color: #b22222;">// </span><span style="color: #b22222;">&lt;op&gt; is {e,lt,le} depending on the comparison being made</span>
    remove <span style="color: #228b22;">_tmp</span>&lt;tmp_num&gt; from symbol table;
  } <span style="color: #a020f0;">else</span> {
    generate_rexp(node-&gt;left, tmp_num+1);
    insert <span style="color: #228b22;">_tmp</span>&lt;tmp_num&gt; <span style="color: #a0522d;">into</span> symbol table;
    emit <span style="color: #8b2252;">"store RESULT_REG [_tmp&lt;tmp_num&gt;]"</span>;
    generate_rexp(node-&gt;right, tmp_num+1);
    emit <span style="color: #8b2252;">"ld [_tmp&lt;tmp_num&gt;] OTHER_REG"</span>;
    emit <span style="color: #8b2252;">"&lt;op&gt; OTHER_REG RESULT_REG"</span> <span style="color: #b22222;">// </span><span style="color: #b22222;">&lt;op&gt; is {and,or} depending on the node</span>
    remove <span style="color: #228b22;">_tmp</span>&lt;tmp_num&gt; from symbol table;
  }
}
</code></pre>
</section>

<ol class="org-ol">
<li><a id="orgf2aa009"></a>Exercise<br>
<section class="outline-text-5" id="text-4-6-2-1">
<p>
Generate code for the following expression:
</p>

<pre class="code"><code>((1 = 2) || ((3 &lt; 4) &amp;&amp; (5 &lt;= 6))) &amp;&amp; ((7 &lt; 8) || (9 = 9))
</code></pre>

<p>
The AST is:
</p>

<pre class="code"><code>[&amp;&amp; [|| [= 1 2] [&amp;&amp; [&lt; 3 4] [&lt;= 5 6]]] [|| [&lt; 7 8] [= 9 9]]
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code><span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">1</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">2</span> RR
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">sete</span> <span style="color: #a020f0;">RR</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp1]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">3</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp3]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">4</span> RR
<span style="color: #0000ff;">ld</span> [_tmp3] OR
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">setlt</span> <span style="color: #a020f0;">RR</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">5</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp3]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">6</span> RR
<span style="color: #0000ff;">ld</span> [_tmp3] OR
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">setle</span> <span style="color: #a020f0;">RR</span>
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">and</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">ld</span> [_tmp1] OR
<span style="color: #0000ff;">or</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp0]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">7</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">8</span> RR
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">setlt</span> <span style="color: #a020f0;">RR</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp1]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">9</span> RR
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [_tmp2]
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">9</span> RR
<span style="color: #0000ff;">ld</span> [_tmp2] OR
<span style="color: #0000ff;">cmp</span> <span style="color: #a020f0;">RR</span> OR
<span style="color: #0000ff;">sete</span> <span style="color: #a020f0;">RR</span>
<span style="color: #0000ff;">ld</span> <span style="color: #a020f0;">OR</span> [_tmp1]
<span style="color: #0000ff;">or</span> <span style="color: #a020f0;">OR</span> RR
<span style="color: #0000ff;">ld</span> [_tmp0] OR
<span style="color: #0000ff;">and</span> <span style="color: #a020f0;">OR</span> RR
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-orgcc9061f" class="outline-4">
<h4 id="orgcc9061f"><span class="section-number-4">4.6.3</span> Short-circuiting evaluation</h4>
<section class="outline-text-4" id="text-4-6-3">
<p>
It can be wasteful to evaluate an entire logical expression if we
already know the answer part-way through (and even harmful if the
remainder of the expression has side-effects like it does in
C). consider the following C expression:
</p>

<p>
if (ptr != NULL &amp;&amp; *ptr == 42) { … }
</p>

<p>
clearly if ptr <i>is</i> NULL we do not want to dereference it. This is
called <i>short-circuited</i> evaluation:
</p>
<ul class="org-ul">
<li>given <code>&lt;lhs&gt; &amp;&amp; &lt;rhs&gt;</code>, if <code>&lt;lhs&gt;</code> is false then we do not need to evaluate <code>&lt;rhs&gt;</code>.</li>
<li>given <code>&lt;lhs&gt; || &lt;rhs&gt;</code>, if <code>&lt;lhs&gt;</code> is true then we do not need to evaluate <code>&lt;rhs&gt;</code>.</li>
</ul>

<p>
Our language C♭ doesn't allow these kinds of expressions currently, but 
we should understand how to implement it. the basic idea is simple: we 
have to insert a conditional into the middle of the expression 
evaluation. When evaluating a &amp;&amp; (or ||) node, after evaluating 
the left-hand side we emit instructions to check whether the result is 
false (or true) and if so then jump past the evaluation of the 
right-hand side. We will save the details for when we discuss generating
 code for conditionals.
</p>
</section>
</div>
</div>

<div id="outline-container-org65202fb" class="outline-3">
<h3 id="org65202fb"><span class="section-number-3">4.7</span> Assignments</h3>
<section class="outline-text-3" id="text-4-7">
<p>
Assignment is trivial: we evaluate the right-hand side using
<code>generate_aexp</code>, which puts the result in <code>RESULT_REG</code>, then store the
result to the memory location for the left-hand side variable.
</p>

<pre class="code"><code><span style="color: #0000ff;">generate_assign</span>(lhs, rhs) {
  generate_aexp(rhs);
  emit <span style="color: #8b2252;">"store RR [lhs]"</span>;
}
</code></pre>
</section>
</div>

<div id="outline-container-orge206361" class="outline-3">
<h3 id="orge206361"><span class="section-number-3">4.8</span> Conditionals</h3>
<section class="outline-text-3" id="text-4-8">
<p>
We are going to cover conditionals first without a nested scope, then
extend the code generation scheme for them with nested scopes.
</p>
</section>

<div id="outline-container-orgc35583a" class="outline-4">
<h4 id="orgc35583a"><span class="section-number-4">4.8.1</span> No nested scope</h4>
<section class="outline-text-4" id="text-4-8-1">
<p>
Let's look at an example:
</p>

<pre class="code"><code><span style="color: #a020f0;">if</span> (x &lt; <span style="color: #008b8b;">2</span>) { x := <span style="color: #008b8b;">1</span>; } <span style="color: #a020f0;">else</span> { x := <span style="color: #008b8b;">2</span>; }
</code></pre>

<p>
Depending on the outcome of the comparison, we want to execute either
the true branch or the false branch. We do not necessarily know the
outcome of the comparison at compile time, so we need to emit code for
both branches and choose between them at runtime.
</p>

<p>
For the above example we would get (here, <code>IF_FALSE_0</code> etc. are
labels):
</p>

<pre class="code"><code>    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setlt</span> RR
    <span style="color: #a020f0;">cmp</span> 0 RR
    <span style="color: #a020f0;">jmpe</span> IF_FALSE_0
    <span style="color: #a020f0;">mov</span> 1 RR
    <span style="color: #a020f0;">store</span> RR [x]
    <span style="color: #a020f0;">jmp</span> IF_END_0
<span style="color: #0000ff;">IF_FALSE_0</span>:
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">store</span> RR [x]
<span style="color: #0000ff;">IF_END_0</span>:
</code></pre>

<p>
Note again the inefficiency of the code generator. We could be a bit
more clever and do things like check whether our left and/or right
operands are leaves and if so avoid some stores and loads, which would
be better code. But we are keeping things simple so that the code
generator only has to look at the current AST node and nothing else.
</p>

<p>
Generalizing it to arbitrary conditionals, we get:
</p>

<pre class="code"><code><span style="color: #0000ff;">generate_if</span>(node) {
  &lt;n&gt; = fresh index;
  generate_rexp(node-&gt;guard);
  emit <span style="color: #8b2252;">"cmp 0 RESULT_REG"</span>;
  emit <span style="color: #8b2252;">"jmpe IF_FALSE_&lt;n&gt;"</span>;
  generate_block(node-&gt;true_branch);
  emit <span style="color: #8b2252;">"jmp IF_END_&lt;n&gt;"</span>;
  emit <span style="color: #8b2252;">"IF_FALSE_&lt;n&gt;:"</span>;
  generate_block(node-&gt;false_branch);
  emit <span style="color: #8b2252;">"IF_END_&lt;n&gt;:"</span>;
}
</code></pre>
</section>
</div>

<div id="outline-container-org37b3a5d" class="outline-4">
<h4 id="org37b3a5d"><span class="section-number-4">4.8.2</span> Adding nested scope</h4>
<section class="outline-text-4" id="text-4-8-2">
<p>
Remember that each branch of a conditional introduces a new scope
which can declare its own variables. That means that we need to emit
the preamble code again when the code generator enters that new scope:
</p>

<ol class="org-ol">
<li>see how many declared variables there are</li>
<li>adjust the stack pointer accordingly</li>
<li>initialize the new memory locations to 0</li>
<li>update symbol table to map the newly declared variables to their offsets</li>
</ol>

<p>
and when we leave the new scope we need to adjust things back the way
they were:
</p>
<ol class="org-ol">
<li>reset the stack pointer to its old position</li>
<li>restore the symbol table to its old value</li>
</ol>

<p>
So, the code generator for the blocks of code inside the true/false
branches would look something like:
</p>

<pre class="code"><code><span style="color: #0000ff;">generate_block</span>(node) {
  old_symbol_table = symbol_table;
  stack_size = node-&gt;num_declared_variables * 4; <span style="color: #b22222;">// </span><span style="color: #b22222;">because 4-byte integers</span>
  emit <span style="color: #8b2252;">"sub &lt;stack_size&gt; STACK_REG"</span>;
  insert_in_symbol_table(symbol_table, node-&gt;declared_variables);
  <span style="color: #a020f0;">for</span> each var in node-&gt;declared_variables { emit <span style="color: #8b2252;">"store 0 [var]"</span>; }
  .
  .
  .
  emit <span style="color: #8b2252;">"add &lt;stack_size&gt; STACK_REG"</span>;
  symbol_table = old_symbol_table;
}
</code></pre>

<p>
Remember that we cannot just take the existing symbol table and add
the declared variables to it and then remove them when the block is
over, because some of them could shadow existing variables in the
enclosing scope. You can get around that problem in various ways
(e.g., making the symbol table a stack instead of a map, where lookup
scans the stack top-down looking for the nearest declared variable
with the given name). For the purposes of this pseudocode, we just
always pass a copy of the symbol table to each branch.
</p>

<p>
Another consideration is that an expression inside a nested scope may
require more temporary variables than any expression in an enclosing
block. If so, then we need to backpatch the preamble code for the
nested scope to allocate more space for those temporary variables.
</p>

<p>
Example:
</p>

<pre class="code"><code><span style="color: #a020f0;">if</span> (y &lt; 2) { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>; <span style="color: #008b8b;">x</span> := x + (1 + 2); <span style="color: #008b8b;">y</span> := x; }
</code></pre>

<p>
assume this conditional is the only statement. Then the generated code
would be:
</p>

<pre class="code"><code>    <span style="color: #a020f0;">ld</span> [y] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0] <span style="color: #b22222;">// </span><span style="color: #b22222;">note that this _tmp0 is outside the nested scope</span>
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setlt</span> RR
    <span style="color: #a020f0;">cmp</span> 0 RR
    <span style="color: #a020f0;">jmpe</span> IF_FALSE_0
    <span style="color: #a020f0;">sub</span> 8 SR <span style="color: #b22222;">// </span><span style="color: #b22222;">space for 'x' and '_tmp1'</span>
    <span style="color: #a020f0;">store</span> 0 [x] <span style="color: #b22222;">// </span><span style="color: #b22222;">initialize x</span>
    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0] <span style="color: #b22222;">// </span><span style="color: #b22222;">reuse _tmp0 from enclosing scope</span>
    <span style="color: #a020f0;">mov</span> 1 RR
    <span style="color: #a020f0;">store</span> RR [_tmp1]
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">ld</span> [_tmp1] OR
    <span style="color: #a020f0;">add</span> OR RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">add</span> OR RR
    <span style="color: #a020f0;">store</span> RR [x]
    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [y]
    <span style="color: #a020f0;">add</span> 8 SR <span style="color: #b22222;">// </span><span style="color: #b22222;">remove space for nested declarations</span>
    <span style="color: #a020f0;">jmp</span> IF_END_0
<span style="color: #0000ff;">IF_FALSE_0</span>:
<span style="color: #0000ff;">IF_END_0</span>:
</code></pre>

<p>
Notice that we have allocated the space for both the local variables
in the scope and the temporaries at once.
</p>
</section>
</div>

<div id="outline-container-org75a7038" class="outline-4">
<h4 id="org75a7038"><span class="section-number-4">4.8.3</span> Exercise 1</h4>
<section class="outline-text-4" id="text-4-8-3">
<p>
Generate code for the following program (fully, including preamble
code and all expressions and statements):
</p>

<pre class="code"><code><span style="color: #a020f0;">if</span> (1 &lt; 2) { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>; <span style="color: #008b8b;">x</span> := y; } <span style="color: #a020f0;">else</span> { <span style="color: #008b8b;">x</span> := 2; }
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code>    <span style="color: #a020f0;">mov</span> 1 RR
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setlt</span> RR
    <span style="color: #a020f0;">cmp</span> 0 RR
    <span style="color: #a020f0;">jmpe</span> IF_FALSE_0
    <span style="color: #a020f0;">sub</span> 4 SR
    <span style="color: #a020f0;">store</span> 0 [y]
    <span style="color: #a020f0;">ld</span> [y] RR
    <span style="color: #a020f0;">store</span> RR [x]
    <span style="color: #a020f0;">add</span> 4 SR
    <span style="color: #a020f0;">jmp</span> IF_END_0
<span style="color: #0000ff;">IF_FALSE_0</span>:
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">store</span> RR [x]
<span style="color: #0000ff;">IF_END_0</span>:
</code></pre>
</section>
</div>

<div id="outline-container-orgb951fd6" class="outline-4">
<h4 id="orgb951fd6"><span class="section-number-4">4.8.4</span> Exercise 2 (short-circuited evaluation)</h4>
<section class="outline-text-4" id="text-4-8-4">
<p>
Generate code for the following relational expression using
short-circuiting:
</p>

<pre class="code"><code>(1 &lt; 1) &amp;&amp; (2 &lt; 3)
</code></pre>

<p>
AST:
</p>

<pre class="code"><code>[&amp;&amp; [&lt; 1 1] [&lt; 2 3]]
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code>    <span style="color: #a020f0;">mov</span> 1 RR
    <span style="color: #a020f0;">store</span> RR [_tmp1]
    <span style="color: #a020f0;">mov</span> 1 RR
    <span style="color: #a020f0;">ld</span> [_tmp1] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setlt</span> RR
    <span style="color: #a020f0;">cmp</span> 0 RR
    <span style="color: #a020f0;">jmpe</span> REXP_END_0
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">store</span> RR [_tmp1]
    <span style="color: #a020f0;">mov</span> 3 RR
    <span style="color: #a020f0;">ld</span> [_tmp1] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setlt</span> RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">and</span> OR RR
<span style="color: #0000ff;">REXP_END_0</span>:
</code></pre>
</section>
</div>
</div>

<div id="outline-container-org807111f" class="outline-3">
<h3 id="org807111f"><span class="section-number-3">4.9</span> Loops</h3>
<section class="outline-text-3" id="text-4-9">
<p>
We are going to handle <code>while</code> loops first, then modify our solution for
them to get the solution for <code>for</code> loops.
</p>
</section>

<div id="outline-container-org25714e5" class="outline-4">
<h4 id="org25714e5"><span class="section-number-4">4.9.1</span> While loops</h4>
<section class="outline-text-4" id="text-4-9-1">
<p>
Loops are a lot like conditionals except the <code>true branch</code> is the body
of the loop and the <code>false branch</code> is the end of the loop. Let's see
an example:
</p>

<pre class="code"><code><span style="color: #a020f0;">while</span> (x &lt; 3) { <span style="color: #008b8b;">x</span> := x + 1; }
</code></pre>

<p>
So, for the above example, we would get:
</p>

<pre class="code"><code><span style="color: #0000ff;">WHILE_START_0</span>:
    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">mov</span> 3 RR
    <span style="color: #a020f0;">ld</span> [x] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setlt</span> RR
    <span style="color: #a020f0;">cmp</span> 0 RR
    <span style="color: #a020f0;">jmpe</span> WHILE_END_0
    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">mov</span> 1 RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">add</span> OR RR
    <span style="color: #a020f0;">store</span> RR [x]
    <span style="color: #a020f0;">jmp</span> WHILE_START_0
<span style="color: #0000ff;">WHILE_END_0</span>:
</code></pre>

<p>
Generalizing for arbitrary while loops:
</p>

<pre class="code"><code><span style="color: #0000ff;">generate_while</span>(node) {
  &lt;n&gt; = fresh index;
  emit <span style="color: #8b2252;">"WHILE_START_&lt;n&gt;:"</span>;
  generate_rexp(node-&gt;guard);
  emit <span style="color: #8b2252;">"cmp 0 RESULT_REG"</span>;
  emit <span style="color: #8b2252;">"jmpe WHILE_END_&lt;n&gt;"</span>;
  generate_block(node-&gt;body);
  emit <span style="color: #8b2252;">"jmp WHILE_START_&lt;n&gt;"</span>;
  emit <span style="color: #8b2252;">"WHILE_END_&lt;n&gt;:"</span>;
}
</code></pre>
</section>

<ol class="org-ol">
<li><a id="org46e30c8"></a>Nested scope<br>
<section class="outline-text-5" id="text-4-9-1-1">
<p>
We have the same issue here with nested scope as for conditionals,
though there's only one new scope: the body of the loop. We handle it
exactly the same way. Note that for loops the body can be entered many
times; the preamble and cleanup code for the new scope will be
executed each time. However, they are similar to the preamble and
cleanup code for conditionals.
</p>
</section>
</li>

<li><a id="org7f2518a"></a>Exercise<br>
<section class="outline-text-5" id="text-4-9-1-2">
<p>
Generate code for the following program (fully, including all preamble
code, expressions, and statements):
</p>

<pre class="code"><code><span style="color: #a020f0;">while</span> (x &lt;= 10) { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>; <span style="color: #008b8b;">y</span> := 2; <span style="color: #008b8b;">x</span> := x + y; }
</code></pre>

<p>
Solution:
</p>

<pre class="code"><code><span style="color: #0000ff;">WHILE_START_0</span>:
    <span style="color: #b22222;">// </span><span style="color: #b22222;">code for the loop guard</span>
    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">mov</span> 10 RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">cmp</span> RR OR
    <span style="color: #a020f0;">setle</span> RR
    <span style="color: #a020f0;">cmp</span> 0 RR
    <span style="color: #a020f0;">jmpe</span> WHILE_END_0
    <span style="color: #b22222;">// </span><span style="color: #b22222;">code for the loop body, notice the preamble and cleanup</span>
    <span style="color: #a020f0;">sub</span> 4 SR
    <span style="color: #a020f0;">store</span> 0 [y]
    <span style="color: #a020f0;">mov</span> 2 RR
    <span style="color: #a020f0;">store</span> RR [y]
    <span style="color: #a020f0;">ld</span> [x] RR
    <span style="color: #a020f0;">store</span> RR [_tmp0]
    <span style="color: #a020f0;">ld</span> [y] RR
    <span style="color: #a020f0;">ld</span> [_tmp0] OR
    <span style="color: #a020f0;">add</span> OR RR
    <span style="color: #a020f0;">store</span> RR [x]
    <span style="color: #a020f0;">add</span> 4 SR
    <span style="color: #a020f0;">jmp</span> WHILE_START_0
<span style="color: #0000ff;">WHILE_END_0</span>:
</code></pre>
</section>
</li>
</ol>
</div>

<div id="outline-container-org7cb59a0" class="outline-4">
<h4 id="org7cb59a0"><span class="section-number-4">4.9.2</span> For loops</h4>
<section class="outline-text-4" id="text-4-9-2">
<p>
Firstly, let's look at how to rewrite a <code>for</code> loop in terms of <code>while</code>
loops and extra scopes (our language does not have free blocks so we
are writing in a mix of our language and C below). Here is our for loop:
</p>

<pre class="code"><code><span style="color: #a020f0;">for</span> x from 1 to y * 2 {
<span style="color: #008b8b;">y</span> := x + y;
}
</code></pre>

<p>
In our language, we mean by the loop above that <code>x</code> is going to take
values <code>1</code> through <code>y</code> inclusively (it will take values <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-175-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4848" style="width: 9.115em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.841em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.428em, 1007.84em, 2.545em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-4849"><span class="mn" id="MathJax-Span-4850" style="font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-4851" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-4852" style="font-family: MathJax_Main; padding-left: 0.167em;">2</span><span class="mo" id="MathJax-Span-4853" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-4854" style="font-family: MathJax_Main; padding-left: 0.167em;">…</span><span class="mo" id="MathJax-Span-4855" style="font-family: MathJax_Main; padding-left: 0.167em;">,</span><span class="mn" id="MathJax-Span-4856" style="font-family: MathJax_Main; padding-left: 0.167em;">2</span><span class="mi" id="MathJax-Span-4857" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span><span class="mo" id="MathJax-Span-4858" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mn" id="MathJax-Span-4859" style="font-family: MathJax_Main; padding-left: 0.222em;">1</span><span class="mo" id="MathJax-Span-4860" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-4861" style="font-family: MathJax_Main; padding-left: 0.167em;">2</span><span class="mi" id="MathJax-Span-4862" style="font-family: MathJax_Math; font-style: italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.006em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.285em; border-left: 0px solid; width: 0px; height: 1.106em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mo>…</mo><mo>,</mo><mn>2</mn><mi>y</mi><mo>−</mo><mn>1</mn><mo>,</mo><mn>2</mn><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-175">
1,2,\ldots,2y-1,2y</script> ). Also, notice that we are updating <code>y</code> inside
the loop, this could change the loop range in other languages, but we
want the loop range to be computed only once so manipulating <code>y</code>
inside the loop does not cause any unexpected behavior such as causing
an infinite loop above. However, we are going to allow <code>x</code> to be
manipulated inside the for loop to keep code generation simple. Here
is the code above written in terms of a while loop:
</p>

<pre class="code"><code>{ <span style="color: #b22222;">// </span><span style="color: #b22222;">create a new scope</span>
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">declare x</span>

<span style="color: #008b8b;">x</span> := 1; <span style="color: #b22222;">// </span><span style="color: #b22222;">initialize x to loop start value</span>

<span style="color: #008b8b;">_tmpLoopEnd</span> := y * 2; <span style="color: #b22222;">// </span><span style="color: #b22222;">create a temporary and store the loop end value there</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">create a loop for incrementing x</span>
<span style="color: #a020f0;">while</span> x &lt;= _tmpLoopEnd {
<span style="color: #b22222;">// </span><span style="color: #b22222;">insert the body of the for loop</span>
<span style="color: #008b8b;">y</span> := x + y;

<span style="color: #b22222;">// </span><span style="color: #b22222;">insert the code to increment x</span>
<span style="color: #008b8b;">x</span> := x + 1;
}
<span style="color: #b22222;">// </span><span style="color: #b22222;">close the scope</span>
}
</code></pre>

<p>
We are going to generate assembly code similar to the code above,
however, we are going to go through some optimizations in our assembly
code:
</p>
<ul class="org-ul">
<li>We do not need to initialize <code>x</code> to be <code>0</code> like other declarations,
because it is immediately overwritten by the start value.</li>
<li>We are going to increment <code>x</code> without a temporary variable, using a
load, add, and store (the code for <code>x := x + 1</code> would be more
verbose).</li>
<li>We are also going to generate the code for the comparison efficiently</li>
</ul>

<p>
Also, we are now creating a scope outside the loop for <code>x</code> and
<code>_tmpLoopEnd</code> so we need to access the symbol table. Here is the
assembly code we are going to generate the loop above:
</p>

<pre class="code"><code>  <span style="color: #b22222;">// </span><span style="color: #b22222;">allocate space for x, tmpLoopEnd, and the temporaries needed for</span>
  <span style="color: #b22222;">// </span><span style="color: #b22222;">the loop start and end expressions</span>
  <span style="color: #a020f0;">sub</span> 12 SR 
  <span style="color: #a020f0;">move</span> 1 RR <span style="color: #b22222;">// </span><span style="color: #b22222;">code for loop start "1"</span>
  <span style="color: #a020f0;">store</span> RR [x] <span style="color: #b22222;">// </span><span style="color: #b22222;">store the loop start in [x]</span>
  <span style="color: #b22222;">// </span><span style="color: #b22222;">code for loop end "y * 2"</span>
  <span style="color: #a020f0;">load</span> [y] RR
  <span style="color: #a020f0;">store</span> RR [_tmp1]
  <span style="color: #a020f0;">move</span> 2 RR
  <span style="color: #a020f0;">load</span> [_tmp1] OR
  <span style="color: #a020f0;">mul</span> OR RR
  <span style="color: #b22222;">// </span><span style="color: #b22222;">store the result in _tmpLoopEnd</span>
  <span style="color: #a020f0;">move</span> RR [_tmpLoopEnd]
<span style="color: #0000ff;">FOR_GUARD_0</span>: <span style="color: #b22222;">// </span><span style="color: #b22222;">label to jump back to the loop guard</span>
  <span style="color: #b22222;">// </span><span style="color: #b22222;">code for computing x &lt;= _tmpLoopEnd</span>
  <span style="color: #a020f0;">load</span> [x] RR
  <span style="color: #a020f0;">load</span> [_tmpLoopEnd] OR
  <span style="color: #a020f0;">cmp</span> OR RR
  <span style="color: #a020f0;">jmpg</span> FOR_END_0 <span style="color: #b22222;">// </span><span style="color: #b22222;">jump to the end if x &gt; _tmpLoopEnd</span>
  <span style="color: #b22222;">// </span><span style="color: #b22222;">the code for the body of the loop</span>
  [the code for y := x + y]
  <span style="color: #b22222;">// </span><span style="color: #b22222;">increment x then jump to the guard</span>
  <span style="color: #a020f0;">load</span> [x] RR
  <span style="color: #a020f0;">add</span> 1 RR
  <span style="color: #a020f0;">store</span> RR [x]
  <span style="color: #a020f0;">jmp</span> FOR_GUARD_0
<span style="color: #0000ff;">FOR_END_0</span>:
  <span style="color: #b22222;">// </span><span style="color: #b22222;">clean-up code for the scope of the for loop</span>
  <span style="color: #a020f0;">add</span> 12 SR
</code></pre>

<p>
We can now generalize the code above to an arbitrary for loop. One
important detail that we need to pay attention to is that we need to
account for temporaries when allocating the outer stack space. We also
generate the temporary variable for the loop end value just like any
other variable. Here is the pseudo-code for generating for loops:
</p>

<pre class="code"><code><span style="color: #0000ff;">generateFor</span>(loop) {
symbolTable.createScope();
emit <span style="color: #8b2252;">"sub 4 SR"</span>; <span style="color: #b22222;">// </span><span style="color: #b22222;">a place-holder instruction for allocating space</span>
alloc_insn &lt;- &amp;last_instruction; <span style="color: #b22222;">// </span><span style="color: #b22222;">remember the last instruction so we</span>
                                <span style="color: #b22222;">// </span><span style="color: #b22222;">can modify it with the correct</span>
                                <span style="color: #b22222;">// </span><span style="color: #b22222;">space later</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">Add loop variable and loop end to the symbol table</span>
symbolTable.insert(loop-&gt;loopVar);
tmpLoopEnd &lt;- symbolTable.freshTmp;
<span style="color: #b22222;">// </span><span style="color: #b22222;">Initialize loop variable and loop end</span>
genAexp(loop-&gt;from);
emit <span style="color: #8b2252;">"store RR [loopVar]"</span>
genAexp(loop-&gt;to);
emit <span style="color: #8b2252;">"store RR [tmpLoopEnd]"</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">generate the loop guard code</span>
N &lt;- fresh index
emit <span style="color: #8b2252;">"FOR_GUARD_&lt;N&gt;:"</span>
emit <span style="color: #8b2252;">"  load [x] RR"</span>
emit <span style="color: #8b2252;">"  load [_tmpLoopEnd] OR"</span>
emit <span style="color: #8b2252;">"  cmp OR RR"</span>
emit <span style="color: #8b2252;">"  jmpg FOR_END_&lt;N&gt;"</span>

generateBlock(loop-&gt;body);
<span style="color: #b22222;">// </span><span style="color: #b22222;">increment x then jump to the guard</span>
emit <span style="color: #8b2252;">"load [x] RR"</span>
emit <span style="color: #8b2252;">"add 1 RR"</span>
emit <span style="color: #8b2252;">"store RR [x]"</span>
emit <span style="color: #8b2252;">"jmp FOR_GUARD_&lt;N&gt;"</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">mark the end of the loop body</span>
emit <span style="color: #8b2252;">"FOR_END_&lt;N&gt;"</span>

<span style="color: #b22222;">// </span><span style="color: #b22222;">re-calculate the space needed for this scope (this can be done</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">before the body as well)</span>
size_needed &lt;- symbolTable.maxSizeForCurrScope * 4
update alloc_insn to <span style="color: #8b2252;">"sub &lt;size_needed&gt; SR"</span>
<span style="color: #b22222;">// </span><span style="color: #b22222;">reclaim the stack space</span>
<span style="color: #8b2252;">"add &lt;size_needed&gt; SR"</span>
}
</code></pre>
</section>
</div>
</div>

<div id="outline-container-org2bdbb19" class="outline-3">
<h3 id="org2bdbb19"><span class="section-number-3">4.10</span> Implementing functions and calls</h3>
<section class="outline-text-3" id="text-4-10">
<p>
Functions (also called procedures in some programming languages) are
an illusion: they exist as a programming language abstraction, but the
actual machine has no notion of a function. On the machine, we have
only jumps, conditionals, registers, and the memory. However,
functions are an extremely valuable illusion for programmers:
</p>

<ol class="org-ol">
<li><p>
they allow code to be abstracted over the data the code is run
on. for example:
</p>

<pre class="code"><code><span style="color: #b22222;">// </span><span style="color: #b22222;">imagine that these are complicated expressions</span>
(1 + 2) * 2
(3 + 4) * 4

<span style="color: #b22222;">// </span><span style="color: #b22222;">procedural abstraction:</span>
<span style="color: #228b22;">int</span> proc(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) { <span style="color: #a020f0;">return</span> (a + b) * b; }
</code></pre></li>

<li><p>
If the language has higher-order functions (functions that can
take, create, and return functions like ordinary values), they also
allow code to be abstracted over control-flow. For example, if our
language had that feature, we could have a sort function that was
independent of the comparison metric:
</p>

<pre class="code"><code>list <span style="color: #a020f0;">=</span> [<span style="color: #008b8b;">4</span>, <span style="color: #008b8b;">2</span>, <span style="color: #008b8b;">6</span>, <span style="color: #008b8b;">1</span>, <span style="color: #008b8b;">5</span>, <span style="color: #008b8b;">3</span>];
sort(list, (a, b) <span style="color: #a020f0;">=&gt;</span> { <span style="color: #a020f0;">return</span> a &lt; b; }) <span style="color: #a020f0;">:</span> [<span style="color: #008b8b;">1</span>, <span style="color: #008b8b;">2</span>, <span style="color: #008b8b;">3</span>, <span style="color: #008b8b;">4</span>, <span style="color: #008b8b;">5</span>, <span style="color: #008b8b;">6</span>]
sort(list, (a, b) <span style="color: #a020f0;">=&gt;</span> { <span style="color: #a020f0;">return</span> a &gt; b; }) <span style="color: #a020f0;">:</span> [<span style="color: #008b8b;">6</span>, <span style="color: #008b8b;">5</span>, <span style="color: #008b8b;">4</span>, <span style="color: #008b8b;">3</span>, <span style="color: #008b8b;">2</span>, <span style="color: #008b8b;">1</span>]
</code></pre></li>

<li>They provide modularity: code can be written and compiled
independently but still linked together and run
correctly. Function bodies are isolated from each other by
different scopes.</li>
</ol>

<p>
The compiler's job is to take this abstraction and turn it into
assembly code that preserves the intended meaning of the procedure
abstraction. What is that intended meaning? In other words, what
happens when a function is called?
</p>

<ol class="org-ol">
<li>The callee gets fresh instances of its parameters and local
variables (local scope, even in the presence of recursion).</li>
<li>The argument values are copied to the parameters.</li>
<li>Control jumps to the beginning of the callee.</li>
<li>The callee is executed.</li>
<li>Control jumps back to the caller site.</li>
<li>If the function returns something, the return value is provided as
the result of the function call expression.</li>
</ol>

<p>
The basic tools we use to achieve this execution are:
</p>
<ol class="org-ol">
<li>The stack frame (or activation record)</li>
<li>Calling conventions</li>
</ol>
</section>

<div id="outline-container-orgb94b08a" class="outline-4">
<h4 id="orgb94b08a"><span class="section-number-4">4.10.1</span> A note about function scope in C♭</h4>
<section class="outline-text-4" id="text-4-10-1">
<p>
There are no global variables in the usual sense. So, when processing
a function definition, we are going to have a fresh symbol table
containing only defined functions (to support function calls) and
parameters.
</p>
</section>
</div>
<div id="outline-container-orgcebe179" class="outline-4">
<h4 id="orgcebe179"><span class="section-number-4">4.10.2</span> Stack frame (activation record)</h4>
<section class="outline-text-4" id="text-4-10-2">
<p>
We have talked about the function call stack before. as a reminder:
</p>

<ol class="org-ol">
<li>part of the process memory is set aside for the stack.</li>
<li>stack register: holds a pointer to the current top of the stack.</li>
</ol>

<p>
This means that SR holds the location of the top valid word on the
stack, rather than the next available word—if we read the memory
location contained in SR, we get the value of the word that's
currently on top of the stack. To make space on the stack, decrement
the stack pointer; to reclaim that space increment the stack pointer.
</p>

<pre class="code"><code>low    high
  [  xx]
     ^
     sp
</code></pre>

<p>
We will use the stack to implement a function's functionality. The key
data structure is called a <i>stack frame</i> (or sometimes, <i>activation
record</i>). A stack frame will hold all the information a function needs
to operate correctly:
</p>

<ul class="org-ul">
<li>memory for the local variables</li>
<li>where to return to when its done executing</li>
<li>saved values for registers the function may overwrite</li>
</ul>

<p>
How will the function know where to access this information, since it
can appear anywhere on the stack? We will use the <i>frame pointer</i> (which
lives in a register just like the stack pointer). The frame pointer
points to the bottom of the current stack frame; the currently
executing function can access all of its info in terms of offsets from
the frame pointer.
</p>

<p>
The basic idea is that when a function is called:
</p>
<ol class="org-ol">
<li>the old frame pointer is saved</li>
<li>the frame pointer is set to the current stack pointer</li>
<li>the stack pointer is incremented to allocate space for the
activation record</li>
<li>the activation record is filled in appropriately</li>
<li>control jumps to the function</li>
<li>when the function is done, the stack pointer is set to the frame
pointer (which was the old value of the stack pointer) and the
frame pointer is restored to its old value</li>
</ol>

<p>
See the lectures for an example of how the stack and frame pointers
change for a function call.
</p>

<p>
Note that this is kind of like nested scope, except that we adjust the
frame pointer to preserve scope (in contrast the nested scope which
still has access to variables from the enclosing scope).
</p>
</section>
</div>

<div id="outline-container-org1d5853b" class="outline-4">
<h4 id="org1d5853b"><span class="section-number-4">4.10.3</span> calling conventions</h4>
<section class="outline-text-4" id="text-4-10-3">
<p>
In order to make all of this work even when functions have been
compiled separately (perhaps even by different compilers) there must
be a convention that says exactly how a call will work and who is
responsible for what between the caller and the callee. We need a
convention to make sure that the functions are cooperating on which
registers to restore, and how to pass the arguments and the return
value.
</p>

<p>
As part of the calling convention, every function has a prologue and
epilogue, and every function call has a pre-call sequence and a
post-return sequence.
</p>

<p>
[TODO: show quick diagram to make this clear]
</p>

<p>
There is an agreed-upon protocol for the language to enforce who
(caller, callee) does what to make function calls work; this is the
<i>calling convention</i>.
</p>

<p>
Anatomy of a function call–this is a "typical" example similar to
that used by C on the x86 (and specifically Linux); the details can
vary from language to language and machine to machine:
</p>

<p>
Pre-call:
</p>

<ul class="org-ul">
<li>save any caller-save registers by pushing them onto the stack</li>
<li>push the call arguments onto the stack (in reverse)</li>
<li>push the return address onto the stack</li>
<li>jump to address of callee's prologue code</li>
</ul>

<p>
Prologue code:
</p>

<ul class="org-ul">
<li>push the frame pointer onto the stack</li>
<li>copy the stack pointer into the frame pointer register (frame register
always points to old frame register)</li>
<li>make space on the stack for local variables (decrement stack pointer)</li>
<li>save any callee-save registers by pushing them onto the stack</li>
</ul>

<p>
Epilogue code:
</p>

<ul class="org-ul">
<li>put return value in known register</li>
<li>restore callee-save registers by popping from stack</li>
<li>deallocate local variables by moving frame pointer to stack pointer</li>
<li>restore caller's frame pointer by popping it from the stack</li>
<li>pop call site's return address from stack and jump to it</li>
</ul>

<p>
Post-return code:
</p>

<ul class="org-ul">
<li>discard call arguments from stack</li>
<li>restore caller-save registers by popping from stack</li>
<li>write return value to left-hand side of call</li>
<li>continue execution</li>
</ul>

<p>
Note that the caller-save registers only need to be pushed if they are
holding values needed after the function call, and callee-save
registers only need to be pushed if they may be overwritten by the
callee function.
</p>
</section>
</div>

<div id="outline-container-org14fb8cb" class="outline-4">
<h4 id="org14fb8cb"><span class="section-number-4">4.10.4</span> example</h4>
<section class="outline-text-4" id="text-4-10-4">
<p>
The program:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) : <span style="color: #228b22;">int</span> { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>; <span style="color: #008b8b;">c</span> := a+b; <span style="color: #a020f0;">return</span> c+1; }
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #008b8b;">x</span> := foo(2, 3);
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>;
</code></pre>


<p>
offsets, scope 0 ("global" scope):
    x : -4
</p>

<p>
offsets, scope foo:
    a : 8
    b : 12
    c : -4
_tmp0 : -8
</p>

<p>
We will assume the existence of a few handy instructions:
</p>
<ul class="org-ul">
<li><code>push</code> decrements the stack pointer and stores its argument to the newly allocated space on the stack.</li>
<li><code>pop</code> increments the stack pointer and loads the contents of the newly deallocated space into its argument</li>
<li><code>call</code> pushes the current instruction address onto the stack and jumps to the given label</li>
<li><code>ret</code> pops an instruction address off the stack and jumps to it</li>
</ul>

<p>
We have not targeted a specific architecture yet, so we will also
assume the existence of <code>CALLER_SAVE_REG1</code>, <code>CALLER_SAVE_REG2</code>,
<code>CALLEE_SAVE_REG1</code>, and <code>CALLEE_SAVE_REG2</code>, with the obvious meanings.
</p>

<pre class="code"><code><span style="color: #0000ff;">Entry</span>: <span style="color: #b22222;">// </span><span style="color: #b22222;">entry point for entire program</span>
  <span style="color: #b22222;">// </span><span style="color: #b22222;">ENTRY PROLOGUE</span>
  <span style="color: #a020f0;">push</span> FR               <span style="color: #b22222;">// </span><span style="color: #b22222;">save current frame pointer</span>
  <span style="color: #a020f0;">mov</span> SR FR             <span style="color: #b22222;">// </span><span style="color: #b22222;">replace old frame pointer with current stack pointer</span>
  <span style="color: #a020f0;">sub</span> 4 SR              <span style="color: #b22222;">// </span><span style="color: #b22222;">allocate space for 'x'</span>
  <span style="color: #a020f0;">store</span> 0 [FR-4]          <span style="color: #b22222;">// </span><span style="color: #b22222;">initialize 'x' to 0</span>
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG1 <span style="color: #b22222;">// </span><span style="color: #b22222;">save callee-save registers</span>
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG2

  <span style="color: #b22222;">// </span><span style="color: #b22222;">PRE-CALL for x := foo(2, 3)</span>
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG1 <span style="color: #b22222;">// </span><span style="color: #b22222;">save caller-save registers</span>
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">push</span> 3                <span style="color: #b22222;">// </span><span style="color: #b22222;">push arguments onto stack in reverse</span>
  <span style="color: #a020f0;">push</span> 2
  <span style="color: #a020f0;">call</span> FOO

  <span style="color: #b22222;">// </span><span style="color: #b22222;">POST-RETURN for x := foo(2, 3)</span>
  <span style="color: #a020f0;">add</span> 8 SR             <span style="color: #b22222;">// </span><span style="color: #b22222;">discard arguments from stack</span>
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG2 <span style="color: #b22222;">// </span><span style="color: #b22222;">restore caller-save registers</span>
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">store</span> RR [FR-4]        <span style="color: #b22222;">// </span><span style="color: #b22222;">store return value to memory location of 'x'</span>

  <span style="color: #b22222;">// </span><span style="color: #b22222;">output x</span>
  <span style="color: #a020f0;">ld</span> [FR-4] RR

  <span style="color: #b22222;">// </span><span style="color: #b22222;">ENTRY EPILOGUE</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG2 <span style="color: #b22222;">// </span><span style="color: #b22222;">restore callee-save registers</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">mov</span> FR SR            <span style="color: #b22222;">// </span><span style="color: #b22222;">restore old stack pointer, deallocating stack frame</span>
  <span style="color: #a020f0;">pop</span> FR               <span style="color: #b22222;">// </span><span style="color: #b22222;">restore old frame pointer</span>
  <span style="color: #a020f0;">ret</span>                  <span style="color: #b22222;">// </span><span style="color: #b22222;">pop return address and jump to it, exiting program</span>

<span style="color: #0000ff;">FOO</span>:
  <span style="color: #b22222;">// </span><span style="color: #b22222;">FOO PROLOGUE</span>
  <span style="color: #a020f0;">push</span> FR               <span style="color: #b22222;">// </span><span style="color: #b22222;">save current frame pointer</span>
  <span style="color: #a020f0;">mov</span> SR FR             <span style="color: #b22222;">// </span><span style="color: #b22222;">replace old frame pointer with current stack pointer</span>
  <span style="color: #a020f0;">sub</span> 8 SR              <span style="color: #b22222;">// </span><span style="color: #b22222;">allocate space for local variables (c and _tmp0)</span>
  <span style="color: #a020f0;">store</span> 0 [FR-4]          <span style="color: #b22222;">// </span><span style="color: #b22222;">initialize 'c' to 0</span>
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG1 <span style="color: #b22222;">// </span><span style="color: #b22222;">save callee-save registers</span>
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG2

  <span style="color: #b22222;">// </span><span style="color: #b22222;">c := a+b</span>
  <span style="color: #a020f0;">ld</span> [FR+8] RR
  <span style="color: #a020f0;">store</span> RR [FR-8]
  <span style="color: #a020f0;">ld</span> [FR+12] RR
  <span style="color: #a020f0;">ld</span> [FR-8] OR
  <span style="color: #a020f0;">add</span> OR RR
  <span style="color: #a020f0;">store</span> RR [FR-4]

  <span style="color: #b22222;">// </span><span style="color: #b22222;">return c+1</span>
  <span style="color: #a020f0;">ld</span> [FR-4] RR
  <span style="color: #a020f0;">store</span> RR [FR-8]
  <span style="color: #a020f0;">mov</span> 1 RR
  <span style="color: #a020f0;">ld</span> [FR-8] OR
  <span style="color: #a020f0;">add</span> OR RR

  <span style="color: #b22222;">// </span><span style="color: #b22222;">FOO EPILOGUE</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG2 <span style="color: #b22222;">// </span><span style="color: #b22222;">restore callee-save registers</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">mov</span> FR SR            <span style="color: #b22222;">// </span><span style="color: #b22222;">restore old stack pointer, deallocating stack frame</span>
  <span style="color: #a020f0;">pop</span> FR               <span style="color: #b22222;">// </span><span style="color: #b22222;">restore old frame pointer</span>
  <span style="color: #a020f0;">ret</span>                  <span style="color: #b22222;">// </span><span style="color: #b22222;">pop return address and jump to it</span>

</code></pre>

<p>
[show the stack as we walk through the code]
</p>

<p>
How did the code generator know the offsets of the arguments to the
callee function when they were pushed onto the stack by the caller
function? Because of the calling convention, the callee always knows
that the first argument is at a positive 8 offset from the current
frame pointer (to pass over the saved frame pointer and return
address) and subsequent arguments are at 4-byte offsets from that.
</p>
</section>
</div>

<div id="outline-container-orgf7c24b8" class="outline-4">
<h4 id="orgf7c24b8"><span class="section-number-4">4.10.5</span> exercise</h4>
<section class="outline-text-4" id="text-4-10-5">
<p>
Translate the following program into assembly under the same
assumptions as the above exercise:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">bar</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> { <span style="color: #a020f0;">return</span> a+42; }
<span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>; <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>; <span style="color: #008b8b;">x</span> := bar(a); <span style="color: #008b8b;">y</span> := bar(a+1); <span style="color: #a020f0;">return</span> x*y; }
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #008b8b;">x</span> := 2;
<span style="color: #008b8b;">x</span> := foo(x);
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>+3;
</code></pre>

<p>
Solution
</p>

<p>
offsets, scope 0:
    x : -4
_tmp0 : -8
</p>

<p>
offsets, scope foo:
    a : 8
    x : -4
    y : -8
_tmp0 : -12
</p>

<p>
offsets, scope bar:
    a : 8
_tmp0 : -4
</p>

<pre class="code"><code>
<span style="color: #0000ff;">Entry</span>:
  <span style="color: #b22222;">// </span><span style="color: #b22222;">ENTRY PROLOGUE</span>
  <span style="color: #a020f0;">push</span> FR
  <span style="color: #a020f0;">mov</span> SR FR
  <span style="color: #a020f0;">sub</span> 8 SR
  <span style="color: #a020f0;">store</span> 0 [FR-4]
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG2

  <span style="color: #b22222;">// </span><span style="color: #b22222;">x := 2</span>
  <span style="color: #a020f0;">mov</span> 2 RR
  <span style="color: #a020f0;">store</span> RR [FR-4]

  <span style="color: #b22222;">// </span><span style="color: #b22222;">PRE-CALL for x := foo(x)</span>
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">ld</span> [FR-4] RR
  <span style="color: #a020f0;">push</span> RR
  <span style="color: #a020f0;">call</span> FOO

  <span style="color: #b22222;">// </span><span style="color: #b22222;">POST-RETURN for x := foo(x)</span>
  <span style="color: #a020f0;">add</span> 4 SR
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">store</span> RR [FR-4]

  <span style="color: #b22222;">// </span><span style="color: #b22222;">output x+3</span>
  <span style="color: #a020f0;">ld</span>  [FR-4] RR
  <span style="color: #a020f0;">store</span> RR [FR-8]
  <span style="color: #a020f0;">mov</span> 3 RR
  <span style="color: #a020f0;">ld</span>  [FR-8] OR
  <span style="color: #a020f0;">add</span> OR RR

  <span style="color: #b22222;">// </span><span style="color: #b22222;">ENTRY EPILOGUE</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG2
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">mov</span> FR SR
  <span style="color: #a020f0;">pop</span> FR
  <span style="color: #a020f0;">ret</span>

<span style="color: #0000ff;">foo</span>:
  <span style="color: #b22222;">// </span><span style="color: #b22222;">FOO PROLOGUE</span>
  <span style="color: #a020f0;">push</span> FR
  <span style="color: #a020f0;">mov</span> SR FR
  <span style="color: #a020f0;">sub</span> 12 SR
  <span style="color: #a020f0;">store</span> 0 [FR-4]
  <span style="color: #a020f0;">store</span> 0 [FR-8]
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG2

  <span style="color: #b22222;">// </span><span style="color: #b22222;">PRE-CALL for x := bar(a)</span>
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">ld</span> [FR+8] RR
  <span style="color: #a020f0;">push</span> RR
  <span style="color: #a020f0;">call</span> bar

  <span style="color: #b22222;">// </span><span style="color: #b22222;">POST-RETURN for x := bar(a)</span>
  <span style="color: #a020f0;">add</span> 4 SR
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">store</span> RR [FR-4]

  <span style="color: #b22222;">// </span><span style="color: #b22222;">PRE-CALL for y := bar(a+1)</span>
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">push</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">ld</span> [FR+8] RR
  <span style="color: #a020f0;">store</span> RR [FR-12]
  <span style="color: #a020f0;">mov</span> 1 RR
  <span style="color: #a020f0;">ld</span> [FR-12] OR
  <span style="color: #a020f0;">add</span> OR RR
  <span style="color: #a020f0;">push</span> RR
  <span style="color: #a020f0;">call</span> bar

  <span style="color: #b22222;">// </span><span style="color: #b22222;">POST-RETURN for y := bar(a+1)</span>
  <span style="color: #a020f0;">add</span> 4 SR
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG2
  <span style="color: #a020f0;">pop</span> CALLER_SAVE_REG1
  <span style="color: #a020f0;">store</span> RR [FR-8]

  <span style="color: #b22222;">// </span><span style="color: #b22222;">return x*y</span>
  <span style="color: #a020f0;">ld</span>  [FR-4] RR
  <span style="color: #a020f0;">store</span> RR [FR-12]
  <span style="color: #a020f0;">ld</span>  [FR-8] RR
  <span style="color: #a020f0;">ld</span>  [FR-12] OR
  <span style="color: #a020f0;">mul</span> OR RR

  <span style="color: #b22222;">// </span><span style="color: #b22222;">FOO EPILOGUE</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG2
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">mov</span> FR SR
  <span style="color: #a020f0;">pop</span> FR
  <span style="color: #a020f0;">ret</span>

<span style="color: #0000ff;">bar</span>:
  <span style="color: #b22222;">// </span><span style="color: #b22222;">BAR PROLOGUE</span>
  <span style="color: #a020f0;">push</span> FR
  <span style="color: #a020f0;">mov</span> SR FR
  <span style="color: #a020f0;">sub</span> 4 SR
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">push</span> CALLEE_SAVE_REG2

  <span style="color: #b22222;">// </span><span style="color: #b22222;">return a+42</span>
  <span style="color: #a020f0;">ld</span>  [FR+8] RR
  <span style="color: #a020f0;">store</span> RR [FR-4]
  <span style="color: #a020f0;">mov</span> 42 RR
  <span style="color: #a020f0;">ld</span>  [FR-4] OR
  <span style="color: #a020f0;">add</span> OR RR

  <span style="color: #b22222;">// </span><span style="color: #b22222;">BAR EPILOGUE</span>
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG2
  <span style="color: #a020f0;">pop</span> CALLEE_SAVE_REG1
  <span style="color: #a020f0;">mov</span> FR SR
  <span style="color: #a020f0;">pop</span> FR
  <span style="color: #a020f0;">ret</span>
</code></pre>
</section>
</div>
</div>

<div id="outline-container-org35f1de3" class="outline-3">
<h3 id="org35f1de3"><span class="section-number-3">4.11</span> Notes on x86 assembly</h3>
<section class="outline-text-3" id="text-4-11">
</section>
<div id="outline-container-orgd793b08" class="outline-4">
<h4 id="orgd793b08"><span class="section-number-4">4.11.1</span> Some basic x86</h4>
<section class="outline-text-4" id="text-4-11-1">
<p>
we're not going to teach x86, but we will give some pointers. an
excellent resource for you to look at is
<a href="https://en.wikibooks.org/wiki/X86_Assembly">https://en.wikibooks.org/wiki/X86_Assembly</a>.
</p>

<p>
When looking here, keep in mind:
</p>
<ul class="org-ul">
<li>we are using 32-bit x86</li>
<li>we are using the gnu assembler, which uses AT&amp;T syntax</li>
</ul>

<p>
There are lots of other places to look for x86, but remember we're using GAS/AT&amp;T syntax, not Intel syntax.
</p>

<p>
Wiki page 'x86 Register and Architecture Description':
</p>
<ul class="org-ul">
<li>we're using the 32-bit registers, so $eax, %ebx, %ecx, %edx, %esp, %ebp, etc</li>
<li>%esp is the stack pointer, %ebp is the frame pointer, %eax is the return value register</li>
</ul>

<p>
Wiki page 'GAS Syntax':
</p>
<ul class="org-ul">
<li>use the 'l' suffix to indicate we're operating on 32-bit integers</li>
<li>we're using the gnu assembler, which uses AT&amp;T syntax. when 
looking at x86 resources be sure you're looking at the right ones.</li>
</ul>

<p>
Operands:
</p>
<ul class="org-ul">
<li><code>$k</code> for constant k</li>
<li><code>%reg</code> for register value</li>
<li><code>(%reg)</code> for memory location whose address is in reg (what we write as
<code>[reg]</code> in lecture notes)</li>
<li><code>k(%reg)</code> for memory location at address (%reg + k) (<code>[reg + k]</code> in
lecture notes.</li>
</ul>

<p>
We can only use indirection in at most one operand to the same
instruction.
</p>

<p>
Examples:
</p>
<ul class="org-ul">
<li><code>mov 2 RR</code> == <code>movl $2, %eax</code></li>
<li><code>sub 8 SR</code> == <code>subl $8, %esp</code></li>
<li><code>ld [FR-4] RR</code> == <code>movl -4(%ebp), %eax</code></li>
<li><code>store RR [FR-12]</code> == <code>movl %eax, -12(%ebp)</code></li>
</ul>

<p>
When looking at disassembled code, do not worry about the header
information contained in sections like ".file", ".text", etc. we will
add the necessary scaffolding in the infrastructure we give you for
your assignments, and describe what code to emit for the entry point
of the main program.
</p>

<p>
Some other useful instructions that we will use for function calls are:
</p>
<ul class="org-ul">
<li>push &lt;reg&gt;</li>
<li>pop &lt;reg&gt;</li>
</ul>

<p>
x86 has some instructions that abbreviate the instructions for
pre-calls and epilogues:
</p>
<ul class="org-ul">
<li>call &lt;label&gt;: push current code location onto stack then jump 
to label (the last part of the pre-call instruction sequence).</li>
<li>leave: copies %ebp to %esp then restores %ebp by popping from the stack (the middle part of the epilogue instruction sequence).</li>
<li>ret: pop a code location from the stack and jump to it (the last part of the epilogue instruction sequence)</li>
</ul>

<p>
x86 has a specific set of caller-save and callee-save
registers. however, we only need to save them if we're actually using
them and because of our naive codegen we do not actually need to worry
about them.
</p>
<ul class="org-ul">
<li>use %eax for RR and %edx for OR</li>
<li>use %esp and %ebp for the stack and frame pointers</li>
<li>leave all other registers alone</li>
<li>do not need to do any caller or callee saves (except for %esp and
%ebp which we have already covered)</li>
</ul>

<p>
This works because no callee function will write on the callee-save
registers (and so they do not need to save them) and no caller function
needs a register to be preserved over function calls (and so they
do not need to save them).
</p>
</section>

<ol class="org-ol">
<li><a id="orgab2c176"></a>getting 32-bit x86 assembly for C code<br>
<section class="outline-text-5" id="text-4-11-1-1">
<p>
commands:
</p>

<pre class="code"><code>gcc -O0 -m32 -S &lt;file&gt;.c -o &lt;file&gt;.asm
objdump -d &lt;file&gt;.o
</code></pre>

<p>
-O0 says to turn off optimizations, -m32 forces 32-bit mode, -S says to 
compile but do not assemble or link (emit only assembly code).
</p>

<p>
Alternatively, you can use Compiler Explorer: <a href="https://gcc.godbolt.org/">https://gcc.godbolt.org</a>
</p>
<ul class="org-ul">
<li>in the left panel, put c++ code</li>
<li>in the right panel:
<ul class="org-ul">
<li>choose compiler and version (gcc or clang for x86-64)</li>
<li>set compiler options to "-O0 -m32"</li>
<li>under the Output menu, make sure "Intel asm syntax" is deselected
(because we use AT&amp;T syntax)</li>
</ul></li>
</ul>
</section>

<ol class="org-ol">
<li><a id="org44a8dca"></a>example<br>
<section class="outline-text-6" id="text-4-11-1-1-1">
<p>
code.c:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>) {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span> = x * y;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span> = a + 2;
  <span style="color: #a020f0;">return</span> b;
}
</code></pre>

<p>
instead of the below which is using objdump, you can also use
Compiler Explorer or GCC.
</p>

<p>
output:
</p>

<pre class="code"><code>00000000 &lt;foo&gt;:
   0:   55                      push   %ebp
   1:   89 e5                   mov    %esp,%ebp
   3:   83 ec 10                sub    $0x10,%esp
   6:   8b 45 08                mov    0x8(%ebp),%eax
   9:   0f af 45 0c             imul   0xc(%ebp),%eax
   d:   89 45 fc                mov    %eax,-0x4(%ebp)
  10:   8b 45 fc                mov    -0x4(%ebp),%eax
  13:   83 c0 02                add    $0x2,%eax
  16:   89 45 f8                mov    %eax,-0x8(%ebp)
  19:   8b 45 f8                mov    -0x8(%ebp),%eax
  1c:   c9                      leave
  1d:   c3                      ret
</code></pre>

<p>
What is going on in the code above:
</p>

<p>
0: put old frame pointer in stack frame
1: set current frame pointer to current stack pointer
3: add space to stack for locals
6: load x from memory
9: multiply by y
d: store to a
10: load a
13: add 2
16: store to b
19: load b
1c: tear down current stack frame
1d: pop return address from stack and jump to it
</p>

<p>
Note that the memory offsets to x and y are positive (meaning below
the current stack pointer) while those for a and b are negative
(meaning above the stack pointer).
</p>
</section>
</li>
</ol>
</li>
</ol>
</div>
</div>
</section>
<section id="outline-container-orgb5a3265" class="outline-2">
<h2 id="orgb5a3265"><span class="section-number-2">5</span> Optimization: Making programs faster</h2>
<section class="outline-text-2" id="text-5">
<div class="epigraph"><blockquote>
<p>
"No matter how hard you try, you cannot make a racehorse out of a pig. You can, however, make a faster pig."
</p>

<ul class="org-ul">
<li>Jamie Zawinski</li>
</ul>

</blockquote></div>
</section>

<div id="outline-container-orgda81545" class="outline-3">
<h3 id="orgda81545"><span class="section-number-3">5.1</span> Introduction to analysis and optimization</h3>
<section class="outline-text-3" id="text-5-1">
<p>
So far we have examined the frontend (lexing, parsing), and the
backend (codegen). Let's spend some time looking at the middle-end and
optimizations. What do we mean by "optimization"?
</p>

<ul class="org-ul">
<li>usually we mean performance: making the generated code execute
faster. sometimes we want to optimize for other things, like code
size, memory consumption, or power consumption (all of which are
important for embedded systems). For our purposes we will focus on
performance optimization.</li>

<li>"optimization" is a somewhat misleading term, because it implies
we are going to find some optimal (i.e., the best) solution. In
reality finding the best solution is NP-Hard or undecidable and
we are just looking for a better solution (e.g., that the optimized
code runs faster than the unoptimized code). There is a such thing
as a "super-optimizer" which does look for the best possible
solution, but this is an active area of research and current
solutions cannot scale beyond tens of lines of code.</li>
</ul>

<p>
How do we optimize for performance? The general idea is to reduce the
amount of computation the generated executable needs to do: to somehow
eliminate instructions or to replace slower instructions with faster
instructions, while still guaranteeing that the resulting program
"does the same thing".
</p>

<p>
Examples
</p>

<pre class="code"><code>// arithmetic identities
x := y * 0;    --&gt; x := 0;

// constant folding
x := 1 + 2;    --&gt; x := 3;

// constant propagation and folding
x := 1 + 2;    --&gt; x := 3;
y := x + 3;    --&gt; y := 6;

// redundancy elimination
x := a + b;    --&gt; x := a + b;
y := a + b;        y := x;

// strength reduction
x := y / 2;    --&gt; x := y &gt;&gt; 1;
</code></pre>

<p>
The key formula behind compiler optimizations is:
</p>

<p>
optimization = analysis + transformation
</p>

<p>
We need to use program analysis (aka static analysis) to determine
what is true about the program's behavior (e.g., what things are
constant values, what expressions are guaranteed to evaluate to the
same value, etc), then we select code transformations that, based on
the information provided by the analysis, are safe (preserve behavior)
and effective (improve performance).
</p>

<p>
We can perform optimizations in the backend on the generated assembly
code, but then we would have to reimplement them for each backend we
add to the compiler, also the generated assembly may have
peculiarities that makes the optimizations harder to reason about or
computationally harder to implement. There are some optimizations that
are inherently target specific, and we reserve those for the backend,
but mostly we try to optimize in a target-agnostic way so that we can
reuse the same optimizations for all targets. thus, the "middle-end".
</p>

<p>
The middle-end optimizations <i>can</i> operate directly on the AST, but it
is nicer if the code is simpler and more regular; it makes the
optimizations easier to specify and implement. usually, the middle-end
translates the AST into a simpler "intermediate representation"
(IR). It performs the optimizations on the IR, then the backend code
generator translates the IR into assembly.
</p>

<p>
The optimizer can also operate at a number of different scopes,
ranging from small fragments of code (local optimization) to entire
functions (global optimization) to set of functions (inter-procedural
optimization) to entire programs (whole-program optimizations). The
larger the scope that the optimizer operates at, the more effective it
is but the more complex and expensive it is because now the optimizer
needs to reason about the interaction between a larger set of
components.
</p>

<p>
We will focus on local optizations and global optimizations. The term
"global" may seem odd since we're focusing in on one single function;
the term comes from a time when local optimization was the norm and
operating at an entire function scope was seen as extremely
aggressive—operating on even larger scopes than that was out of the
question.
</p>
</section>
</div>

<div id="outline-container-org1ed41a0" class="outline-3">
<h3 id="org1ed41a0"><span class="section-number-3">5.2</span> Safety and profitability</h3>
<section class="outline-text-3" id="text-5-2">
<p>
We stated two important properties of optimization:
</p>
<ul class="org-ul">
<li>it should be safe (preserve program behavior)</li>
<li>it should be profitable (improve program performance)</li>
</ul>

<p>
Let's dig a little into each, because they are not as straightforward
as they seem.
</p>
</section>

<div id="outline-container-org0b40c8c" class="outline-4">
<h4 id="org0b40c8c"><span class="section-number-4">5.2.1</span> Safety</h4>
<section class="outline-text-4" id="text-5-2-1">
<p>
We said that optimizations should preserve behavior, but what does
that mean? If you think about it, the whole point is to change program
behavior by making it run faster using different instructions. What
are we preserving? What does "behavior" even mean?
</p>

<p>
Roughly, we can think of the behavior we're preserving as
user-observable events independent of time. In other words, if we run
the original program P and record the user-observable events (e.g.,
outputs) without timestamps, then do the same with the optimized
program P', we should get the same thing. For C♭, this would be just the final output result.
</p>

<p>
this definition will work fine for C♭, but it isn't adequate for
language like C and C++. these languages have the concept of
"undefined behavior". literally, this means that for certain code
expressions and statements the language standard doesn't say what
should happen, thus the compiler implementor is free to do whatever
they want. in fact, it goes even further than that: a program that
executes a statement with undefined behavior isn't defined at all; the
entire program execution is undefined, not just that statement. this
is important to understand: the effects of undefined behavior are not
confined to the statement that is undefined, or even the execution
after that statement, but the <i>entire</i> execution, even before that
statement is executed.
</p>

<p>
Let's look at some examples (taken from the blog of John Regehr, a CS
professor whose research deals a lot with undefined behavior in C).
</p>

<pre class="code"><code><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;limits.h&gt;</span>
<span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">&lt;stdio.h&gt;</span>

<span style="color: #228b22;">int</span> <span style="color: #0000ff;">main</span> (<span style="color: #228b22;">void</span>)
{
  printf (<span style="color: #8b2252;">"%d\n"</span>, (INT_MAX+1) &lt; 0);
  <span style="color: #a020f0;">return</span> 0;
}
</code></pre>

<p>
this program asks the question: if we take the maximum integer value and
 add 1, do we get a negative number? in other words, do integers wrap 
around? so what happens when we run this program?
</p>

<pre class="code"><code>$ gcc test.c -o test
$ ./test
1
</code></pre>

<p>
or:
</p>

<pre class="code"><code>$ gcc test.c -o test
$ ./test
0
</code></pre>

<p>
or:
</p>

<pre class="code"><code>$ gcc test.c -o test
$ ./test
42
</code></pre>

<p>
or:
</p>

<pre class="code"><code>$ gcc test.c -o test
$ ./test
Formatting root partition, then doing your laundry.
</code></pre>

<p>
Any of these could happen, or anything else. The program has undefined
behavior because it exhibits signed integer overflow, that is, we took
a signed integer and added a value to it that caused the result to be
out of the range that a signed integer can express. The C standard
says this this is undefined (note that unsigned integer overflow is
defined).
</p>

<p>
Now, you might think "on an x86 the C integer add instruction is
implemented using the x86 ADD assembly instruction, which operates
using two's complement arithmetic, which does wrap around. thus, if
i'm running the program on an x86 i can expect to get 1." this is bad,
for the following reasons:
</p>

<ol class="org-ol">
<li>you do not know what architectures your program will be compiled
on, even if you are compiling for x86 right now.</li>
<li>not all compilers will work this way, even on an x86, even if the
one you're using right now does.</li>
<li>at certain optimization levels, a compiler that may work this way
previously will stop working this way because it takes advantage of
the undefined behavior to optimize the program.</li>
</ol>

<p>
Let's take a closer look at that third reason with an example:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) { <span style="color: #a020f0;">return</span> (a+1) &gt; a; }
</code></pre>

<p>
Note that if we pass in <code>INT_MAX</code> for a, then we get undefined
behavior. The compiler optimizer can reason this way:
</p>

<ul class="org-ul">
<li>case 1: 'a' is not <code>INT_MAX</code>. then the answer is guaranteed to
be 1.</li>
<li>case 2: 'a' is <code>INT_MAX</code>. then the behavior is undefined and we
can do whatever we want. let's make the answer 1.</li>
</ul>

<p>
it then outputs the following optimized code:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) { <span style="color: #a020f0;">return</span> 1; }
</code></pre>

<p>
This is completely valid, even if we're running the program on an x86
and using the x86 ADD instruction which exhibits two's complement
behavior, so that <code>INT_MAX</code> + 1 &lt; <code>INT_MAX</code>.
</p>

<p>
We have only looked at signed integer overflow, but the C99 language
standard lists 191 kinds of undefined behavior. This is why it's
always a good idea to use -Wall for C/C++ compilation and pay
attention to the warnings.
</p>
</section>
</div>

<div id="outline-container-org930e2c3" class="outline-4">
<h4 id="org930e2c3"><span class="section-number-4">5.2.2</span> Profitability</h4>
<section class="outline-text-4" id="text-5-2-2">
<p>
Another consideration is that the transformation we apply to the code
to optimize it should actually result in faster code. This can be
trickier than you might think.
</p>

<p>
Example: Function Inlining
</p>

<p>
Consider the following example:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) { <span style="color: #a020f0;">return</span> a + 1; }
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #008b8b;">x</span> := foo(2);
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>;
</code></pre>

<p>
At runtime, the execution will look something like:
</p>

<pre class="code"><code>precall sequence
function prologue
compute a+1
function epilogue
post-return sequence
output x
</code></pre>

<p>
Notice that the precall, prologue, epilogue, and post-return are all
overhead that comes because we're making a function call. we can
optimize this code by <i>inlining</i> the function call, that is, by
copying the body of the function directly into the caller:
</p>

<pre class="code"><code><span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #008b8b;">x</span> := 2 + 1;
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>;
</code></pre>

<p>
This has exposed another optimization opportunity for constant folding
and propagation, yielding the following optimized program:
</p>

<pre class="code"><code>output 3;
</code></pre>

<p>
Function inlining both eliminates the overhead of function calls and
also exposes many opportunities for optimization that wouldn't be
obvious if we looked at functions in isolation. In fact, it is a
central optimization in languages where functions are the main
abstraction (such as functional languages like Scala, Haskell, and
Rust). We can perform function inlining whenever we know exactly which
function is being called (always in L1; usually in C except for
function pointers; sometimes in C++ because of virtual methods).
</p>

<p>
You might think: inlining one function call was good, so obviously we
should inline as many as possible! But this actually is not a good
idea. For one, we cannot fully inline recursive calls (we would get
into a cycle of infinitely repeated inlinings); but let's ignore that
issue. The real problem is that inlining comes with a cost: the code
becomes larger.
</p>

<pre class="code"><code>def foo(int a) { &lt;instruction 1&gt;; ... &lt;instruction N&gt;; return &lt;aexp&gt;; }
int x;
int y;
x := foo(2);
y := foo(3);
output x + y;
</code></pre>

<p>
Becomes:
</p>

<pre class="code"><code>int x;
int y;
&lt;instruction 1&gt;;
.
.
.
&lt;instruction N&gt;;
&lt;instruction 1&gt;;
.
.
.
&lt;instruction N&gt;;
output x + y;
</code></pre>

<p>
There were two calls to foo, so we doubled the amount of code inside
foo's body. consider the following:
</p>

<pre class="code"><code>def foo(int a) { &lt;instruction 1&gt;; ...; bar(); ...; bar(); &lt;instruction N&gt;; return &lt;aexp&gt;; }
def bar() { &lt;instruction 1'&gt;; ...; &lt;instruction M'&gt;; return &lt;aexp&gt;; }
int x;
int y;
x := foo(2);
y := foo(3);
output x + y;
</code></pre>

<p>
becomes:
</p>

<pre class="code"><code>int x;
int y;
&lt;instruction 1&gt;;
.
.
.
&lt;instruction 1'&gt;;
.
.
.
&lt;instruction M'&gt;;
.
.
.
&lt;instruction N&gt;;
&lt;instruction 1&gt;;
.
.
.
&lt;instruction 1'&gt;;
.
.
.
&lt;instruction M'&gt;;
.
.
.
&lt;instruction N&gt;;
output x + y;
</code></pre>

<p>
We doubled the amount of code in foo, which, because we inlined the
calls to bar, quadruples the amount of code in bar. in general,
inlining can increase code size exponentially. This impacts not just
memory consumption, but also performance because the large code size
can blow the instruction cache and cause large slowdowns.
</p>

<p>
In practice, compilers use a set of complicated heuristics to
determine whether a function call should be inlined or not. A simple
example heuristic is to inline functions that are called once, or the
functions that are small.
</p>

<p>
Many optimizations have similar considerations: just because we <i>can</i>
apply the optimization doesn't mean it's a good idea. We need to
figure out in each case whether applying the optimization results in a
net performance benefit or loss and act accordingly.
</p>
</section>
</div>
</div>

<div id="outline-container-org3992d5d" class="outline-3">
<h3 id="org3992d5d"><span class="section-number-3">5.3</span> IR: 3-address code</h3>
<section class="outline-text-3" id="text-5-3">
<p>
Let's discuss the intermediate representation (IR) we will use for the
middle-end. it will be a classic example of "three address code",
something similar to that used by many real compilers. The name "three
address code" is a reference to the fact that no instruction will
involve more than three "addresses" (think: variables). Here is the
syntactic definition (the grammar) of the IR for expressions:
</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-176-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtable columnalign=&quot;right left right left right left right left right left right left&quot; rowspacing=&quot;3pt&quot; columnspacing=&quot;0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em&quot; minlabelspacing=&quot;.8em&quot; displaystyle=&quot;true&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;&amp;lt;=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mi&gt;D&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;NOT&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;CALL&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;u&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;c&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;v&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;arg&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;return&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;output&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;jump&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd /&gt;&lt;mtd&gt;&lt;mi&gt;&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;jump_if_0&lt;/mtext&gt;&lt;/mrow&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;o&lt;/mi&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mspace width=&quot;thickmathspace&quot; /&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-4863" style="width: 29.083em; display: inline-block;"><span style="display: inline-block; position: relative; width: 25.057em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(-5.426em, 1024.89em, 9.409em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-4864"><span class="mtable" id="MathJax-Span-4865" style="padding-right: 0.167em; padding-left: 0.167em;"><span style="display: inline-block; position: relative; width: 24.737em; height: 0px;"><span style="position: absolute; clip: rect(7.554em, 1005em, 22.033em, -1000em); top: -15.115em; left: 0em;"><span style="display: inline-block; position: relative; width: 5.022em; height: 0px;"><span style="position: absolute; clip: rect(3.157em, 1002.36em, 4.389em, -1000em); top: -10.718em; right: 0em;"><span class="mtd" id="MathJax-Span-4866"><span class="mrow" id="MathJax-Span-4867"><span class="mi" id="MathJax-Span-4868" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-4869" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4870" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4871" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4872" style="font-family: MathJax_Math; font-style: italic;">p</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.157em, 1003.56em, 4.389em, -1000em); top: -9.369em; right: 0em;"><span class="mtd" id="MathJax-Span-4924"><span class="mrow" id="MathJax-Span-4925"><span class="mi" id="MathJax-Span-4926" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4927" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4928" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-4929" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4930" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4931" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4932" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.19em, 1005em, 4.206em, -1000em); top: -8.02em; right: 0em;"><span class="mtd" id="MathJax-Span-4959"><span class="mrow" id="MathJax-Span-4960"><span class="mi" id="MathJax-Span-4961" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4962" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4963" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4964" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4965" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4966" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-4967" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4968" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4969" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4970" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4971" style="font-family: MathJax_Math; font-style: italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -6.72em; right: 0em;"><span class="mtd" id="MathJax-Span-5009"><span class="mrow" id="MathJax-Span-5010"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -5.371em; right: 0em;"><span class="mtd" id="MathJax-Span-5040"><span class="mrow" id="MathJax-Span-5041"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -4.022em; right: 0em;"><span class="mtd" id="MathJax-Span-5072"><span class="mrow" id="MathJax-Span-5073"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -2.673em; right: 0em;"><span class="mtd" id="MathJax-Span-5101"><span class="mrow" id="MathJax-Span-5102"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: -1.324em; right: 0em;"><span class="mtd" id="MathJax-Span-5123"><span class="mrow" id="MathJax-Span-5124"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: 0.025em; right: 0em;"><span class="mtd" id="MathJax-Span-5145"><span class="mrow" id="MathJax-Span-5146"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: 1.374em; right: 0em;"><span class="mtd" id="MathJax-Span-5167"><span class="mrow" id="MathJax-Span-5168"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.851em, 1000em, 4.195em, -1000em); top: 2.723em; right: 0em;"><span class="mtd" id="MathJax-Span-5186"><span class="mrow" id="MathJax-Span-5187"></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 15.115em;"></span></span><span style="position: absolute; clip: rect(7.842em, 1019.71em, 22.627em, -1000em); top: -15.46em; left: 5.022em;"><span style="display: inline-block; position: relative; width: 19.715em; height: 0px;"><span style="position: absolute; clip: rect(3.101em, 1019.71em, 4.444em, -1000em); top: -10.718em; left: 0em;"><span class="mtd" id="MathJax-Span-4873"><span class="mrow" id="MathJax-Span-4874"><span class="mi" id="MathJax-Span-4875"></span><span class="mo" id="MathJax-Span-4876" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4877" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4878" style="font-family: MathJax_Main; padding-left: 0.278em;">+</span><span class="mspace" id="MathJax-Span-4879" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4880"><span class="mrow" id="MathJax-Span-4881"><span class="mo" id="MathJax-Span-4882" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4883" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4884" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mspace" id="MathJax-Span-4885" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4886" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-4887"><span class="mo" id="MathJax-Span-4888" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4889" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4890" style="font-family: MathJax_Main; padding-left: 0.222em;">∗</span><span class="mspace" id="MathJax-Span-4891" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4892" style="padding-left: 0.222em;"><span class="mrow" id="MathJax-Span-4893"><span class="mo" id="MathJax-Span-4894" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4895" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4896" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mspace" id="MathJax-Span-4897" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4898" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-4899"><span class="mo" id="MathJax-Span-4900" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4901" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4902" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4903" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4904" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-4905"><span class="mo" id="MathJax-Span-4906" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4907" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-4908" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mspace" id="MathJax-Span-4909" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4910" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-4911"><span class="mo" id="MathJax-Span-4912" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4913" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4914" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mi" id="MathJax-Span-4915" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span class="mi" id="MathJax-Span-4916" style="font-family: MathJax_Math; font-style: italic;">D</span><span class="mspace" id="MathJax-Span-4917" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4918"><span class="mrow" id="MathJax-Span-4919"><span class="mo" id="MathJax-Span-4920" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4921" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4922" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mi" id="MathJax-Span-4923" style="font-family: MathJax_Math; font-style: italic;">R</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1010.34em, 4.444em, -1000em); top: -9.369em; left: 0em;"><span class="mtd" id="MathJax-Span-4933"><span class="mrow" id="MathJax-Span-4934"><span class="mi" id="MathJax-Span-4935"></span><span class="mo" id="MathJax-Span-4936" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4937" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4938" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">v</span><span class="mi" id="MathJax-Span-4939" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4940" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4941" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4942" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4943" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-4944" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-4945" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mspace" id="MathJax-Span-4946" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-4947"><span class="mrow" id="MathJax-Span-4948"><span class="mo" id="MathJax-Span-4949" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-4950" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4951" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-4952" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4953" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4954" style="font-family: MathJax_Math; font-style: italic;">s</span><span class="mi" id="MathJax-Span-4955" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-4956" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4957" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4958" style="font-family: MathJax_Math; font-style: italic;">t</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.157em, 1018.12em, 4.389em, -1000em); top: -8.02em; left: 0em;"><span class="mtd" id="MathJax-Span-4972"><span class="mrow" id="MathJax-Span-4973"><span class="mi" id="MathJax-Span-4974"></span><span class="mo" id="MathJax-Span-4975" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mspace" id="MathJax-Span-4976" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4977" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">v</span><span class="mi" id="MathJax-Span-4978" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4979" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4980" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4981" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4982" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-4983" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-4984" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-4985" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mo" id="MathJax-Span-4986" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mspace" id="MathJax-Span-4987" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4988" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-4989" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-4990" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-4991" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-4992" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-4993" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4994" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-4995" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-4996" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-4997" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-4998" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-4999" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5000" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mspace" id="MathJax-Span-5001" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5002" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5003" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5004" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5005" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5006" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5007" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5008" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1011.89em, 4.444em, -1000em); top: -6.72em; left: 0em;"><span class="mtd" id="MathJax-Span-5011"><span class="mrow" id="MathJax-Span-5012"><span class="mi" id="MathJax-Span-5013"></span><span class="mspace" id="MathJax-Span-5014" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5015"><span class="mrow" id="MathJax-Span-5016"><span class="mo" id="MathJax-Span-5017" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5018" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5019" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-5020" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5021" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5022" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-5023" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5024" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5025" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5026" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-5027" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mo" id="MathJax-Span-5028" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="texatom" id="MathJax-Span-5029"><span class="mrow" id="MathJax-Span-5030"><span class="mtext" id="MathJax-Span-5031" style="font-family: MathJax_Typewriter;">NOT</span></span></span><span class="mspace" id="MathJax-Span-5032" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5033" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5034" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5035" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5036" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5037" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5038" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5039" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1012.78em, 4.444em, -1000em); top: -5.371em; left: 0em;"><span class="mtd" id="MathJax-Span-5042"><span class="mrow" id="MathJax-Span-5043"><span class="mi" id="MathJax-Span-5044"></span><span class="mspace" id="MathJax-Span-5045" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5046"><span class="mrow" id="MathJax-Span-5047"><span class="mo" id="MathJax-Span-5048" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5049" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5050" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-5051" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5052" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5053" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-5054" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5055" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5056" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5057" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-5058" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mo" id="MathJax-Span-5059" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="texatom" id="MathJax-Span-5060"><span class="mrow" id="MathJax-Span-5061"><span class="mtext" id="MathJax-Span-5062" style="font-family: MathJax_Typewriter;">CALL</span></span></span><span class="mspace" id="MathJax-Span-5063" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5064" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mi" id="MathJax-Span-5065" style="font-family: MathJax_Math; font-style: italic;">u</span><span class="mi" id="MathJax-Span-5066" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5067" style="font-family: MathJax_Math; font-style: italic;">c</span><span class="mi" id="MathJax-Span-5068" style="font-family: MathJax_Math; font-style: italic;">t</span><span class="mi" id="MathJax-Span-5069" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-5070" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5071" style="font-family: MathJax_Math; font-style: italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1010.59em, 4.444em, -1000em); top: -4.022em; left: 0em;"><span class="mtd" id="MathJax-Span-5074"><span class="mrow" id="MathJax-Span-5075"><span class="mi" id="MathJax-Span-5076"></span><span class="mspace" id="MathJax-Span-5077" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5078"><span class="mrow" id="MathJax-Span-5079"><span class="mo" id="MathJax-Span-5080" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5081" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5082" style="font-family: MathJax_Math; font-style: italic;">v</span><span class="mi" id="MathJax-Span-5083" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5084" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5085" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mi" id="MathJax-Span-5086" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5087" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5088" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5089" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mo" id="MathJax-Span-5090" style="font-family: MathJax_Main; padding-left: 0.278em;">&lt;</span><span class="mo" id="MathJax-Span-5091" style="font-family: MathJax_Main; padding-left: 0.278em;">−</span><span class="mspace" id="MathJax-Span-5092" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5093" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5094" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5095" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5096" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5097" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5098" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5099" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-5100" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1006.52em, 4.444em, -1000em); top: -2.673em; left: 0em;"><span class="mtd" id="MathJax-Span-5103"><span class="mrow" id="MathJax-Span-5104"><span class="mi" id="MathJax-Span-5105"></span><span class="mspace" id="MathJax-Span-5106" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5107"><span class="mrow" id="MathJax-Span-5108"><span class="mo" id="MathJax-Span-5109" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5110" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5111"><span class="mrow" id="MathJax-Span-5112"><span class="mtext" id="MathJax-Span-5113" style="font-family: MathJax_Typewriter;">arg</span></span></span><span class="mspace" id="MathJax-Span-5114" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5115" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5116" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5117" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5118" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5119" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5120" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5121" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-5122" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1008.1em, 4.444em, -1000em); top: -1.324em; left: 0em;"><span class="mtd" id="MathJax-Span-5125"><span class="mrow" id="MathJax-Span-5126"><span class="mi" id="MathJax-Span-5127"></span><span class="mspace" id="MathJax-Span-5128" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5129"><span class="mrow" id="MathJax-Span-5130"><span class="mo" id="MathJax-Span-5131" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5132" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5133"><span class="mrow" id="MathJax-Span-5134"><span class="mtext" id="MathJax-Span-5135" style="font-family: MathJax_Typewriter;">return</span></span></span><span class="mspace" id="MathJax-Span-5136" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5137" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5138" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5139" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5140" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5141" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5142" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5143" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-5144" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1008.1em, 4.444em, -1000em); top: 0.025em; left: 0em;"><span class="mtd" id="MathJax-Span-5147"><span class="mrow" id="MathJax-Span-5148"><span class="mi" id="MathJax-Span-5149"></span><span class="mspace" id="MathJax-Span-5150" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5151"><span class="mrow" id="MathJax-Span-5152"><span class="mo" id="MathJax-Span-5153" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5154" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5155"><span class="mrow" id="MathJax-Span-5156"><span class="mtext" id="MathJax-Span-5157" style="font-family: MathJax_Typewriter;">output</span></span></span><span class="mspace" id="MathJax-Span-5158" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5159" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5160" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5161" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5162" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5163" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5164" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5165" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-5166" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1005.2em, 4.444em, -1000em); top: 1.374em; left: 0em;"><span class="mtd" id="MathJax-Span-5169"><span class="mrow" id="MathJax-Span-5170"><span class="mi" id="MathJax-Span-5171"></span><span class="mspace" id="MathJax-Span-5172" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5173"><span class="mrow" id="MathJax-Span-5174"><span class="mo" id="MathJax-Span-5175" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5176" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5177"><span class="mrow" id="MathJax-Span-5178"><span class="mtext" id="MathJax-Span-5179" style="font-family: MathJax_Typewriter;">jump</span></span></span><span class="mspace" id="MathJax-Span-5180" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5181" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5182" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5183" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5184" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5185" style="font-family: MathJax_Math; font-style: italic;">l</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span><span style="position: absolute; clip: rect(3.101em, 1011.66em, 4.444em, -1000em); top: 2.723em; left: 0em;"><span class="mtd" id="MathJax-Span-5188"><span class="mrow" id="MathJax-Span-5189"><span class="mi" id="MathJax-Span-5190"></span><span class="mspace" id="MathJax-Span-5191" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5192"><span class="mrow" id="MathJax-Span-5193"><span class="mo" id="MathJax-Span-5194" style="font-family: MathJax_Main;">|</span></span></span><span class="mspace" id="MathJax-Span-5195" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="texatom" id="MathJax-Span-5196"><span class="mrow" id="MathJax-Span-5197"><span class="mtext" id="MathJax-Span-5198" style="font-family: MathJax_Typewriter;">jump_if_0</span></span></span><span class="mspace" id="MathJax-Span-5199" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5200" style="font-family: MathJax_Math; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5201" style="font-family: MathJax_Math; font-style: italic;">p</span><span class="mi" id="MathJax-Span-5202" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5203" style="font-family: MathJax_Math; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5204" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5205" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-5206" style="font-family: MathJax_Math; font-style: italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mspace" id="MathJax-Span-5207" style="height: 0em; vertical-align: 0em; width: 0.278em; display: inline-block; overflow: hidden;"></span><span class="mi" id="MathJax-Span-5208" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5209" style="font-family: MathJax_Math; font-style: italic;">a</span><span class="mi" id="MathJax-Span-5210" style="font-family: MathJax_Math; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5211" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5212" style="font-family: MathJax_Math; font-style: italic;">l</span></span></span><span style="display: inline-block; width: 0px; height: 4.023em;"></span></span></span><span style="display: inline-block; width: 0px; height: 15.46em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -8.181em; border-left: 0px solid; width: 0px; height: 16.942em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtable columnalign="right left right left right left right left right left right left" rowspacing="3pt" columnspacing="0em 2em 0em 2em 0em 2em 0em 2em 0em 2em 0em" minlabelspacing=".8em" displaystyle="true"><mtr><mtd><mi>b</mi><mi>i</mi><mi>n</mi><mi>o</mi><mi>p</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mo>+</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>−</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>∗</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>&lt;</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>&lt;=</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mo>=</mo><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>A</mi><mi>N</mi><mi>D</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>O</mi><mi>R</mi></mtd></mtr><mtr><mtd><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>t</mi></mtd></mtr><mtr><mtd><mi>i</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>u</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mtd><mtd><mi></mi><mo>::=</mo><mspace width="thickmathspace"></mspace><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mo>&lt;</mo><mo>−</mo><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mi>b</mi><mi>i</mi><mi>n</mi><mi>o</mi><mi>p</mi><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mo>&lt;</mo><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">NOT</mtext></mrow><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mo>&lt;</mo><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">CALL</mtext></mrow><mspace width="thickmathspace"></mspace><mi>f</mi><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mi>v</mi><mi>a</mi><mi>r</mi><mi>i</mi><mi>a</mi><mi>b</mi><mi>l</mi><mi>e</mi><mo>&lt;</mo><mo>−</mo><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">arg</mtext></mrow><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">return</mtext></mrow><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">output</mtext></mrow><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="thickmathspace"></mspace></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">jump</mtext></mrow><mspace width="thickmathspace"></mspace><mi>l</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi></mtd></mtr><mtr><mtd></mtd><mtd><mi></mi><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mspace width="thickmathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">jump_if_0</mtext></mrow><mspace width="thickmathspace"></mspace><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="thickmathspace"></mspace><mi>l</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi></mtd></mtr></mtable></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-176">\begin{align*}
          binop  & ::= \; +  \; | \; -  \; | \; *  \; | \; <  \; | \; <=  \; | \; =  \; | \; AND  \; | \; OR \\
        operand  & ::= \; variable  \; | \; constant \\
    instruction  & ::= \; variable <- \; operand \; binop \; operand \\
                 & \; | \; variable <- \texttt{NOT} \; operand \\
                 & \; | \; variable <- \texttt{CALL} \; function \\
                 & \; | \; variable <- \; operand \; \\
                 & \; | \; \texttt{arg} \; operand \; \\
                 & \; | \; \texttt{return} \; operand \; \\
                 & \; | \; \texttt{output} \; operand \; \\
                 & \; | \; \texttt{jump} \; label \\
                 & \; | \; \texttt{jump_if_0} \; operand \; label \\
\end{align*}</script>

<p>
The bodies of functions, and the global block are replaced with
vectors of IR instructions. The rest of the structure of the program
is same with IR .So, an IR program still consists of function
definitions, and a main part of the program. In general, having a
simple IR allows us to reason about our optimizations in a simpler and
modular fashion.
</p>
</section>

<div id="outline-container-orged21de2" class="outline-4">
<h4 id="orged21de2"><span class="section-number-4">5.3.1</span> Example</h4>
<section class="outline-text-4" id="text-5-3-1">
<p>
let's look at an example. here is the original program:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">bar</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> { <span style="color: #a020f0;">return</span> a + (a - 12) * 42; }

<span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;
    <span style="color: #008b8b;">x</span> := bar(a);
    <span style="color: #008b8b;">y</span> := bar(a+1);
    <span style="color: #a020f0;">return</span> x*y;
}

<span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
<span style="color: #a020f0;">while</span> (x &lt; 2) { <span style="color: #008b8b;">x</span> := x + 1; }
<span style="color: #008b8b;">x</span> := foo(x);
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>+3;
</code></pre>

<p>
here is the IR version:
</p>

<pre class="code"><code>    <span style="color: #228b22;">def</span> <span style="color: #0000ff;">bar</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) {
        _tmp0 &lt;- a - 12
        _tmp1 &lt;- _tmp0 * 42
        _tmp2 &lt;- a + _tmp1
        <span style="color: #a020f0;">return</span> _tmp2
    }

    <span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) {
        arg <span style="color: #228b22;">a</span>
        <span style="color: #a0522d;">x</span> &lt;- CALL bar
        _tmp0 &lt;- a + 1
        arg _tmp0
        y &lt;- CALL bar
        _tmp1 &lt;- x * y
        <span style="color: #a020f0;">return</span> _tmp1
    }

<span style="color: #008b8b;">WHILE_START_0</span>:
    _tmp0 &lt;- x &lt; 2
    jump_if_0 _tmp0 WHILE_END_0

    x &lt;- x + 1
    jump WHILE_START_0

WHILE_END_0:
    arg x
    x &lt;- CALL foo
    _tmp1 &lt;- x + 3
    output _tmp1
</code></pre>

<p>
Note that we are writing the labels on separate lines like
instructions for convenience, but they are not actually instructions
and do not take up a line of code.
</p>

<p>
We see that the IR is a lot like assembly, except that it's
higher-level (target agnostic, keeps the abstraction of functions and
function calls, arbitrary number of variables). It does strip away the
variable definitions, type annotations, etc because we assume that
these are already in the symbol table.
</p>

<p>
This IR is nicer to work with for optimizations because we do not have
to deal with complex nested expressions and we can assume that every
instruction is in one of a few kinds of formats and never has more
than two operands.
</p>

<p>
How do we generate the IR from the AST? it works exactly like the
codegen we have already examined, except emitting the IR instructions
instead of assembly. other than that, we can use the same strategy and
implementation. for clarity in this example i always created a new
temporary, but we could also reuse them between instructions using the
same strategy as we did for assembly code generation.
</p>
</section>
</div>

<div id="outline-container-orgf013a30" class="outline-4">
<h4 id="orgf013a30"><span class="section-number-4">5.3.2</span> exercise</h4>
<section class="outline-text-4" id="text-5-3-2">
<p>
Translate the following program:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) : <span style="color: #228b22;">int</span> {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;

  <span style="color: #008b8b;">x</span> := a + b * (a - b);

  <span style="color: #a020f0;">while</span> (y &lt;= x + 3) {
    <span style="color: #008b8b;">y</span> := y + 10;
  }

  <span style="color: #a020f0;">return</span> y * 2;
}

<span style="color: #228b22;">int</span> <span style="color: #a0522d;">t1</span>;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">t2</span>;

<span style="color: #008b8b;">t1</span> := 42;
<span style="color: #008b8b;">t2</span> := foo(t1 + 2, t1 * 2);
<span style="color: #a020f0;">if</span> (t1 &lt; t2) { <span style="color: #008b8b;">t1</span> := t2; }
<span style="color: #a020f0;">else</span> { <span style="color: #008b8b;">t1</span> := t1 + 2; }

<span style="color: #228b22;">output</span> <span style="color: #a0522d;">t1</span> + 42;
</code></pre>

<p>
Solution
</p>

<pre class="code"><code>    <span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
      _tmp0 <span style="color: #a020f0;">&lt;-</span> a - b
      _tmp1 <span style="color: #a020f0;">&lt;-</span> b * _tmp0
      x <span style="color: #a020f0;">&lt;-</span> a + _tmp1

<span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
      _tmp2 <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">3</span>
      _tmp3 <span style="color: #a020f0;">&lt;-</span> y &lt;= _tmp2
      jump_if_0 _tmp3 <span style="color: #008b8b;">WHILE_END_0</span>

      y <span style="color: #a020f0;">&lt;-</span> y + <span style="color: #008b8b;">10</span>
      jump <span style="color: #008b8b;">WHILE_START_0</span>

<span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
      _tmp4 <span style="color: #a020f0;">&lt;-</span> y * <span style="color: #008b8b;">2</span>
      <span style="color: #a020f0;">return</span> _tmp4
    }

    t1 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">42</span>
    _tmp0 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">2</span>
    _tmp1 <span style="color: #a020f0;">&lt;-</span> t1 * <span style="color: #008b8b;">2</span>
    arg _tmp0
    arg _tmp1
    t2 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">CALL</span> foo

    _tmp2 <span style="color: #a020f0;">&lt;-</span> t1 &lt; t2
    jump_if_0 _tmp2 <span style="color: #008b8b;">IF_FALSE_1</span>
    t1 <span style="color: #a020f0;">&lt;-</span> t2
    jump <span style="color: #008b8b;">IF_END_1</span>

<span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
    t1 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">2</span>

<span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
    _tmp3 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">42</span>
    output _tmp3
</code></pre>
</section>
</div>
</div>

<div id="outline-container-org064a7a8" class="outline-3">
<h3 id="org064a7a8"><span class="section-number-3">5.4</span> Control-flow graphs (also CFG)</h3>
<section class="outline-text-3" id="text-5-4">
<p>
Unlike codegen, we do not output the IR as a linear list of
instructions. instead, we use a data structure called the <i>control
flow graph</i>. Confusingly, we abbreviate this as CFG, just like
context-free grammars. so in the frontend CFG will mean context-free
grammar and in the middle-end it will mean control flow graph; you
just have to use the surrounding context to figure out which one is
meant.
</p>

<p>
A CFG models the control-flow of the program, i.e., which instructions
can execute after which other instructions. it is a directed graph
whose nodes are <i>basic blocks</i> (a sequence of instructions, to be
defined more precisely soon). an edge from basic block A to basic
block B means that immediately after A executes, B may execute (not
necessarily <i>must</i> execute, just <i>may</i> execute).
</p>

<p>
A <i>basic block</i> is a sequence of instructions with the following
property: control must enter at the first instruction of the block and
can only exit after the last instruction in the block, i.e., the block
has a single entry point and a single exit point. in other words, if
program execution enters the basic block then every instruction in the
basic block must be executed. <label for="21" class="margin-toggle sidenote-number"></label><input type="checkbox" id="21" class="margin-toggle"><span class="sidenote">When we were talking about
optimization scope and said that local optimizations operate on "small
fragments of code", what we really meant was basic blocks.</span>
</p>
</section>

<div id="outline-container-org2f3ff0c" class="outline-4">
<h4 id="org2f3ff0c"><span class="section-number-4">5.4.1</span> Examples</h4>
<section class="outline-text-4" id="text-5-4-1">
<p>
the CFG is perhaps more easily understood by example.
</p>

<p>
Example 1
</p>

<p>
program:
</p>

<pre class="code"><code><span style="color: #008b8b;">x</span> := foo();
<span style="color: #a020f0;">if</span> (x &lt; 10) { <span style="color: #008b8b;">x</span> := 3; <span style="color: #008b8b;">y</span> := 2; } <span style="color: #a020f0;">else</span> { <span style="color: #008b8b;">x</span> := 2; <span style="color: #008b8b;">y</span> := 3; }
<span style="color: #008b8b;">z</span> := x + y * 2;
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">z</span>;
</code></pre>

<p>
IR (here we label the basic blocks with letters [A], [B], …):
</p>

<pre class="code"><code>    [A]
    <span style="color: #a020f0;">x</span> &lt;- CALL foo
    <span style="color: #a020f0;">_tmp0</span> &lt;- x &lt; 10
    <span style="color: #a020f0;">jump_if_0</span> _tmp0 IF_FALSE_0

    [B]
    <span style="color: #a020f0;">x</span> &lt;- 3
    <span style="color: #a020f0;">y</span> &lt;- 2
    <span style="color: #a020f0;">jump</span> IF_END_0

    [C]
<span style="color: #0000ff;">IF_FALSE_0</span>:
    <span style="color: #a020f0;">x</span> &lt;- 2
    <span style="color: #a020f0;">y</span> &lt;- 3

    [D]
<span style="color: #0000ff;">IF_END_0</span>:
    <span style="color: #a020f0;">_tmp1</span> &lt;- y * 2
    <span style="color: #a020f0;">z</span> &lt;- x + _tmp1
    <span style="color: #a020f0;">output</span> z
</code></pre>

<p>
Each separate block of instructions is a basic block. Note that:
</p>
<ul class="org-ul">
<li>a jump, return, or output always ends a basic block.</li>
<li>a basic block doesn't have to end in a jump, return, or output (see
false branch).
<ul class="org-ul">
<li>the block has to end there because the next instruction is the
target of a jump and we cannot allow basic blocks to be entered
in the middle. since the way we're generating the IR every jump
target has to be a label, it's fair to say that any labeled
instruction will automatically start a new basic block.</li>
</ul></li>
<li>a call does not end a basic block. while it does transfer control
somewhere else, eventually that control will always return to
immediately after the call. That means we preserve the invariant
that every instruction in the basic block must be executed.</li>
</ul>

<p>
CFG:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/cfg1.png" alt="cfg1.png">

</figure>

<p>
Example 2:
</p>

<p>
[cfg2]
program:
</p>

<pre class="code"><code><span style="color: #008b8b;">x</span> := foo();
<span style="color: #a020f0;">while</span> (x &lt; 10) {
  <span style="color: #008b8b;">x</span> := x + 1;
  <span style="color: #008b8b;">y</span> := y + 1;
  <span style="color: #008b8b;">z</span> := x * y;
}
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">z</span>;
</code></pre>

<p>
IR:
</p>

<pre class="code"><code>    [A]
    <span style="color: #a020f0;">x</span> &lt;- CALL foo

    [B]
<span style="color: #0000ff;">WHILE_START_0</span>:
    <span style="color: #a020f0;">_tmp0</span> &lt;- x &lt; 10
    <span style="color: #a020f0;">jump_if_0</span> _tmp0 WHILE_END_0

    [C]
    <span style="color: #a020f0;">x</span> &lt;- x + 1
    <span style="color: #a020f0;">y</span> &lt;- y + 1
    <span style="color: #a020f0;">z</span> &lt;- x * y
    <span style="color: #a020f0;">jump</span> WHILE_START_0

    [D]
<span style="color: #0000ff;">WHILE_END_0</span>:
    <span style="color: #a020f0;">output</span> z
</code></pre>

<p>
CFG:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/cfg2.png" alt="cfg2.png">

</figure>

<p>
Example 3:
</p>

<p>
program:
</p>

<pre class="code"><code><span style="color: #008b8b;">x</span> := foo();
<span style="color: #a020f0;">while</span> (x &lt; 10) {
  <span style="color: #008b8b;">x</span> := x + 1;
  <span style="color: #a020f0;">if</span> (x &lt;= y) {
    <span style="color: #a020f0;">while</span> (x &lt; y) {
      <span style="color: #008b8b;">y</span> := y - 2;
    }
  }
}
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">y</span>;
</code></pre>

<p>
IR:
</p>

<pre class="code"><code>    [A]
    <span style="color: #a020f0;">x</span> &lt;- CALL foo

    [B]
<span style="color: #0000ff;">WHILE_START_0</span>:
    <span style="color: #a020f0;">_tmp0</span> &lt;- x &lt; 10
    <span style="color: #a020f0;">jump_if_0</span> _tmp0 WHILE_END_0

    [C]
    <span style="color: #a020f0;">x</span> &lt;- x + 1
    <span style="color: #a020f0;">_tmp1</span> &lt;- x &lt;= y
    <span style="color: #a020f0;">jump_if_0</span> _tmp1 IF_FALSE_1

    [D]
<span style="color: #0000ff;">WHILE_START_2</span>:
    <span style="color: #a020f0;">_tmp2</span> &lt;- x &lt; y
    <span style="color: #a020f0;">jump_if_0</span> _tmp2 WHILE_END_2

    [E]
    <span style="color: #a020f0;">y</span> &lt;- y - 2
    <span style="color: #a020f0;">jump</span> WHILE_START_2

    [F]
<span style="color: #0000ff;">WHILE_END_2</span>:
<span style="color: #0000ff;">IF_FALSE_1</span>:
    <span style="color: #a020f0;">jump</span> WHILE_START_0

    [G]
<span style="color: #0000ff;">WHILE_END_0</span>:
    <span style="color: #a020f0;">output</span> y
</code></pre>

<p>
CFG:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/cfg3.png" alt="cfg3.png">

</figure>
</section>
</div>

<div id="outline-container-org51979bb" class="outline-4">
<h4 id="org51979bb"><span class="section-number-4">5.4.2</span> Building a CFG</h4>
<section class="outline-text-4" id="text-5-4-2">
<p>
The basic algorithm for building a CFG is simple, though various
language features can complicate it a bit. Let's assume that we start
with a linear sequence of IR instructions (something like what we
would get from our codegen algorithm, a vector of instructions, but IR
instructions rather than assembly instructions). Also, this is per
function (including treating the "global" block of code ending in
'output' as a function itself).
</p>

<p>
[cfg4]
</p>

<p>
We will use the following example to illustrate the algorithm:
</p>

<pre class="code"><code><span style="color: #0000ff;">00</span>  <span style="color: #a020f0;">x</span> &lt;- CALL foo
<span style="color: #0000ff;">01</span>  <span style="color: #a020f0;">WHILE</span>_START_0: _tmp0 &lt;- x &lt; 10
<span style="color: #0000ff;">02</span>  <span style="color: #a020f0;">jump</span>_if_0 _tmp0 WHILE_END_0
<span style="color: #0000ff;">03</span>  <span style="color: #a020f0;">x</span> &lt;- x + 1
<span style="color: #0000ff;">04</span>  _tmp1 &lt;- x &lt;= y
<span style="color: #0000ff;">05</span>  <span style="color: #a020f0;">jump</span>_if_0 _tmp1 IF_FALSE_1
<span style="color: #0000ff;">06</span>  <span style="color: #a020f0;">WHILE</span>_START_2: _tmp2 &lt;- x &lt; y
<span style="color: #0000ff;">07</span>  <span style="color: #a020f0;">jump</span>_if_0 _tmp2 WHILE_END_2
<span style="color: #0000ff;">08</span>  <span style="color: #a020f0;">y</span> &lt;- y - 2
<span style="color: #0000ff;">09</span>  <span style="color: #a020f0;">jump</span> WHILE_START_2
<span style="color: #0000ff;">10</span>  <span style="color: #a020f0;">WHILE</span>_END_2: IF_FALSE_1: jump WHILE_START_0
<span style="color: #0000ff;">11</span>  <span style="color: #a020f0;">WHILE</span>_END_0: output y
</code></pre>

<ol class="org-ol">
<li><p>
Identify all "leader" instructions (the instructions that start a
basic block). A leader is the first instruction in the function,
any labeled instruction (because it can be the target of a jump),
and any instruction immediately following a conditional jump
(because it is the fall-through instruction if the conditional jump
is not taken). Remember to treat multiple consecutive labels as a
single label for these purposes. Save the indices of these leader
instructions in a vector, in the order they appear in the
instruction sequence.
</p>

<p>
==&gt; the leaders for the example are indices { 00, 01, 03, 06, 08, 10, 11 }.
</p></li>

<li><p>
Record the basic blocks as the sequences of instructions from each
leader up to, but not including, the next leader in sequence.
</p>

<p>
The basic blocks for the example are:
</p>

<pre class="code"><code>[A]
<span style="color: #0000ff;">00</span> <span style="color: #a020f0;">x</span> &lt;- CALL foo

[B]
<span style="color: #0000ff;">01</span> <span style="color: #a020f0;">WHILE</span>_START_0: _tmp0 &lt;- x &lt; 10
<span style="color: #0000ff;">02</span> <span style="color: #a020f0;">jump</span>_if_0 _tmp0 WHILE_END_0

[C]
<span style="color: #0000ff;">03</span> <span style="color: #a020f0;">x</span> &lt;- x + 1
<span style="color: #0000ff;">04</span> _tmp1 &lt;- x &lt;= y
<span style="color: #0000ff;">05</span> <span style="color: #a020f0;">jump</span>_if_0 _tmp1 IF_FALSE_1

[D]
<span style="color: #0000ff;">06</span> <span style="color: #a020f0;">WHILE</span>_START_2: _tmp2 &lt;- x &lt; y
<span style="color: #0000ff;">07</span> <span style="color: #a020f0;">jump</span>_if_0 _tmp2 WHILE_END_2

[E]
<span style="color: #0000ff;">08</span> <span style="color: #a020f0;">y</span> &lt;- y - 2
<span style="color: #0000ff;">09</span> <span style="color: #a020f0;">jump</span> WHILE_START_2

[F]
<span style="color: #0000ff;">10</span> <span style="color: #a020f0;">WHILE</span>_END_2: IF_FALSE_1: jump WHILE_START_0

[G]
<span style="color: #0000ff;">11</span> <span style="color: #a020f0;">WHILE</span>_END_0: output y
</code></pre></li>

<li>For each basic block, look at the last instruction:

<ol class="org-ol">
<li><p>
if it is not a jump, add an edge from this basic block to the
basic block whose leader is immediately next in sequence. 
</p>

<p>
==&gt; basic block A has an edge to B; basic block G would have an
edge but it ends the function so it doesn't.
</p></li>

<li><p>
if it is an unconditional jump to label L, add an edge from this
basic block to the basic block whose leader is labeled L.
</p>

<p>
==&gt; for the example, basic block E has an edge to D; basic block
F has an edge to B.
</p></li>

<li>if it is a conditional jump to label L:

<ol class="org-ol">
<li>add an edge from this basic block to the basic block whose
leader is immediately next in sequence.</li>
<li>add an edge from this basic block to the basic block whose
leader is labeled L.</li>
</ol></li>
</ol></li>
</ol>

<p>
==&gt; for the example, basic block B has edges to C and G; basic block C
has edges to D and F; basic block D has edges to E and F.
</p>
</section>
</div>

<div id="outline-container-org6994b10" class="outline-4">
<h4 id="org6994b10"><span class="section-number-4">5.4.3</span> Exercise</h4>
<section class="outline-text-4" id="text-5-4-3">
<p>
[cfg5]
</p>

<p>
Create the CFG for the following program:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  _tmp0 <span style="color: #a020f0;">&lt;-</span> a - b
  _tmp1 <span style="color: #a020f0;">&lt;-</span> b * _tmp0
  x <span style="color: #a020f0;">&lt;-</span> a + _tmp1
  <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp2 <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">3</span>
  _tmp3 <span style="color: #a020f0;">&lt;-</span> y &lt;= _tmp2
  jump_if_0 _tmp3 <span style="color: #008b8b;">WHILE_END_0</span>
  y <span style="color: #a020f0;">&lt;-</span> y + <span style="color: #008b8b;">10</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>
  <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  _tmp4 <span style="color: #a020f0;">&lt;-</span> y * <span style="color: #008b8b;">2</span>
  <span style="color: #a020f0;">return</span> _tmp4
}

t1 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">42</span>
_tmp0 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">2</span>
_tmp1 <span style="color: #a020f0;">&lt;-</span> t1 * <span style="color: #008b8b;">2</span>
arg _tmp0
arg _tmp1
t2 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">CALL</span> foo
_tmp2 <span style="color: #a020f0;">&lt;-</span> t1 &lt; t2
jump_if_0 _tmp2 <span style="color: #008b8b;">IF_FALSE_1</span>
t1 <span style="color: #a020f0;">&lt;-</span> t2
jump <span style="color: #008b8b;">IF_END_1</span>
<span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
t1 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">2</span>
<span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
_tmp3 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">42</span>
output _tmp3
</code></pre>

<p>
Solution
</p>

<p>
basic blocks:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">A</span>]
  _tmp0 <span style="color: #a020f0;">&lt;-</span> a - b
  _tmp1 <span style="color: #a020f0;">&lt;-</span> b * _tmp0
  x <span style="color: #a020f0;">&lt;-</span> a + _tmp1

  [<span style="color: #008b8b;">B</span>]
  <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp2 <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">3</span>
  _tmp3 <span style="color: #a020f0;">&lt;-</span> y &lt;= _tmp2
  jump_if_0 _tmp3 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">C</span>]
  y <span style="color: #a020f0;">&lt;-</span> y + <span style="color: #008b8b;">10</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">D</span>]
  <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  _tmp4 <span style="color: #a020f0;">&lt;-</span> y * <span style="color: #008b8b;">2</span>
  <span style="color: #a020f0;">return</span> _tmp4
}

[<span style="color: #008b8b;">E</span>]
t1 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">42</span>
_tmp0 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">2</span>
_tmp1 <span style="color: #a020f0;">&lt;-</span> t1 * <span style="color: #008b8b;">2</span>
arg _tmp0
arg _tmp1
t2 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">CALL</span> foo
_tmp2 <span style="color: #a020f0;">&lt;-</span> t1 &lt; t2
jump_if_0 _tmp2 <span style="color: #008b8b;">IF_FALSE_1</span>

[<span style="color: #008b8b;">F</span>]
t1 <span style="color: #a020f0;">&lt;-</span> t2
jump <span style="color: #008b8b;">IF_END_1</span>

[<span style="color: #008b8b;">G</span>]
<span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
t1 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">2</span>

[<span style="color: #008b8b;">H</span>]
<span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
_tmp3 <span style="color: #a020f0;">&lt;-</span> t1 + <span style="color: #008b8b;">42</span>
output _tmp3
</code></pre>

<p>
cfg:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/exercise-cfg.png" alt="exercise-cfg.png">

</figure>
</section>
</div>
</div>

<div id="outline-container-org806cd5a" class="outline-3">
<h3 id="org806cd5a"><span class="section-number-3">5.5</span> Local optimizations</h3>
<section class="outline-text-3" id="text-5-5">
<p>
Local optimizations operate on basic blocks; we iterate through each
block (in arbitrary order) and apply the local optimizations to
optimize each block in isolation from each other. We have seen some of
these optimizations as examples in the beginning of the optimization
section.
</p>
</section>

<div id="outline-container-orgbe6bf0f" class="outline-4">
<h4 id="orgbe6bf0f"><span class="section-number-4">5.5.1</span> Constant Folding and Arithmetic Identities</h4>
<section class="outline-text-4" id="text-5-5-1">
<p>
We have already mentioned these; they are simple optimizations that
operate on single instructions. The idea is that sometimes we do not
need to wait for the program to execute in order to evaluate
expressions, we can do it right in the compiler.
</p>

<p>
For each instruction:
</p>
<ul class="org-ul">
<li>if all the operands are constants, evaluate the operation</li>
<li><p>
if some of the operands are constant, attempt to apply an
arithmetic identity:
</p>

<pre class="code"><code>x * <span style="color: #008b8b;">1</span> <span style="color: #a020f0;">=</span> x
<span style="color: #008b8b;">1</span> * x <span style="color: #a020f0;">=</span> x
x * <span style="color: #008b8b;">0</span> <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
<span style="color: #008b8b;">0</span> * x <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
x + <span style="color: #008b8b;">0</span> <span style="color: #a020f0;">=</span> x
<span style="color: #008b8b;">0</span> + x <span style="color: #a020f0;">=</span> x
x - <span style="color: #008b8b;">0</span> <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
<span style="color: #008b8b;">0</span> - x <span style="color: #a020f0;">=</span> -x
x - x <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
</code></pre></li>
</ul>

<p>
We can also apply logical identities under our assumption that 0 is
false and non-0 is true:
</p>

<pre class="code"><code><span style="color: #008b8b;">0</span> ∧ x <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
x ∧ <span style="color: #008b8b;">0</span> <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
non-0 ∧ x <span style="color: #a020f0;">=</span> x
x ∧ non-0 <span style="color: #a020f0;">=</span> x
<span style="color: #008b8b;">0</span> ∨ x <span style="color: #a020f0;">=</span> x
x ∨ <span style="color: #008b8b;">0</span> <span style="color: #a020f0;">=</span> x
non-0 ∨ x <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">1</span>
x ∨ non-0 <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">1</span>
</code></pre>

<p>
We can also handle some identities for the relational operators that
probably would not happen but are easy enough to check for that we
might as well. These identities may also show up after the result of
other optimizations:
</p>

<pre class="code"><code>(x &lt; x) <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">0</span>
(x ≤ x) <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">1</span>
(x <span style="color: #a020f0;">=</span> x) <span style="color: #a020f0;">=</span> <span style="color: #008b8b;">1</span>
</code></pre>
</section>
</div>

<div id="outline-container-orge61e27a" class="outline-4">
<h4 id="orge61e27a"><span class="section-number-4">5.5.2</span> Local value numbering</h4>
<section class="outline-text-4" id="text-5-5-2">
<p>
This is a slightly more complicated optimization that operates on the
entire basic block. Our goal is to identify redundant expressions
computed by the basic block so that we do not compute the same
expression more than once.
</p>

<p>
Example 1:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
c <span style="color: #a020f0;">&lt;-</span> a + b
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
e <span style="color: #a020f0;">&lt;-</span> a + b
</code></pre>

<p>
The second 'a + b' is redundant and we could optimize this as:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
c <span style="color: #a020f0;">&lt;-</span> a + b
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
e <span style="color: #a020f0;">&lt;-</span> c
</code></pre>

<p>
A naive approach would be to simply scan down the list of instructions
in the basic block and record which ones we see; if we see it again,
replace it with the left-hand side of the first instruction to compute
that expression. This approach would work for the example above, but
suppose we have instead:
</p>

<p>
Example 2:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
c <span style="color: #a020f0;">&lt;-</span> a + b
a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
e <span style="color: #a020f0;">&lt;-</span> a + b
</code></pre>

<p>
Now, the optimization would be incorrect, because the value of the
second <code>a + b</code> is different than the value of the first <code>a + b</code>. Here
is another problem:
</p>

<p>
Example 3:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
c <span style="color: #a020f0;">&lt;-</span> a + b
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>
e <span style="color: #a020f0;">&lt;-</span> b + a
</code></pre>

<p>
The second expression <code>b + a</code> is syntactically different than the
first <code>a + b</code> but is semantically identical because addition is
commutative. We need to be able to recognize that fact (while still
distinguishing non-commutative expressions like <code>a - b</code> and <code>b - a</code>).
</p>

<p>
We need a scheme that can solve both problems. Our strategy will be to
tag expressions with numbers s.t. semantically identical expressions
(like <code>a + b</code> and <code>b + a</code> in example 3) are given the same number and
hence are recognized as equivalent while semantically different
expressions (like the first <code>a + b</code> and the second <code>a + b</code> in
example 2) are given different numbers.
</p>

<p>
The idea is that we want to distinguish between the variables (which
are just arbitrary names for unknown values) and the values of those
variables. We are going to label variables to capture different
valuations they may have during their lifetime.
</p>

<p>
Note that our goal is not to guarantee that we find all equivalent
expressions; this is uncomputable in general. We want to find as many
as we can while still being fast and while guaranteeing that we never
incorrectly find non-equivalent expressions to be equivalent. The
trade-off between precision (or efficacy) and tractability is a common
one that shows up in program analysis a lot, since determining
semantic properties of programs precisely is undecidable.
</p>

<p>
The algorithm:
</p>

<ol class="org-ol">
<li>initialize a table mapping expressions to value numbers (starting
empty). we often use a hash table, and thus this optimization is
sometimes called "hash-based value numbering".</li>

<li>for each copy, unary, and binary operator instruction in order:
<ol class="org-ol">
<li>look up each variable operand to get its value number; assign a
fresh number if it doesn't have one already and record it in the
table.</li>
<li>if the operator is commutative, order the operand value numbers
from least to greatest.</li>
<li>look up the entire expression (using the operand numbers instead
of variables) in the table to get its number; assign a fresh
number if it doesn't have one already and record it in the
table.</li>
<li>update the table to map the left-hand side variable to the
number for the right-hand side expression.</li>
</ol></li>

<li>for any two instructions '<code>&lt;var1&gt;</code> &lt;- <code>&lt;exp1&gt;</code>' and '<code>&lt;var2&gt;</code> &lt;- <code>&lt;exp2&gt;</code>'
in order s.t. <code>&lt;var1&gt;</code> and <code>&lt;var2&gt;</code> have the same value number at the
'<code>&lt;var2&gt;</code> &lt;- <code>&lt;exp2&gt;</code>' instruction, we can replace <code>&lt;exp2&gt;</code> with <code>&lt;var1&gt;</code>.</li>
</ol>

<p>
Example 1 redux
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">4 = #1, a = #1</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">5 = #2, b = #2</span>
c <span style="color: #a020f0;">&lt;-</span> a + b  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, c = #3</span>
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">5 = #2, d = #2</span>
e <span style="color: #a020f0;">&lt;-</span> a + b  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, e = #3</span>
</code></pre>

<p>
we see that c = #3 and e = #3, thus we can replace the last
instruction with 'e &lt;- c'.
</p>

<p>
Example 2 redux
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">4 = #1, a = #1</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">5 = #2, b = #2</span>
c <span style="color: #a020f0;">&lt;-</span> a + b  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, c = #3</span>
a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">5 = #2, a = #2</span>
e <span style="color: #a020f0;">&lt;-</span> a + b  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#2 + #2) = #4, e = #4</span>
</code></pre>

<p>
here we see that c and e have different tags, thus they are not
guaranteed to be equivalent and we cannot apply the transformation.
</p>

<p>
Example 3 redux
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">4</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">4 = #1, a = #1</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">5 = #2, b = #2</span>
c <span style="color: #a020f0;">&lt;-</span> a + b  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, c = #3</span>
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">5</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">5 = #2, d = #2</span>
e <span style="color: #a020f0;">&lt;-</span> b + a  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, e = #3</span>
</code></pre>

<p>
because we reordered the value numbers for + expressions, we still
recognize that c and e are equivalent in this case.
</p>

<p>
Example 4
</p>

<pre class="code"><code>x <span style="color: #a020f0;">&lt;-</span> a + d  <span style="color: #b22222;">// </span><span style="color: #b22222;">a = #1, d = #2, (#1 + #2) = #3</span>
y <span style="color: #a020f0;">&lt;-</span> a      <span style="color: #b22222;">// </span><span style="color: #b22222;">y = #1</span>
z <span style="color: #a020f0;">&lt;-</span> y + d  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, z = #3</span>
</code></pre>

<p>
we can see from this example that local value numbering can discover
equivalent expressions even if they use different variables
altogether.
</p>

<p>
Let's look at another example where the same expression appears in
multiple places:
</p>

<p>
Example 5
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> x + y  <span style="color: #b22222;">// </span><span style="color: #b22222;">x = #1, y = #2, (#1 + #2) = #3, a = #3</span>
b <span style="color: #a020f0;">&lt;-</span> x + y  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, b = #3</span>
a <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">a = #4</span>
c <span style="color: #a020f0;">&lt;-</span> x + y  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, c = #3</span>
b <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">2</span>      <span style="color: #b22222;">// </span><span style="color: #b22222;">b = #5</span>
d <span style="color: #a020f0;">&lt;-</span> x + y  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, d = #3</span>
</code></pre>

<p>
How can we transform this code to optimize it based on the value
numbering? We know that <code>x + y</code> in all four expressions will have the
same value, but <code>a</code> and <code>b</code> are redefined at various points.  So, it
would be incorrect to replace <code>c &lt;- x + y</code> with <code>c &lt;- a</code> (However,
rewriting it as <code>c &lt;- b</code> is fine). Similarly, it would be incorrect to
replace <code>d &lt;- x + y</code> with either <code>d &lt;- a</code> or <code>d &lt;- b</code>.
</p>

<p>
This is why we have the caveat in the algorithm that we can only
replace <code>&lt;exp2&gt;</code> with <code>&lt;var1&gt;</code> <i>if</i> <code>&lt;var1&gt;</code> and <code>&lt;var2&gt;</code> have the
same value number <i>at that instruction</i>. For the instruction <code>c &lt;- x + y</code>
 we see that while <code>a</code> originally also had value number #3, now it
has value number #4 and so cannot be used. similarly, for the
instruction <code>d &lt;- x + y</code> we see that neither <code>a</code> nor <code>b</code> still have
value number #3 and so neither can be used.
</p>

<p>
It is annoying that we have to recompute <code>x + y</code> in the last
instruction just because we have overwritten <code>a</code> and <code>b</code> already. We
could get around this problem by renaming variables whenever they are
assigned to keep them unique:
</p>

<pre class="code"><code>a0 <span style="color: #a020f0;">&lt;-</span> x0 + y0  <span style="color: #b22222;">// </span><span style="color: #b22222;">x0 = #1, y0 = #2, (#1 + #2) = #3, a0 = #3</span>
b0 <span style="color: #a020f0;">&lt;-</span> x0 + y0  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, b0 = #3</span>
a1 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>        <span style="color: #b22222;">// </span><span style="color: #b22222;">a1 = #4</span>
c0 <span style="color: #a020f0;">&lt;-</span> x0 + y0  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, c0 = #3</span>
b1 <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">2</span>        <span style="color: #b22222;">// </span><span style="color: #b22222;">b1 = #5</span>
d0 <span style="color: #a020f0;">&lt;-</span> x0 + y0  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 + #2) = #3, d0 = #3</span>
</code></pre>

<p>
now we can replace <code>d0 &lt;- x0 + y0</code> with either <code>d0 &lt;- a0</code> or <code>d0 &lt;-
b0</code> with no problem. there is an issue though: renaming in this way
becomes much more complicated with we look at the entire function,
particularly when we have multiple branches that each redefine the
same variables. We would need a way to merge the values from different
branches. This leads to a form of IR called "static single assignment
form" (SSA), which is a popular variant of IR in modern compilers
(both gcc and llvm use it). We may talk about SSA later, but for now
we will stick to the original IR we have already defined.
</p>
</section>
</div>

<div id="outline-container-orgecc0571" class="outline-4">
<h4 id="orgecc0571"><span class="section-number-4">5.5.3</span> Exercise</h4>
<section class="outline-text-4" id="text-5-5-3">
<p>
optimize the following code using local value numbering:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> b - c
d <span style="color: #a020f0;">&lt;-</span> c - b
e <span style="color: #a020f0;">&lt;-</span> c
f <span style="color: #a020f0;">&lt;-</span> a <span style="color: #008b8b;">AND</span> d
g <span style="color: #a020f0;">&lt;-</span> b - e
h <span style="color: #a020f0;">&lt;-</span> d <span style="color: #008b8b;">AND</span> a
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">42</span>
i <span style="color: #a020f0;">&lt;-</span> e - b
</code></pre>

<p>
Solution:
</p>

<p>
value-numbered code:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> b - c    <span style="color: #b22222;">// </span><span style="color: #b22222;">b = #1, c = #2, (#1 - #2) = #3, a = #3</span>
d <span style="color: #a020f0;">&lt;-</span> c - b    <span style="color: #b22222;">// </span><span style="color: #b22222;">(#2 - #1) = #4, d = #4</span>
e <span style="color: #a020f0;">&lt;-</span> c        <span style="color: #b22222;">// </span><span style="color: #b22222;">e = #2</span>
f <span style="color: #a020f0;">&lt;-</span> a <span style="color: #008b8b;">AND</span> d  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#3 AND #4) = #5, f = #5</span>
g <span style="color: #a020f0;">&lt;-</span> b - e    <span style="color: #b22222;">// </span><span style="color: #b22222;">(#1 - #2) = #3, g = #3</span>
h <span style="color: #a020f0;">&lt;-</span> d <span style="color: #008b8b;">AND</span> a  <span style="color: #b22222;">// </span><span style="color: #b22222;">(#3 AND #4) = #5, h = #5</span>
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">42</span>       <span style="color: #b22222;">// </span><span style="color: #b22222;">42 = #6, d = #6</span>
i <span style="color: #a020f0;">&lt;-</span> e - b    <span style="color: #b22222;">// </span><span style="color: #b22222;">(#2 - #1) = #4, i = #4</span>
</code></pre>

<p>
transformed code:
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> b - c
d <span style="color: #a020f0;">&lt;-</span> c - b
e <span style="color: #a020f0;">&lt;-</span> c
f <span style="color: #a020f0;">&lt;-</span> a <span style="color: #008b8b;">AND</span> d
g <span style="color: #a020f0;">&lt;-</span> a
h <span style="color: #a020f0;">&lt;-</span> f
d <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">42</span>
i <span style="color: #a020f0;">&lt;-</span> e - b
</code></pre>
</section>
</div>
</div>

<div id="outline-container-org3b86369" class="outline-3">
<h3 id="org3b86369"><span class="section-number-3">5.6</span> Data Flow Analysis</h3>
<section class="outline-text-3" id="text-5-6">
<p>
We have looked at analysis and optimization at the basic block level
(local optimization), but the limited scope means that we can miss
many optimization opportunities. Let's widen our scope to entire
functions, i.e., global optimization.
</p>

<p>
The analyses required for global optimization tend to be more
complicated than for local optimization, and programming language
researchers have developed a specific theoretical framework for it
called "data flow analysis" (DFA for short). Compiler developers tried
a lot of ad-hoc global analyses at first, but found that they were
very difficult to get correct; data flow analysis provides a handy set
of tools such that, if you use them correctly, you will get a correct
analysis where you can prove correctness mathematically.
</p>

<p>
We will first introduce some fundamental ideas that will be important
for understanding how DFA works at a high level. Then we will look at
some specific examples of analyses and the optimizations they
enable. finally, we will generalize to the DFA framework and discuss its
properties.
</p>
</section>

<div id="outline-container-org0fefb1f" class="outline-4">
<h4 id="org0fefb1f"><span class="section-number-4">5.6.1</span> Motivation</h4>
<section class="outline-text-4" id="text-5-6-1">
<p>
When we are analyzing a function, we are trying to compute invariants
about its behavior when it executes: <i>What facts are always true no
matter what arguments we give the function?</i>
</p>

<p>
Here is a simple example:
</p>

<p>
Example 1
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #a020f0;">if</span> (a &lt; b) { <span style="color: #008b8b;">c</span> := b - a; }
    <span style="color: #a020f0;">else</span> { <span style="color: #008b8b;">c</span> := a - b; }
    <span style="color: #a020f0;">return</span> c;
}
</code></pre>

<p>
Given this function, we don't know what the values of the arguments
will be, nor whether we will take the true or false branch of the
conditional. But we can infer the invariant that the value returned by
this function will always be non-negative. here is our reasoning:
</p>

<ul class="org-ul">
<li>either a &lt; b or b &lt; a or a = b.</li>
<li>if a &lt; b then we take the true branch, c is positive</li>
<li>if b &lt; a then we take the false branch, c is positive</li>
<li>if a = b then we take the false branch, c is zero</li>
<li>therefore c cannot be negative at the return statement</li>
</ul>

<p>
In this example we are reasoning about the sign of <code>c</code> (positive,
negative, or zero), so the facts that we care about pertain to
that. In other analyses we care about other properties (as we will see
examples of soon). Data flow analysis provides a general framework
that is independent of the particular facts we want to reason about;
basically, it is a template into which we plug in different kinds of
properties we keep track of depending on the specific analysis we are
trying to perform.
</p>

<p>
How do we perform our reasoning over the facts that we care about? In
the example we reasoned about each possible path that execution could
take through the function (i.e., it could take the true branch or the
false branch, then either way it will reach the return
statement). This is easy if there's only one or a few possible paths,
but in general this won't work.
</p>

<p>
Example 2
</p>

<pre class="code"><code>A
<span style="color: #a020f0;">if</span> (...) { B } { C }
<span style="color: #a020f0;">if</span> (...) { D } { E }
</code></pre>

<p>
possible paths in the program:
</p>

<ul class="org-ul">
<li>A → B → D</li>
<li>A → B → E</li>
<li>A → C → D</li>
<li>A → C → E</li>
</ul>

<p>
There are 2<sup>2</sup> paths
</p>

<p>
Example 3
</p>

<pre class="code"><code>A
<span style="color: #a020f0;">if</span> (...) { B } { C }
<span style="color: #a020f0;">if</span> (...) { D } { E }
<span style="color: #a020f0;">if</span> (...) { F } { G }
</code></pre>

<p>
possible paths:
</p>

<ul class="org-ul">
<li>A → B → D → F</li>
<li>A → B → D → G</li>
<li>A → B → E → F</li>
<li>A → B → E → G</li>
<li>A → C → D → F</li>
<li>A → C → D → G</li>
<li>A → C → E → F</li>
<li>A → C → E → G</li>
</ul>

<p>
There are 2<sup>3</sup> paths
</p>

<p>
In general, for n conditionals there are 2<sup>n</sup> paths: an exponential
blowup. Things are worse for loops:
</p>

<p>
Example 4
</p>

<pre class="code"><code>A
<span style="color: #a020f0;">while</span> (...) { B }
C
</code></pre>

<p>
possible paths:
</p>

<ul class="org-ul">
<li>A → C</li>
<li>A → B → C</li>
<li>A → B → B → C</li>
<li>A → B → B → B → C</li>
<li>…</li>
</ul>

<p>
there are an arbitrary, possibly infinite number of paths.
</p>

<p>
Somehow, we need to reason about the function's behavior without
reasoning about each path it could take. However, remember that in
order to use the analysis results to optimize the function, we need to
be safe: if we say that something is true about the function, it must
really be true or the optimization could break the program. So the
analysis must never return a false invariant (i.e., a fact that isn't
true for some path in the function), but it can't reason about each
path independently.
</p>

<p>
DFA handles this conundrum by computing a conservative
over-approximation of program behavior. What this means is that we
don't promise to compute all true facts, but we do promise that any
facts we compute are true. So, the result of the analysis covers all
possible executions of the program.
</p>

<p>
Example 5
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #a020f0;">if</span> (a &lt; b) { <span style="color: #008b8b;">c</span> := b - a; }
    <span style="color: #a020f0;">if</span> (b &lt; a) { <span style="color: #008b8b;">c</span> := a - b; }
    <span style="color: #a020f0;">if</span> (a = b) { <span style="color: #008b8b;">c</span> := 1; }
    <span style="color: #a020f0;">return</span> c;
}
</code></pre>

<p>
For this example we can reason about signedness again and determine
that <code>c</code> must always be positive at the return statement. However, our
analysis may only return that <code>c</code> will be non-negative. This is a true
invariant, but it is not as precise as it could be (being positive
implies being non-negative). We will allow our analyses to be less
precise in order to make them tractable. being less precise means that
the information may not be as useful for optimization (i.e., we may
miss optimization opportunities), but because the information is
always true we are guaranteed that the optimizations will not break
the program.
</p>
</section>
</div>

<div id="outline-container-org639c018" class="outline-4">
<h4 id="org639c018"><span class="section-number-4">5.6.2</span> DFA fundamentals</h4>
<section class="outline-text-4" id="text-5-6-2">
<p>
Let's look at the general DFA framework. We will examine it at a high
level here with a simple example, then look at some more examples of
common compiler analyses and optimizations, then look at the details
of the DFA framework after you have that context. When we go over the
high level below it will be very abstract and probably hard to
understand. I recommend going through it, then going through the
examples, then returning to the high level explanation again once you
have the examples as context.
</p>

<p>
We will let L be a set of dataflow facts, whatever they are (for
example, variable signedness in the motivation section above). These
will be the possible answers that we compute for the analysis.
</p>

<p>
For each basic block k in the CFG, we will define IN<sub>k</sub> and OUT<sub>k</sub> to be
the dataflow facts that hold immediately before the basic block is
executed and immediately afterwards, respectively. so IN<sub>k</sub> and OUT<sub>k</sub> ∈
L.
</p>

<p>
For each basic block, we will compute OUT (the output set of data flow
facts) from IN (the input set of dataflow facts) based on the IR
instructions in the basic block. However, the IR instructions operate
on values (e.g., integers) while the analysis operates on data flow
facts. so we need to redefine the IR instructions in terms of how they
operate on the dataflow facts. since this depends on what data flow
facts we are tracking for a given analysis, these "abstract transfer
functions" are another thing we plug into the DFA framework along with
L.
</p>

<ul class="org-ul">
<li>let F<sub>k</sub> be the abstract transfer function for basic block k</li>
<li>then OUT<sub>k</sub> = F<sub>k</sub>(IN<sub>k</sub>)</li>
</ul>

<p>
Of course, we need to know IN<sub>k</sub> for each basic block. If the basic
block only has one predecessor, then that's easy: If the predecessor
is block p (for predecessor), then IN<sub>k</sub> = OUT<sub>p</sub>. [show picture]
</p>

<p>
But what if block k has two predecessors, say p1 and p2? 
Then IN<sub>k</sub> has to be a safe approximation of both of their
outputs. In other words, IN<sub>k</sub> can only contain facts that are true of
both OUT<sub>p1</sub> and OUT<sub>p2</sub>. how do we compute this approximation? We use
an operator called the "meet" operator ⊓.
</p>

<pre class="code"><code>IN_k = OUT_p if p is the only predecessor of k
     = OUT_p1 ⊓ OUT_p2 if p1 and p2 are the predecessors of k
</code></pre>

<p>
For simplicity, we will say this as: IN<sub>k</sub> = ⊓ OUT<sub>p</sub> s.t. p is a
predecessor of k
</p>

<p>
the definition of ⊓ is also specific to L, and so it is another thing
that we plug into the DFA framework along with L and the abstract
transfer functions.
</p>

<p>
Now we have a set of simultaneous equations, i.e., for each basic
block k:
</p>

<pre class="code"><code>IN_k = ⊓ OUT_p s.t. p is a predecessor of k
OUT_k = F_k(IN_k)
</code></pre>

<p>
Note that because of loops, these equations may be recursive, that is,
IN<sub>k</sub> may transitively depend on OUT<sub>k</sub> (we will see an example
shortly).
</p>

<p>
The actual analysis consists of solving these equations to compute
values for IN<sub>k</sub> and OUT<sub>k</sub> for every basic block k; these will be the
solutions of the analysis. how do we solve them? The idea is that we
want the <i>least fixpoint</i> of these equations, and that will be our
analysis answer.
</p>

<p>
A fixpoint of a function is an input x s.t. <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-177-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5213" style="width: 4.436em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.818em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1003.77em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-5214"><span class="mi" id="MathJax-Span-5215" style="font-family: MathJax_Math; font-style: italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.06em;"></span></span><span class="mo" id="MathJax-Span-5216" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-5217" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-5218" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-5219" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-5220" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">x</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-177"> f(x) = x </script> ; i.e., an
input s.t. applying the function to the input yields itself. a
function in general may have any number of fixpoints, from 0 to
infinity. let's see some examples:
</p>

<pre class="code"><code>f(x) = x + 2  [0 fixpoints]
f(x) = x² - x [2 fixpoints]
f(x) = x² ÷ x [∞ fixpoints]
</code></pre>

<p>
If there are multiple fixpoints then we want the most precise one (the
<i>least</i> fixpoint). For example, in the case above where there are two
fixpoints (0 and 1), the least fixpoint is 0. even if there are
multiple fixpoints, there may not be a least fixpoint. for example, in
the case above where there are infinite fixpoints there is no least
fixpoint (assuming we are operating over integers rather than natural
numbers).
</p>

<p>
Fortunately the details of the DFA framework (to be discussed later)
will guarantee that a least fixpoint always exists and is
computable. so how do we compute it?
</p>

<p>
The traditional algorithm is a worklist algorithm. We initialize IN<sub>k</sub>
and OUT<sub>k</sub> for every basic block to an initial value, then initialize a
worklist to contain all of the basic blocks. then:
</p>

<pre class="code"><code>while the worklist is not empty:
  remove a basic block from the worklist, call it k
  compute a new IN_k and OUT_k
  if OUT_k changed:
    put any basic block m s.t. IN_m directly depends on OUT_k into the worklist
</code></pre>

<p>
The details of the DFA framework (again, to be discussed later)
guarantee that this algorithm will eventually terminate and that IN<sub>k</sub>
and OUT<sub>k</sub> will be the least fixpoint solution for every basic block.
</p>
</section>

<ol class="org-ol">
<li><a id="orgd4c4359"></a>signedness DFA example<br>
<section class="outline-text-5" id="text-5-6-2-1">
<p>
A signedness DFA analysis (we could make this more precise in various
ways, e.g., being able to distinguish non-negative and non-positive,
but we will keep it very simple for the purposes of this example):
</p>

<pre class="code"><code>Sign = { +, 0, -, Uninit, Any }
L = Var -&gt; Sign
</code></pre>

<pre class="code"><code>⊓ = (x ∈ Sign) . Any ⊓ x = x ⊓ Any = Any
    (x ∈ Sign) . Uninit ⊓ x = x ⊓ Uninit = x
    (x ∈ {+, 0, -}) . x ⊓ y where x != y = Any
    (x ∈ {+, 0, -}) . x ⊓ x = x
</code></pre>

<p>
Abstract transfer functions:
</p>

<pre class="code"><code>var1 &lt;- constant       : update var1 to the signedness of the constant (i.e., +, 0, or -)
var1 &lt;- var2           : update var1 to the signedness of var2
var1 &lt;- var2 + var3    : update var1 to var2 #ADD var3, where #ADD is defined below
var1 &lt;- var2 - var3    : update var1 to var2 #SUB var3, where #SUB is defined below
var1 &lt;- var2 &lt; var3    : update var1 to var2 #LT var3, where #LT is defined below
var1 &lt;- CALL function  : update var1 to Any
</code></pre>

<p>
Here are the tables for the abstract binary operations: (first column
is lhs, first row is rhs, the cells are the results. For example, '0'
#SUB '+' = '-')
</p>

<p>
For #ADD:
</p>

<table>


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">#ADD</th>
<th scope="col" class="org-left">+</th>
<th scope="col" class="org-left">0</th>
<th scope="col" class="org-left">-</th>
<th scope="col" class="org-left">Uninit</th>
<th scope="col" class="org-left">Any</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">+</td>
<td class="org-left">+</td>
<td class="org-left">+</td>
<td class="org-left">Any</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">0</td>
<td class="org-left">+</td>
<td class="org-left">0</td>
<td class="org-left">-</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">-</td>
<td class="org-left">Any</td>
<td class="org-left">-</td>
<td class="org-left">-</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
</tr>

<tr>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>
</tbody>
</table>

<p>
For #SUB:
</p>

<table>


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">#SUB</th>
<th scope="col" class="org-left">+</th>
<th scope="col" class="org-left">0</th>
<th scope="col" class="org-left">-</th>
<th scope="col" class="org-left">Uninit</th>
<th scope="col" class="org-left">Any</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">+</td>
<td class="org-left">Any</td>
<td class="org-left">+</td>
<td class="org-left">+</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">0</td>
<td class="org-left">-</td>
<td class="org-left">0</td>
<td class="org-left">+</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">-</td>
<td class="org-left">-</td>
<td class="org-left">-</td>
<td class="org-left">Any</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
</tr>

<tr>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>
</tbody>
</table>

<p>
For #LT:
</p>

<table>


<colgroup>
<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">

<col class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">#LT</th>
<th scope="col" class="org-left">+</th>
<th scope="col" class="org-left">"0"</th>
<th scope="col" class="org-left">-</th>
<th scope="col" class="org-left">Uninit</th>
<th scope="col" class="org-left">Any</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">+</td>
<td class="org-left">Any</td>
<td class="org-left">0</td>
<td class="org-left">0</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">0</td>
<td class="org-left">+</td>
<td class="org-left">0</td>
<td class="org-left">0</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">-</td>
<td class="org-left">+</td>
<td class="org-left">+</td>
<td class="org-left">Any</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>

<tr>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
<td class="org-left">Uninit</td>
</tr>

<tr>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Any</td>
<td class="org-left">Uninit</td>
<td class="org-left">Any</td>
</tr>
</tbody>
</table>

<p>
Source code:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;

  <span style="color: #008b8b;">x</span> := 1;
  <span style="color: #008b8b;">y</span> := -1;

  <span style="color: #a020f0;">if</span> (y &lt; a) {
    <span style="color: #a020f0;">while</span> (a &lt; x) {
      <span style="color: #008b8b;">x</span> := x - 1;
      <span style="color: #008b8b;">y</span> := y - 1;
    }
  }
  <span style="color: #a020f0;">else</span> {
    <span style="color: #008b8b;">x</span> := x + 1;
    <span style="color: #008b8b;">y</span> := -1;
  }

  <span style="color: #a020f0;">return</span> y;
}
</code></pre>

<p>
IR:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">-1</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> y &lt; a
  jump_if_0 _tmp0 <span style="color: #008b8b;">IF_FALSE_0</span>

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_1</span><span style="color: #a020f0;">:</span>
  _tmp1 <span style="color: #a020f0;">&lt;-</span> a &lt; x
  jump_if_0 _tmp1 <span style="color: #008b8b;">WHILE_END_1</span>

  [<span style="color: #008b8b;">B2</span>]
  x <span style="color: #a020f0;">&lt;-</span> x - <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> y - <span style="color: #008b8b;">1</span>
  jump <span style="color: #008b8b;">WHILE_START_1</span>

  [<span style="color: #008b8b;">B3</span>] <span style="color: #008b8b;">WHILE_END_1</span><span style="color: #a020f0;">:</span>
  jump <span style="color: #008b8b;">IF_END_0</span>

  [<span style="color: #008b8b;">B4</span>] <span style="color: #008b8b;">IF_FALSE_0</span><span style="color: #a020f0;">:</span>
  x <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">-1</span>

  [<span style="color: #008b8b;">B5</span>] <span style="color: #008b8b;">IF_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> y
}
</code></pre>

<p>
Analysis:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/dfa-example-cfg.png" alt="dfa-example-cfg.png">

</figure>

<p>
Initialization:
</p>

<ul class="org-ul">
<li>IN<sub>0</sub>: [a = Any, x = 0, y = 0, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>0</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>1</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>1</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>2</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>2</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>3</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>3</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>4</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>4</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>5</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>5</sub>: [a = Uninit, x = Uninit, y = Uninit, _tmp0 = Uninit, _tmp1 = Uninit]</li>
</ul>

<p>
Worklist order: 0, 4, 5, 1, 3, 2, 1, 2, 3, 5
</p>

<p>
In lecture, I think I just initialized the worklist with the first
basic block. This works for this analysis and language, but in general
you need to initialize the worklist with all basic blocks.
</p>

<p>
Final answer:
</p>

<ul class="org-ul">
<li>IN<sub>0</sub>: [a = Any, x = 0, y = 0, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>0</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>1</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>1</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>2</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>2</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>3</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>3</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>4</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Uninit]</li>
<li>OUT<sub>4</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>5</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>5</sub>: [a = Any, x = Any, y = -, _tmp0 = Any, _tmp1 = Any]</li>
</ul>
</section>
</li>

<li><a id="org289fa1e"></a>Exercise<br>
<section class="outline-text-5" id="text-5-6-2-2">
<p>
Perform signedness DFA on the following program:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) : <span style="color: #228b22;">int</span> {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;

  <span style="color: #008b8b;">x</span> := 1;
  <span style="color: #008b8b;">y</span> := -1;

  <span style="color: #a020f0;">while</span> (x &lt; a) {
    <span style="color: #a020f0;">if</span> (y &lt; a) {
      <span style="color: #008b8b;">x</span> := x + 1;
      <span style="color: #008b8b;">y</span> := y - 1;
    }
    <span style="color: #a020f0;">else</span> {
      <span style="color: #008b8b;">x</span> := 1;
      <span style="color: #008b8b;">y</span> := -1;
    }
  }

  <span style="color: #a020f0;">return</span> y;
}
</code></pre>

<p>
IR:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">-1</span>

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> x &lt; a
  jump_if_0 _tmp0 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  _tmp1 <span style="color: #a020f0;">&lt;-</span> y &lt; a
  jump_if_0 _tmp1 <span style="color: #008b8b;">IF_FALSE_1</span>

  [<span style="color: #008b8b;">B3</span>]
  x <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> y - <span style="color: #008b8b;">1</span>
  jump <span style="color: #008b8b;">IF_END_1</span>

  [<span style="color: #008b8b;">B4</span>] <span style="color: #008b8b;">IF_FALSE_1</span>
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">-1</span>

  [<span style="color: #008b8b;">B5</span>] <span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B6</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> y
}
</code></pre>

<p>
CFG:
</p>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/dfa-exercise-cfg.png" alt="dfa-exercise-cfg.png">

</figure>

<p>
Analysis:
</p>

<ul class="org-ul">
<li>IN<sub>0</sub>: [a = Any, x = 0, y = 0, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li>OUT<sub>0</sub>: [a = Any, x = +, y = -, _tmp0 = Uninit, _tmp1 = Uninit]</li>
<li></li>

<li>IN<sub>1</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>1</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>2</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>2</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>3</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>3</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>4</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>4</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>5</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>5</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li></li>

<li>IN<sub>6</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
<li>OUT<sub>6</sub>: [a = Any, x = +, y = -, _tmp0 = Any, _tmp1 = Any]</li>
</ul>
</section>
</li>
</ol>
</div>

<div id="outline-container-org9ff7ce7" class="outline-4">
<h4 id="org9ff7ce7"><span class="section-number-4">5.6.3</span> Example: Available Expressions -&gt; GCSE</h4>
<section class="outline-text-4" id="text-5-6-3">
<p>
A common compiler optimization is <i>common subexpression elimination</i>,
i.e., trying to avoid recomputing expressions multiple times. This is
the global version of the optimization we covered in the local
optimization section.
</p>

<p>
Example
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">z</span>;

    <span style="color: #008b8b;">x</span> := 4 * a;

    <span style="color: #a020f0;">if</span> (0 &lt; a) {
        <span style="color: #008b8b;">a</span> := a + 1;
        <span style="color: #008b8b;">y</span> := 4 * a;
    }

    <span style="color: #008b8b;">z</span> := 4 * a;
    <span style="color: #a020f0;">return</span> z;
}
</code></pre>

<p>
Note that the expression <code>4 * a</code> has been computed before we get to
the assignment of <code>z</code> no matter whether we enter the true branch of
the conditional or not. Also note that it has a different value
depending on whether we entered the true branch or not.
</p>

<p>
Optimized program:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>) {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">z</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">_tmp0</span>;

    <span style="color: #008b8b;">x</span> := 4 * a;
    <span style="color: #008b8b;">_tmp0</span> := x;

    <span style="color: #a020f0;">if</span> (0 &lt; a) {
        <span style="color: #008b8b;">a</span> := a + 1;
        <span style="color: #008b8b;">y</span> := 4 * a;
        <span style="color: #008b8b;">_tmp0</span> := y;
    }

    <span style="color: #008b8b;">z</span> := _tmp0;
    <span style="color: #a020f0;">return</span> z;
}
</code></pre>

<p>
We have replaced the expression computation with a set of copies. We
can break this process into two components:
</p>
<ul class="org-ul">
<li>DFA: available expressions analysis</li>
<li>optimization: GCSE</li>
</ul>
</section>

<ol class="org-ol">
<li><a id="orgfb6eba1"></a>Available expressions<br>
<section class="outline-text-5" id="text-5-6-3-1">
<p>
Definition: an expression exp is <b>available</b> at some program point pp if:
</p>
<ul class="org-ul">
<li>exp is computed along every path from the entry of the function to
pp</li>
<li>the variables used in exp are not redefined after the last
evaluation of exp along any path</li>
</ul>

<p>
In order to define a DFA to compute available expressions, we need to define:
</p>
<ul class="org-ul">
<li>L, the dataflow facts we are computing</li>
<li>⊓, the meet operator for L</li>
<li>the abstract transfer functions for L</li>
</ul>

<p>
The facts we are computing are which expressions are available, so the
elements of L will be sets of expressions. We interpret an element of
L as "these are the expressions that are currently available".
</p>

<p>
The meet operator tells us how to conservatively approximate two
elements of L using a single element of L. Given two sets of
expressions E1 and E2, we know that along one path the E1 expressions
are available and along another path the E2 expressions are
available. The only safe approximation of those two sets is E1
∩ E2, i.e., those expressions that are available along both
paths.
</p>

<p>
What is the weakest thing we can say about what expressions are
available? i.e., the safest thing that is guaranteed not to give
incorrect information? the empty set: there are no available
expressions.
</p>

<p>
What is the strongest thing we can say about what expressions are
available? the set of all expressions contained in the function.
</p>

<p>
We can define a single abstract transfer function and specialize it
per basic block:
</p>

<p>
<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-178-Frame" tabindex="0" style="text-align: center; position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mi&gt;U&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x222A;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;K&lt;/mi&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5221" style="width: 17.12em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.737em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1014.64em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-5222"><span class="mi" id="MathJax-Span-5223" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mi" id="MathJax-Span-5224" style="font-family: MathJax_Math; font-style: italic;">U<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.084em;"></span></span><span class="msubsup" id="MathJax-Span-5225"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5226" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.584em;"><span class="mi" id="MathJax-Span-5227" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5228" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-5229" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">G</span><span class="mi" id="MathJax-Span-5230" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="msubsup" id="MathJax-Span-5231"><span style="display: inline-block; position: relative; width: 1.246em; height: 0px;"><span style="position: absolute; clip: rect(3.176em, 1000.89em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5232" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.803em;"><span class="mi" id="MathJax-Span-5233" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5234" style="font-family: MathJax_Main; padding-left: 0.222em;">∪</span><span class="mo" id="MathJax-Span-5235" style="font-family: MathJax_Main; padding-left: 0.222em;">(</span><span class="mi" id="MathJax-Span-5236" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="msubsup" id="MathJax-Span-5237"><span style="display: inline-block; position: relative; width: 1.246em; height: 0px;"><span style="position: absolute; clip: rect(3.176em, 1000.89em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5238" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.803em;"><span class="mi" id="MathJax-Span-5239" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5240" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-5241" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span class="mi" id="MathJax-Span-5242" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mi" id="MathJax-Span-5243" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="msubsup" id="MathJax-Span-5244"><span style="display: inline-block; position: relative; width: 1.124em; height: 0px;"><span style="position: absolute; clip: rect(3.176em, 1000.65em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5245" style="font-family: MathJax_Math; font-style: italic;">L</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.681em;"><span class="mi" id="MathJax-Span-5246" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5247" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>O</mi><mi>U</mi><msub><mi>T</mi><mi>k</mi></msub><mo>=</mo><mi>G</mi><mi>E</mi><msub><mi>N</mi><mi>k</mi></msub><mo>∪</mo><mo stretchy="false">(</mo><mi>I</mi><msub><mi>N</mi><mi>k</mi></msub><mo>−</mo><mi>K</mi><mi>I</mi><mi>L</mi><msub><mi>L</mi><mi>k</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-178">
    OUT_k = GEN_k \cup (IN_k - KILL_k)
</script>
</p>

<p>
GEN<sub>k</sub> is defined as the set of expressions that are computed in basic
block k (whose variables are not defined afterwards in that basic
block).
</p>

<p>
KILL<sub>k</sub> is defined as the set of expressions for which at least one
variable is defined in basic block k.
</p>

<p>
Let's look at an example:
</p>

<pre class="code"><code>[<span style="color: #008b8b;">B0</span>]
a <span style="color: #a020f0;">&lt;-</span> b + c
b <span style="color: #a020f0;">&lt;-</span> a + c
d <span style="color: #a020f0;">&lt;-</span> b + d
</code></pre>

<ul class="org-ul">
<li>GEN<sub>0</sub> = { a+c }</li>
<li>KILL<sub>0</sub> = any expression that uses 'a', 'b', or 'd'</li>
</ul>

<p>
Note that B0 does <i>not</i> generate b+c or b+d because it defines b and d
after those expressions are evaluated.
</p>

<p>
So the formula <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-179-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;O&lt;/mi&gt;&lt;mi&gt;U&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;T&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;G&lt;/mi&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x222A;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;K&lt;/mi&gt;&lt;mi&gt;I&lt;/mi&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;L&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5248" style="width: 17.12em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.737em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1014.64em, 2.59em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-5249"><span class="mi" id="MathJax-Span-5250" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mi" id="MathJax-Span-5251" style="font-family: MathJax_Math; font-style: italic;">U<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.084em;"></span></span><span class="msubsup" id="MathJax-Span-5252"><span style="display: inline-block; position: relative; width: 1.027em; height: 0px;"><span style="position: absolute; clip: rect(3.182em, 1000.7em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5253" style="font-family: MathJax_Math; font-style: italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.12em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.584em;"><span class="mi" id="MathJax-Span-5254" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5255" style="font-family: MathJax_Main; padding-left: 0.278em;">=</span><span class="mi" id="MathJax-Span-5256" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">G</span><span class="mi" id="MathJax-Span-5257" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="msubsup" id="MathJax-Span-5258"><span style="display: inline-block; position: relative; width: 1.246em; height: 0px;"><span style="position: absolute; clip: rect(3.176em, 1000.89em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5259" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.803em;"><span class="mi" id="MathJax-Span-5260" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5261" style="font-family: MathJax_Main; padding-left: 0.222em;">∪</span><span class="mo" id="MathJax-Span-5262" style="font-family: MathJax_Main; padding-left: 0.222em;">(</span><span class="mi" id="MathJax-Span-5263" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="msubsup" id="MathJax-Span-5264"><span style="display: inline-block; position: relative; width: 1.246em; height: 0px;"><span style="position: absolute; clip: rect(3.176em, 1000.89em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5265" style="font-family: MathJax_Math; font-style: italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.085em;"></span></span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.803em;"><span class="mi" id="MathJax-Span-5266" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5267" style="font-family: MathJax_Main; padding-left: 0.222em;">−</span><span class="mi" id="MathJax-Span-5268" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.04em;"></span></span><span class="mi" id="MathJax-Span-5269" style="font-family: MathJax_Math; font-style: italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.064em;"></span></span><span class="mi" id="MathJax-Span-5270" style="font-family: MathJax_Math; font-style: italic;">L</span><span class="msubsup" id="MathJax-Span-5271"><span style="display: inline-block; position: relative; width: 1.124em; height: 0px;"><span style="position: absolute; clip: rect(3.176em, 1000.65em, 4.105em, -1000em); top: -3.982em; left: 0em;"><span class="mi" id="MathJax-Span-5272" style="font-family: MathJax_Math; font-style: italic;">L</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span><span style="position: absolute; top: -3.832em; left: 0.681em;"><span class="mi" id="MathJax-Span-5273" style="font-size: 70.7%; font-family: MathJax_Math; font-style: italic;">k</span><span style="display: inline-block; width: 0px; height: 3.982em;"></span></span></span></span><span class="mo" id="MathJax-Span-5274" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.338em; border-left: 0px solid; width: 0px; height: 1.255em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mi>U</mi><msub><mi>T</mi><mi>k</mi></msub><mo>=</mo><mi>G</mi><mi>E</mi><msub><mi>N</mi><mi>k</mi></msub><mo>∪</mo><mo stretchy="false">(</mo><mi>I</mi><msub><mi>N</mi><mi>k</mi></msub><mo>−</mo><mi>K</mi><mi>I</mi><mi>L</mi><msub><mi>L</mi><mi>k</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-179"> OUT_k = GEN_k \cup (IN_k - KILL_k) </script> says:
</p>
<ul class="org-ul">
<li>take all the expressions that are available coming into this block
(i.e., IN<sub>k</sub>)</li>
<li>remove those expressions that are killed by this block (i.e.,
subtract KILL<sub>k</sub>)</li>
<li>add back those expressions that are generated by this block (i.e.,
union GEN<sub>k</sub>)</li>
</ul>

<p>
Note that the order is important: if we union GEN<sub>k</sub> and then subtract
KILL<sub>k</sub> we may lose precision because we will miss some expressions
that are available. See the 'a+c' example above.
</p>

<p>
Quick exercise
</p>

<pre class="code"><code>a <span style="color: #a020f0;">&lt;-</span> b + c
x <span style="color: #a020f0;">&lt;-</span> y - z
b <span style="color: #a020f0;">&lt;-</span> x + y
x <span style="color: #a020f0;">&lt;-</span> a * b
</code></pre>

<p>
What are the GEN and KILL sets?
</p>

<p>
Solution
</p>

<p>
GEN = {y-z, a*b}
</p>

<p>
KILL = {b+c, x+y} plus any expressions that contain a, x, b, x
</p>

<p>
Now we have a complete available expressions DFA and we can use the
DFA framework:
</p>

<ol class="org-ol">
<li>Define the set of all expressions computed in the function; call
this set E.</li>
<li>For each basic block k, define GEN<sub>k</sub> and KILL<sub>k</sub> by looking at the
instructions in the basic block.</li>
<li>Initialize IN<sub>0</sub> to {}, i.e., there are no available expressions at
the beginning of the function.</li>
<li>Optimistically initialize all other IN and OUT sets to E (this is
safe, because the analysis will remove expressions as necessary).</li>
<li>Put all basic blocks onto the worklist.</li>
<li>Apply the worklist algorithm until it is empty.</li>
</ol>
</section>

<ol class="org-ol">
<li><a id="org348ca6f"></a>Example<br>
<section class="outline-text-6" id="text-5-6-3-1-1">
<p>
Source code
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) : <span style="color: #228b22;">int</span> { <span style="color: #b22222;">// </span><span style="color: #b22222;">returns a^b</span>
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">z</span>;

  <span style="color: #008b8b;">x</span> := 1;
  <span style="color: #008b8b;">y</span> := a;

  <span style="color: #a020f0;">while</span> (x != b) {
    <span style="color: #008b8b;">z</span> := x * 2;
    <span style="color: #a020f0;">if</span> (z &lt;= b) {
      <span style="color: #008b8b;">y</span> := y * y;
      <span style="color: #008b8b;">x</span> := x * 2;
    }
    <span style="color: #a020f0;">else</span> {
      <span style="color: #008b8b;">y</span> := y * a;
      <span style="color: #008b8b;">x</span> := x + 1;
    }
  }

  <span style="color: #a020f0;">return</span> y;
}
</code></pre>

<p>
IR:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> a

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> x != b
  jump_if_0 _tmp0 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  z <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  _tmp1 <span style="color: #a020f0;">&lt;-</span> z &lt;= b
  jump_if_0 _tmp1 <span style="color: #008b8b;">IF_FALSE_1</span>

  [<span style="color: #008b8b;">B3</span>]
  y <span style="color: #a020f0;">&lt;-</span> y * y
  x <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  jump <span style="color: #008b8b;">IF_END_1</span>

  [<span style="color: #008b8b;">B4</span>] <span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
  y <span style="color: #a020f0;">&lt;-</span> y * a
  x <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">1</span>

  [<span style="color: #008b8b;">B5</span>] <span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B6</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> y
}
</code></pre>


<figure>
<img src="CS%20160%20Lecture%20Notes%20%E2%80%93%20Fall%20'20_files/avail-expr-example-cfg.png" alt="avail-expr-example-cfg.png">

</figure>

<pre class="code"><code>E = { x!=b, x*2, z&lt;=b, y*y, y*a, x+1 }

 GEN_0 = {}
KILL_0 = { x!=b, x*2, y*y, y*a, x+1 }

 GEN_1 = { x!=b }
KILL_1 = {}

 GEN_2 = { x*2, z&lt;=b }
KILL_2 = { z&lt;=b }

 GEN_3 = {}
KILL_3 = { x!=b, x*2, y*y, y*a, x+1 }

 GEN_4 = {}
KILL_4 = { x!=b, x*2, y*y, y*a, x+1 }

 GEN_5 = {}
KILL_5 = {}

 GEN_6 = {}
KILL_6 = {}
</code></pre>

<p>
Now we can initialize the IN and OUT sets for each basic block, insert
all basic blocks into the worklist, and apply the worklist
algorithm. the final solution is:
</p>

<pre class="code"><code> IN_0 = {}
OUT_0 = {}

 IN_1 = {}
OUT_1 = { x!=b }

 IN_2 = { x!=b }
OUT_2 = { x!=b, x*2, z&lt;=b }

 IN_3 = { x!=b, x*2, z&lt;=b }
OUT_3 = { z&lt;=b }

 IN_4 = { x!=b, x*2, z&lt;=b }
OUT_4 = { z&lt;=b }

 IN_5 = { z&lt;=b }
OUT_5 = { z&lt;=b }

 IN_6 = { x!=b }
OUT_6 = { x!=b }
</code></pre>
</section>
</li>

<li><a id="org87626c7"></a>Exercise<br>
<section class="outline-text-6" id="text-5-6-3-1-2">
<p>
Perform the available expressions analysis on the following program:
</p>

<pre class="code"><code><span style="color: #228b22;">def</span> <span style="color: #0000ff;">foo</span>(<span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>) : <span style="color: #228b22;">int</span> {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">x</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;

  <span style="color: #008b8b;">x</span> := a + b;
  <span style="color: #008b8b;">y</span> := a * b;

  <span style="color: #a020f0;">while</span> (a + b &lt; y) {
    <span style="color: #008b8b;">a</span> := a + 1;
    <span style="color: #008b8b;">x</span> := a + b;
  }

  <span style="color: #a020f0;">return</span> x;
}
</code></pre>

<p>
SOLUTION
</p>

<p>
IR:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> a + b
  y <span style="color: #a020f0;">&lt;-</span> a * b

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> a + b
  _tmp1 <span style="color: #a020f0;">&lt;-</span> _tmp0 &lt; y
  jump_if_0 _tmp1 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  a <span style="color: #a020f0;">&lt;-</span> a + <span style="color: #008b8b;">1</span>
  x <span style="color: #a020f0;">&lt;-</span> a + b
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B3</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> x
}
</code></pre>

<p>
Analysis results:
</p>

<pre class="code"><code>E = { a+b, a*b, _tmp0&lt;y, a+1 }

 GEN_0 = { a+b, a*b }
KILL_0 = { _tmp0&lt;y }

 GEN_1 = { a+b, _tmp0&lt;y }
KILL_1 = { _tmp0&lt;y }

 GEN_2 = { a+b }
KILL_2 = { a+b, a*b, a+1 }

 GEN_3 = {}
KILL_3 = {}

---

 IN_0 = {}
OUT_0 = { a+b, a*b }

 IN_1 = { a+b }
OUT_1 = { a+b, _tmp0&lt;y }

 IN_2 = { a+b, _tmp0&lt;y }
OUT_2 = { a+b, _tmp0&lt;y }

 IN_3 = { a+b, _tmp0&lt;y }
OUT_3 = { a+b, _tmp0&lt;y }
</code></pre>
</section>
</li>
</ol>
</li>

<li><a id="orge7d7fd5"></a>GCSE<br>
<section class="outline-text-5" id="text-5-6-3-2">
<p>
Once we have the available expressions info, how do we use it to
eliminate common subexpressions? There are a variety of schemes with
various tradeoffs. We will look at a simple scheme that works, but
requires other optimization passes to clean up after it.
</p>

<ol class="org-ol">
<li>for each expression in E, create a unique variable name (<sub>opt0</sub>,
_opt1, etc).</li>

<li>for each definition <code>var1 &lt;- op1 OP op2</code>, look up the unique name
for expression <code>op1 OP op2</code> (say _optX) and insert an assignment
immediately afterwards <code>_optX &lt;- var1</code>.</li>

<li>for each use of expression <code>op1 OP op2</code>, see if it is available at
that point (i.e., it is available at the beginning of the basic
block and is not killed before the use). If so, replace it with
_optX.</li>
</ol>

<p>
We end up with a bunch of extraneous copies, but they can be cleaned
up by another pass like copy propagation and dead code elimination.
</p>
</section>

<ol class="org-ol">
<li><a id="orgae21e69"></a>Example<br>
<section class="outline-text-6" id="text-5-6-3-2-1">
<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> a

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> x != b
  jump_if_0 _tmp0 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  z <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  _tmp1 <span style="color: #a020f0;">&lt;-</span> z &lt;= b
  jump_if_0 _tmp1 <span style="color: #008b8b;">IF_FALSE_1</span>

  [<span style="color: #008b8b;">B3</span>]
  y <span style="color: #a020f0;">&lt;-</span> y * y
  x <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  jump <span style="color: #008b8b;">IF_END_1</span>

  [<span style="color: #008b8b;">B4</span>] <span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
  y <span style="color: #a020f0;">&lt;-</span> y * a
  x <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">1</span>

  [<span style="color: #008b8b;">B5</span>] <span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B6</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> y
}
</code></pre>

<p>
Analysis results:
</p>

<pre class="code"><code>E = { x!=b, x*2, z&lt;=b, y*y, y*a, x+1 }

 IN_0 = {}
OUT_0 = {}

 IN_1 = {}
OUT_1 = { x!=b }

 IN_2 = { x!=b }
OUT_2 = { x!=b, x*2, z&lt;=b }

 IN_3 = { x!=b, x*2, z&lt;=b }
OUT_3 = { z&lt;=b }

 IN_4 = { x!=b, x*2, z&lt;=b }
OUT_4 = { z&lt;=b }

 IN_5 = { z&lt;=b }
OUT_5 = { z&lt;=b }

 IN_6 = { x!=b }
OUT_6 = { x!=b }
</code></pre>

<p>
Transformation steps:
</p>

<p>
STEP 1
</p>

<pre class="code"><code>_opt0 = x != b
_opt1 = x * 2
_opt2 = z &lt;= b
_opt3 = y * y
_opt4 = y * a
_opt5 = x + 1
</code></pre>

<p>
STEP 2
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> a

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> x != b
  _opt0 <span style="color: #a020f0;">&lt;-</span> _tmp0
  jump_if_0 _tmp0 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  z <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  _opt1 <span style="color: #a020f0;">&lt;-</span> z
  _tmp1 <span style="color: #a020f0;">&lt;-</span> z &lt;= b
  _opt2 <span style="color: #a020f0;">&lt;-</span> _tmp1
  jump_if_0 _tmp1 <span style="color: #008b8b;">IF_FALSE_1</span>

  [<span style="color: #008b8b;">B3</span>]
  y <span style="color: #a020f0;">&lt;-</span> y * y
  _opt3 <span style="color: #a020f0;">&lt;-</span> y
  x <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  _opt1 <span style="color: #a020f0;">&lt;-</span> x
  jump <span style="color: #008b8b;">IF_END_1</span>

  [<span style="color: #008b8b;">B4</span>] <span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
  y <span style="color: #a020f0;">&lt;-</span> y * a
  _opt4 <span style="color: #a020f0;">&lt;-</span> y
  x <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">1</span>
  _opt5 <span style="color: #a020f0;">&lt;-</span> x

  [<span style="color: #008b8b;">B5</span>] <span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B6</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> y
}
</code></pre>

<p>
STEP 3
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> <span style="color: #008b8b;">1</span>
  y <span style="color: #a020f0;">&lt;-</span> a

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> x != b
  _opt0 <span style="color: #a020f0;">&lt;-</span> _tmp0
  jump_if_0 _tmp0 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  z <span style="color: #a020f0;">&lt;-</span> x * <span style="color: #008b8b;">2</span>
  _opt1 <span style="color: #a020f0;">&lt;-</span> z
  _tmp1 <span style="color: #a020f0;">&lt;-</span> z &lt;= b
  _opt2 <span style="color: #a020f0;">&lt;-</span> _tmp1
  jump_if_0 _tmp1 <span style="color: #008b8b;">IF_FALSE_1</span>

  [<span style="color: #008b8b;">B3</span>]
  y <span style="color: #a020f0;">&lt;-</span> y * y
  _opt3 <span style="color: #a020f0;">&lt;-</span> y
  x <span style="color: #a020f0;">&lt;-</span> _opt1
  _opt1 <span style="color: #a020f0;">&lt;-</span> x
  jump <span style="color: #008b8b;">IF_END_1</span>

  [<span style="color: #008b8b;">B4</span>] <span style="color: #008b8b;">IF_FALSE_1</span><span style="color: #a020f0;">:</span>
  y <span style="color: #a020f0;">&lt;-</span> y * a
  _opt4 <span style="color: #a020f0;">&lt;-</span> y
  x <span style="color: #a020f0;">&lt;-</span> x + <span style="color: #008b8b;">1</span>
  _opt5 <span style="color: #a020f0;">&lt;-</span> x

  [<span style="color: #008b8b;">B5</span>] <span style="color: #008b8b;">IF_END_1</span><span style="color: #a020f0;">:</span>
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B6</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> y
}
</code></pre>
</section>
</li>

<li><a id="org76d4ec3"></a>Exercise<br>
<section class="outline-text-6" id="text-5-6-3-2-2">
<p>
IR:
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> a + b
  y <span style="color: #a020f0;">&lt;-</span> a * b

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> a + b
  _tmp1 <span style="color: #a020f0;">&lt;-</span> _tmp0 &lt; y
  jump_if_0 _tmp1 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  a <span style="color: #a020f0;">&lt;-</span> a + <span style="color: #008b8b;">1</span>
  x <span style="color: #a020f0;">&lt;-</span> a + b
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B3</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> x
}
</code></pre>

<p>
Analysis results:
</p>

<pre class="code"><code>E = { a+b, a*b, _tmp0&lt;y, a+1 }

 IN_0 = {}
OUT_0 = { a+b, a*b }

 IN_1 = { a+b }
OUT_1 = { a+b, _tmp0&lt;y }

 IN_2 = { a+b, _tmp0&lt;y }
OUT_2 = { a+b, _tmp0&lt;y }

 IN_3 = { a+b, _tmp0&lt;y }
OUT_3 = { a+b, _tmp0&lt;y }
</code></pre>

<p>
Given the above information, optimize the given program.
</p>

<p>
SOLUTION
</p>

<p>
STEP 1
</p>

<pre class="code"><code>_opt0 <span style="color: #a020f0;">=</span> a + b
_opt1 <span style="color: #a020f0;">=</span> a * b
_opt2 <span style="color: #a020f0;">=</span> _tmp0 &lt; y
_opt3 <span style="color: #a020f0;">=</span> a + <span style="color: #008b8b;">1</span>
</code></pre>

<p>
STEP 2
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> a + b
  _opt0 <span style="color: #a020f0;">&lt;-</span> x
  y <span style="color: #a020f0;">&lt;-</span> a * b
  _opt1 <span style="color: #a020f0;">&lt;-</span> y

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> a + b
  _opt0 <span style="color: #a020f0;">&lt;-</span> _tmp0
  _tmp1 <span style="color: #a020f0;">&lt;-</span> _tmp0 &lt; y
  _opt2 <span style="color: #a020f0;">&lt;-</span> _tmp1
  jump_if_0 _tmp1 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  a <span style="color: #a020f0;">&lt;-</span> a + <span style="color: #008b8b;">1</span>
  _opt3 <span style="color: #a020f0;">&lt;-</span> a
  x <span style="color: #a020f0;">&lt;-</span> a + b
  _opt0 <span style="color: #a020f0;">&lt;-</span> x
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B3</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> x
}
</code></pre>

<p>
STEP 3
</p>

<pre class="code"><code><span style="color: #a020f0;">def</span> <span style="color: #0000ff;">foo</span>(int a, int b) {
  [<span style="color: #008b8b;">B0</span>]
  x <span style="color: #a020f0;">&lt;-</span> a + b
  _opt0 <span style="color: #a020f0;">&lt;-</span> x
  y <span style="color: #a020f0;">&lt;-</span> a * b
  _opt1 <span style="color: #a020f0;">&lt;-</span> y

  [<span style="color: #008b8b;">B1</span>] <span style="color: #008b8b;">WHILE_START_0</span><span style="color: #a020f0;">:</span>
  _tmp0 <span style="color: #a020f0;">&lt;-</span> _opt0
  _opt0 <span style="color: #a020f0;">&lt;-</span> _tmp0
  _tmp1 <span style="color: #a020f0;">&lt;-</span> _tmp0 &lt; y
  _opt2 <span style="color: #a020f0;">&lt;-</span> _tmp1
  jump_if_0 _tmp1 <span style="color: #008b8b;">WHILE_END_0</span>

  [<span style="color: #008b8b;">B2</span>]
  a <span style="color: #a020f0;">&lt;-</span> a + <span style="color: #008b8b;">1</span>
  _opt3 <span style="color: #a020f0;">&lt;-</span> a
  x <span style="color: #a020f0;">&lt;-</span> a + b
  _opt0 <span style="color: #a020f0;">&lt;-</span> x
  jump <span style="color: #008b8b;">WHILE_START_0</span>

  [<span style="color: #008b8b;">B3</span>] <span style="color: #008b8b;">WHILE_END_0</span><span style="color: #a020f0;">:</span>
  <span style="color: #a020f0;">return</span> x
}
</code></pre>
</section>
</li>
</ol>
</li>
</ol>
</div>

<div id="outline-container-org10fd380" class="outline-4">
<h4 id="org10fd380"><span class="section-number-4">5.6.4</span> The DFA framework</h4>
<section class="outline-text-4" id="text-5-6-4">
<p>
Now that we've seen some example, let's look a little into the DFA
framework and why it works. the theory behind DFA uses a branch of
discrete math called Order Theory. Prof. Hardekopf teaches a
graduate-level course on Program Analysis that goes into this topic in
detail if you are interested, but we will just skim the surface.
</p>

<p>
There are two main questions:
</p>
<ol class="org-ol">
<li>How do we know that the analysis we have defined is giving us a
safe answer?</li>
<li>How do we know that it is decidable, i.e., that it is guaranteed to
terminate?</li>
</ol>

<p>
The first question is outside the scope of this class. The second one
we can at least get a conceptual idea of why it works. Recall that we
use a worklist algorithm to compute the DFA: We pull out a basic
block, process it, and if its output changes we put its successors
back onto the worklist. This algorithm proceeds until the worklist is
empty. So how do we know that it will, eventually, become empty? The
DFA framework gives us some requirements that, if they are satisfied,
will guarantee termination:
</p>

<ol class="org-ol">
<li>L contains an element that over-approximates all other elements;
this is the safest (and least precise) analysis solution.

<ul class="org-ul">
<li>for signedness and constant propagation, that element is Any</li>
<li>for available expressions, that element is {}</li>
</ul></li>

<li>the ⊓ operator is always defined for any two elements of L a and b,
and will give us the element of L that most closely approximates
both a and b.</li>

<li>from any given element of L, there are only a finite number of
elements that over-approximate it until we get to the "maximal",
safest element.

<ul class="org-ul">
<li>This is where constant propagation <span class="underline">would</span> break if we used
elements of L like ranges or sets of numbers. Since there are
infinite integers, there are infinite ranges/sets that
over-approximate any given solution. There are ways to guarantee
termination in this case using other operations that approximate
⊓.</li>
</ul></li>

<li>The abstract transfer functions are monotone. a function is
monotone if, when x ≤ y, f(x) ≤ f(y). In other words, the
function preserves the order of the elements.

<ol class="org-ol">
<li>f(x) = x + 1 is monotone</li>
<li>f(x) = -x is not monotone</li>
</ol></li>
</ol>

<p>
These, taken together, guarantee termination. Why? Recall that each
time we process a basic block in the worklist algorithm, we (1) take
the meet of the input solutions; then (2) apply the abstract transfer
function; then (3) if the output solution changed, add the successor
basic blocks to the worklist.
</p>

<p>
The first three requirements mean that, for a given basic block, the
meet of its input solutions can only get less precise (never more
precise) and we can only take the meet of its input solutions a finite
number of times before we get a stable input that never changes (the
safest, least precise solution in the worst case, but something more
precise than the safest solution if we are lucky).
</p>

<p>
The last requirement means that, if we are getting an input that is
less precise, then we cannot get an output solution that is more
precise. That is, since the input solution can only get less precise,
the output solution can only get less precise.
</p>

<p>
But we know that there is a limit to how imprecise we can get (the
"maximal" solution) and we will reach it in a finite number of
steps. Therefore, eventually we are guaranteed that at some point we
will process a basic block and its output won't change. But that means
that we won't put any successors on the worklist. This reasoning is
true for all basic blocks, and therefore eventually we are guaranteed
that no basic block will put any successors on the worklist. Therefore,
the worklist will eventually become empty.
</p>

<p>
The reasoning i've given you here is rather vague and hand-wavy; the
technical description and proof requires a lot more math that we won't
get into. But hopefully this conveys the basic idea of why we want to
define a DFA the way that we do.
</p>
</section>
</div>
</div>

<div id="outline-container-org18df298" class="outline-3">
<h3 id="org18df298"><span class="section-number-3">5.7</span> Order of optimizations</h3>
<section class="outline-text-3" id="text-5-7">
<p>
The order of optimizations can make a big difference in how effective
they are (and also how many times we apply them).
</p>

<p>
We saw for GCSE that our optimization left a lot of copy assignments
and dead variables, which we said could be cleaned up by other
optimizations (like copy propagation and dead code elimination). It
turns out that many optimizations modify the code in such a way that
they enable other optimizations, and this can even be cyclic (A
enables B which enables A again).
</p>

<p>
So what is the best order? This is not an easy question to answer, and
heavily depends on the code being optimized. The optimization levels
in a compiler such as gcc or clang (-O1, -O2, -O3, etc) are just
convenient flags that specify a series of optimizations determined by
the compiler developers to "usually" do a pretty good job. You (the
compiler user) can actually specify the exact set of optimizations
that you want to apply and what order you want to apply them in, and
if you do it right you can often get even faster code than by using
the default compiler flags. however, Figuring out what optimizations
to use in what order can take a lot of trial and error, and you will
never know whether you found the best possible ordering. In fact,
there has been some research on using several methods (such as
mathematical optimization algorithms) to find a good sequence of
compiler optimization for different kinds of programs.
</p>
</section>
</div>
</section>

<section id="outline-container-org42dc45e" class="outline-2">
<h2 id="org42dc45e"><span class="section-number-2">6</span> Runtime support: Garbage collection</h2>
<section class="outline-text-2" id="text-6">
<p>
We often want to have data structures in our programs rather than mere
integers, so we can represent structured data such as records, trees,
stacks, and graphs. Also, we were relying on the stack to handle
memory management, but that limits the lifetime of the objects in our
language: an object is deallocated once the scope it is created
ends. Sometimes, we want our data structures to outlive the scope they
are created in (for example, if we want to add a new node to a graph
by calling a function <code>createNode(Graph g)</code>, we'd like that node to
survive after <code>createNode</code> returns. Dynamic memory allocation allows
us to solve this problem: the objects allocated on the heap are not
bound to the scope they are created in. However, we need to solve the
problem of when to destroy these objects. There are several options
such as manual memory management (á la C or C++), having a type system
that reasons about memory (á la Rust, ATS), and having a garbage
collector that will destroy objects that the program can no longer
access (á la Python, Swift, Java). We will implement the last strategy.
</p>

<p>
So, let's extend <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-180-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;C&lt;/mi&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x266D;&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5275" style="width: 1.357em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.149em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.344em, 1001.09em, 2.362em, -1000em); top: -2.217em; left: 0em;"><span class="mrow" id="MathJax-Span-5276"><span class="mi" id="MathJax-Span-5277" style="font-family: MathJax_Math; font-style: italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.045em;"></span></span><span class="mi" id="MathJax-Span-5278" style="font-family: MathJax_Main;">♭</span></span><span style="display: inline-block; width: 0px; height: 2.217em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.073em; border-left: 0px solid; width: 0px; height: 0.991em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>C</mi><mi mathvariant="normal">♭</mi></math></span></span><script type="math/tex" id="MathJax-Element-180">C\flat</script> with these two concepts to create our next
language: L2. We are going to limit L2 in certain ways to make
our garbage collection scheme simpler:
</p>

<ul class="org-ul">
<li>We will allow variables to be declared only in the beginning of the
function, this will make analyzing stack frames easier.</li>
<li>All fields and variables are either integers or pointers, this makes
sure that each variable and field has the same size (a machine word,
4 bytes).</li>
</ul>
</section>

<div id="outline-container-org3dc7a4b" class="outline-3">
<h3 id="org3dc7a4b"><span class="section-number-3">6.1</span> New syntax</h3>
<section class="outline-text-3" id="text-6-1">
<p>
<a href="https://sites.cs.ucsb.edu/~emre/cs160/handouts/L2-concrete-syntax.pdf">handouts/L2-concrete-syntax.pdf</a> 
</p>
</section>
</div>

<div id="outline-container-org41aaead" class="outline-3">
<h3 id="org41aaead"><span class="section-number-3">6.2</span> New frontend</h3>
<section class="outline-text-3" id="text-6-2">
<p>
There is nothing novel for lexing and parsing, a small extension of
what we've already done.
</p>

<p>
AST validation is more interesting, specifically typechecking now that
we have more than one type. we won't talk about it in detail for now
(we will just assume correct programs), but essentially we need to
verify:
</p>
<ul class="org-ul">
<li>struct field access is to struct that contains that field</li>
<li>no pointer arithmetic in arithmetic expressions</li>
<li>the loop expressions produce integers</li>
</ul>

<p>
Similar to C♭, we will do these checks in the code generator, and we
will defer some of them to the type checker which will be covered
later in class.
</p>
</section>
</div>

<div id="outline-container-orgd7d4433" class="outline-3">
<h3 id="orgd7d4433"><span class="section-number-3">6.3</span> New codegen</h3>
<section class="outline-text-3" id="text-6-3">
<p>
For codegen we need to handle the following:
</p>
<ul class="org-ul">
<li>struct allocation on the heap</li>
<li>struct field access in an expression</li>
<li>struct field access on the left-hand side of an assignment</li>
</ul>

<p>
We also need to ensure that codegen makes runtime memory management
possible.
</p>
</section>

<div id="outline-container-org5e14f54" class="outline-4">
<h4 id="org5e14f54"><span class="section-number-4">6.3.1</span> Managing memory: heap vs stack</h4>
<section class="outline-text-4" id="text-6-3-1">
<p>
For C♭ we didn't worry about memory management because the stack took
care of it for us. When we enter a new scope the declared variables
are allocated space by pushing them on the stack; when we leave that
scope the space is deallocated by popping them off the stack. However,
this means that the lifetimes of the variables are dictated by the
scope they are declared in; once we leave that scope the variables
disappear.
</p>

<p>
If we want objects that will live beyond the scope they are created
in, we need the heap. That's the main difference between the stack and
the heap: heap lifetimes are not bound by scope. But if we don't
deallocate heap objects when we leave the scope, when do we do it?
that is the subject of memory management, and there are a number of
different possible answers with their own tradeoffs. We will discuss
the subject thoroughly in a later lecture.
</p>

<p>
For L2 specifically, we will rely on garbage collection to
automatically deallocate structs when it's safe, but to do that we
will need to change the codegen in our compiler to make it feasible to
perform GC at runtime. We will discuss the requirements as they become
relevant during codegen.
</p>
</section>
</div>

<div id="outline-container-org34ef49f" class="outline-4">
<h4 id="org34ef49f"><span class="section-number-4">6.3.2</span> Symbol table</h4>
<section class="outline-text-4" id="text-6-3-2">
<p>
We need to extend the symbol table in two ways:
</p>
<ul class="org-ul">
<li>map typename to struct info (field names, types, and offsets)</li>
<li>variable info needs to include type info</li>
</ul>

<p>
Other than adding the struct info first thing, we can handle the
symbol table the same way we did before (just remembering to add the
type info from the variable declarations alongside the memory
locations).
</p>
</section>
</div>

<div id="outline-container-orgd94370f" class="outline-4">
<h4 id="orgd94370f"><span class="section-number-4">6.3.3</span> Struct allocation</h4>
<section class="outline-text-4" id="text-6-3-3">
<p>
Let's examine a concrete example from the handout:
</p>

<pre class="code"><code><span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %tree;

</code></pre>

<p>
where %tree is defined as:
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %tree {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">value</span>;
  %tree left;
  %tree right;
};

</code></pre>

<p>
The runtime memory manager is going to handle the heap, so we will
delegate memory allocation to it by making a call to a predefined
function <code>allocate</code> using the calling convention we discussed for
L1. The allocate function will need to know how many words to
allocate, which we can determine by looking up <code>&lt;typename&gt;</code> in the
symbol table to get the corresponding struct info. Our contract is
that when we call allocate with a number of words (one per field), it
will allocate sufficient space on the heap to hold those words and
return the beginning address of the newly allocated space (which
address we will store into the left-hand side of the assignment).
</p>

<p>
For our example, we would call <code>allocate(3)</code> and get back an address (say 0x100) at the beginning of 3 words of heap memory:
</p>

<pre class="code"><code>Lower ---------------&gt; Higher

|   |   |xxx|xxx|xxx|   |   |
   0x100^
</code></pre>

<p>
and we would write the value 0x100 into 'x'. We then need to generate
code to initialize the values of the fields, which as in C♭ are always
initialized to 0 (which is also the value of nil for references):
</p>

<pre class="code"><code>|   |   | 0 | 0 | 0 |   |   |
   0x100^
</code></pre>

<p>
However, the runtime memory manager will need more information about
the struct than its size in order to handle it correctly, namely it
needs to know which of its fields are pointers to other structs. This
is information that we have at compile-time but we need it at runtime
(the reason we need it will become clear when we cover memory
management schemes). To communicate this information, allocate will
actually create space for <code>&lt;num_words&gt;+1</code> words of memory, with the
extra word being <i>before</i> the returned address:
</p>

<pre class="code"><code>|   |xxx|xxx|xxx|xxx|   |   |
   0x100^
</code></pre>

<p>
this <i>header word</i> is going to contain the following information:
</p>
<ol class="org-ol">
<li>the first byte, bits 0–7, holds the number of fields in the struct</li>
<li>bits 8–30 are a bit vector s.t. a bit is set iff the corresponding
field in the struct is a reference.</li>
<li>the last bit, bit 31, is set to 1 (for reasons that, again, will
become apparent when we discuss memory management).</li>
</ol>

<p>
The compiler must generate code to fill in that information. For our
example, the result of the generated code should be:
</p>

<pre class="code"><code>|   |00000011011000000000000000000001| 0 | 0 | 0 |   |   |
                                0x100^

</code></pre>

<p>
that is, there are three fields and the second two are pointers. this
scheme means that, given a pointer to a struct containing an address,
the runtime can always read the word at address-4 to get the size of
the struct and which fields are pointers.
</p>

<p>
Notice that this scheme limits the number of fields a struct can have:
at most 23, the size of the bitvector. We are using this scheme
because it is relatively simple, but constraining the number of fields
is a trade-off. We could use a more elaborate scheme to remove this
restriction. for example, we could map each typename to an index, copy
the symbol table to the static memory segment indexed by typename, and
have the header word contain the appropriate typename index instead of
struct size and a bitvector. Then the runtime can read the header word
and use that index to lookup the information in the static memory's
symbol table. That scheme is more flexible, but more complex and
expensive. which one to use is a matter of language design.
</p>

<p>
To recap, when we generate code for <code>&lt;access&gt; := new &lt;typename&gt;</code>, we:
</p>
<ol class="org-ol">
<li>generate a call to function <code>allocate</code> passing an argument that is
the number of fields in <code>&lt;typename&gt;</code>.</li>
<li>write the return value to the left-hand side of the assignment.</li>
<li>for each field of the struct being allocated, store a 0 to the
corresponding offset from the returned address.</li>
<li>compute the header word and write it to a -4 offset from the
returned address.</li>
</ol>
</section>
</div>

<div id="outline-container-orgd90b9d7" class="outline-4">
<h4 id="orgd90b9d7"><span class="section-number-4">6.3.4</span> Field access in expression</h4>
<section class="outline-text-4" id="text-6-3-4">
<p>
Example 1:
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %foo {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>;
};

%foo x;
<span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %foo;
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>.b;
</code></pre>

<p>
Let's focus on the output expression. x contains the address of a foo
struct object in memory, which has two integer fields.
</p>

<p>
In order to retrieve the correct value, we need to dereference x to
get the address of the struct object in the heap, compute the offset
into that struct object of field <code>b</code>, then read the value at that
address from memory.
</p>

<p>
AST: <code>[access x b]</code>
</p>

<p>
<b>note:</b> for convenience i'm going to be more efficient about the
generated code rather than strictly following our naive codegen
algorithm.
</p>

<pre class="code"><code><span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x'</span>
<span style="color: #0000ff;">ld</span> [RR+4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the value at that address + 4, because b is at a 4-byte offset from the beginning of the struct</span>
</code></pre>

<p>
How did we know to use offset 4? Because we look up <code>x</code> in the symbol
table to get its type <code>foo</code>, then look up <code>foo</code> to get the information
about the field offsets. remember that the extra header word is
immediately <i>before</i> the returned address, so offset 0 would be the
first field of the struct.
</p>

<p>
Example 2:
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %foo {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>;
    %bar b;
};

<span style="color: #a020f0;">struct</span> %bar {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">d</span>;
    %baz e;
};

<span style="color: #a020f0;">struct</span> %baz {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">f</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">g</span>;
};

%foo x;
<span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %foo;
x.<span style="color: #008b8b;">b</span> := <span style="color: #a020f0;">new</span> %bar;
x.b.<span style="color: #008b8b;">e</span> := <span style="color: #a020f0;">new</span> %baz;
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">x</span>.b.e.f;

</code></pre>

<p>
Let's focus again on the output expression. <code>x</code>, <code>x.b</code>, and <code>x.b.e</code>
will all contain pointers into the heap; we are going to do the same
thing as before except chained in a row.
</p>

<p>
AST: [access [access [access x b] e] f]
</p>

<p>
When we recursive through the AST for codegen, we will end up generating code for [access x b] first, then [access <i>result</i> e], then [access <i>result</i> f]:
</p>

<pre class="code"><code><span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x'</span>
<span style="color: #0000ff;">ld</span> [RR+4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x.b' at offset 4</span>
<span style="color: #0000ff;">ld</span> [RR+8] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x.b.e' at offset 8</span>
<span style="color: #0000ff;">ld</span> [RR] RR    <span style="color: #b22222;">; </span><span style="color: #b22222;">get the int stored in 'x.b.e.f' at offset 0</span>
</code></pre>

<p>
Again, we look in the symbol table to compute the offsets. Note that
everything starts with looking up the type of <code>x</code> to see that it~s a
<code>foo</code>, then looking at <code>foo</code> to see that the <code>b</code> field is at offset 4
and type <code>bar</code>, then looking at <code>bar</code> to see the <code>e</code> field is at
offset 8 and type <code>baz</code>, then looking at <code>baz</code> to see the <code>f</code> field is
at offset 0.
</p>
</section>
</div>

<div id="outline-container-orgfa498e1" class="outline-4">
<h4 id="orgfa498e1"><span class="section-number-4">6.3.5</span> Field access on lhs of assignment</h4>
<section class="outline-text-4" id="text-6-3-5">
<p>
When the access path is on the left-hand side of an assignment we need
to treat it differently. this is actually the same as when it's just a
variable as in C♭, but we didn't highlight the difference. let's look
at it now, then generalize to arbitrary access paths.
</p>

<p>
Example:
</p>

<pre class="code"><code><span style="color: #008b8b;">x</span> := x + 1;
</code></pre>

<p>
When we evaluate the <code>x</code> in <code>x + 1</code> we want to find the address of <code>x</code>
in memory and retrieve the value stored there:
</p>

<pre class="code"><code><span style="color: #0000ff;">ld</span> [FR-4] RR
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">1</span> RR
</code></pre>

<p>
but when we look at <code>x</code> in the left-hand side we want just the address
of <code>x</code>, which is where we will put the final value:
</p>

<pre class="code"><code><span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [FR-4]
</code></pre>

<p>
we say that <code>x</code> in the right-hand side expression is an <i>rvalue</i> and
that <code>x</code> on the left-hand side is an <i>lvalue</i>. basically, for an
lvalue we want to stop at the address to store the value, while for an
rvalue we want to go ahead and dereference that address to get the
value currently stored there.
</p>

<p>
Now let's look at some non-trivial access paths:
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %foo {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">b</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
};

%foo x;
<span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %foo;
x.<span style="color: #008b8b;">b</span> := x.c;
</code></pre>

<p>
as usual, we want to evaluate the right-hand side to a value, then
store it into the location specified by the left-hand side:
</p>

<pre class="code"><code><span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x'</span>
<span style="color: #0000ff;">ld</span> [RR+8] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the int stored at offset 8</span>
<span style="color: #0000ff;">ld</span> [FR-4] OR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x'</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [OR+4] <span style="color: #b22222;">; </span><span style="color: #b22222;">store the right-hand side value into 'x.b' at offset 4</span>
</code></pre>

<p>
What if we have an lvalue access path with multiple fields?
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %foo {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>;
    %bar b;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
};

<span style="color: #a020f0;">struct</span> %bar {
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">d</span>;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">e</span>;
};

%foo x;
<span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %foo;
x.<span style="color: #008b8b;">b</span> := <span style="color: #a020f0;">new</span> %bar;
x.b.<span style="color: #008b8b;">d</span> := x.c;

</code></pre>

<p>
then we follow the access paths as normal, except that we stop right before we dereference the last one:
</p>

<pre class="code"><code><span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x'</span>
<span style="color: #0000ff;">ld</span> [RR+8] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the int stored at offset 8</span>
<span style="color: #0000ff;">ld</span> [FR-4] OR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored in 'x'</span>
<span style="color: #0000ff;">ld</span> [OR+4] OR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get the address stored at offset 4</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [OR]   <span style="color: #b22222;">; </span><span style="color: #b22222;">store the right-hand value into 'x.b.d' at offset 0</span>
</code></pre>
</section>
</div>

<div id="outline-container-org460323e" class="outline-4">
<h4 id="org460323e"><span class="section-number-4">6.3.6</span> Enable collecting the root set for GC</h4>
<section class="outline-text-4" id="text-6-3-6">
<p>
The last piece we need to worry about is how codegen will interact
with our runtime memory management. we already handled one aspect:
when we allocate a struct, the codegen will be sure to write the
necessary information about the struct fields into the header
word. but there's one more thing to do.
</p>

<p>
For our L2 memory management we are going to use a scheme called a
<b>tracing garbage collector</b>. We will look into what that actually
means in a different lecture, but for now just accept the following:
for that scheme to work, the GC needs to be able to look at the
function stack at any point during execution and identify which memory
locations in the stack represent pointers to structs in the heap.
</p>

<p>
This is more difficult than it might sound. Remember that the stack is
constantly growing and shrinking, and the same memory location may
represent a pointer or not depending on when exactly during program
execution we look at it. How can we implement codegen in order to
enable the runtime GC to collect this information?
</p>

<p>
There are many possible strategies with different tradeoffs between
complexity, flexibility, and efficiency. i'm going to describe one
strategy that, going along with our usual mantra of "make it as simple
as possible as long as it works", focuses on being easy to implement
at the expense of some flexibility.
</p>

<p>
Key to this strategy is that the only heap pointers on the stack will
be either function parameters or function local variables. here's the
idea:
</p>

<ol class="org-ol">
<li>move all nested variable declarations up to the top of the function
they're in, renaming them as necessary to avoid name clashes. this
transformation expands the amount of stack memory the function will
consume, but otherwise doesn't change the program behavior (as long
as we remember to initialize the values to 0 at the same points as
before).</li>

<li>modify the prologue instruction sequence for function codegen,
specifically immediately after we push the old frame pointer value
onto the stack: push two additional words onto the stack after that
but before allocating stack space for local variables. remember
that we need to adjust the offsets of the local variables
accordingly in the symbol table. call these two words the "argument
info word" and the "local info word".</li>

<li>in the argument info word, set it as a bit vector s.t. a bit is set
iff the corresponding function parameter is a struct
pointer. remember that the function arguments are pushed onto the
stack by the pre-call instruction sequence, so by looking at the
argument info word we can tell which positive offsets from the
frame pointer correspond to a pointer argument.</li>

<li>in the local info word, set it as a bit vector s.t. a bit is set
iff the corresponding local variable is a struct pointer. remember
that the function locals are pushed onto the stack by the prologue
instruction sequence immediately after the local info word, so by
looking at the local info word we can tell which negative offsets
from the frame pointer correspond to a pointer local.</li>
</ol>

<p>
So, how would this work at runtime to identify all heap pointers on
the stack? recall that the current frame pointer is always holding the
address of the old frame pointer for the caller function (this is
enforced by our calling convention). at the point when we need to
compute this information:
</p>

<ol class="org-ol">
<li>get the current frame pointer.</li>

<li>read the argument info word (at frame pointer - 4); for each set bit
 representing offset X, return the memory address 'frame pointer + X'.</li>

<li>read the local info word (at frame pointer - 8); for each set bit 
representing offset X, return the memory address 'frame pointer - X'.</li>

<li>get the value pointed to by the current frame pointer, which is the value of the old frame pointer.</li>

<li>set the current frame pointer value to that old value, then go to 2.</li>
</ol>

<p>
repeat these steps until we have walked the entire stack and looked at
all of the stack frames. then we have returned all possible pointers
into the heap.
</p>
</section>

<ol class="org-ol">
<li><a id="org46d9bcc"></a>example<br>
<section class="outline-text-5" id="text-6-3-6-1">
<p>
PROGRAM:
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %foo { <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>; };

<span style="color: #228b22;">def</span> <span style="color: #a0522d;">bar</span>(%foo c) : <span style="color: #228b22;">int</span> {
    %foo d;
    <span style="color: #228b22;">int</span> <span style="color: #a0522d;">e</span>;

    <span style="color: #008b8b;">d</span> := <span style="color: #a020f0;">new</span> %foo;
    <span style="color: #a020f0;">if</span> (0 &lt; c.a) { d.a = c.a - 1; e = bar(d); }

    <span style="color: #a020f0;">return</span> e;
}

%foo x;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;

<span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %foo;
x.<span style="color: #008b8b;">a</span> := 10;
<span style="color: #008b8b;">y</span> := bar(x);

<span style="color: #228b22;">output</span> <span style="color: #a0522d;">y</span>;

</code></pre>

<p>
Suppose we execute this program, and after a few function calls decide
to find all pointers on the stack. assume there are no caller- or
callee-save registers for convenience.
</p>

<p>
STACK:
</p>

<pre class="code"><code>ADDRESS | CONTENTS
--------+------------------------------------------------------------
0x900:  | 0x1000 ; old frame pointer
        | 0x0    ; argument info word: there are no pointer arguments
        | 0x1    ; local info word: 'x' is a pointer
        | 0xab0  ; the value of 'x', a pointer into the heap
        | 0x0    ; the value of 'y', an int
        | 0xab0  ; the call argument, i.e., 'x'
        | 0xd0f  ; the return address
0x800:  | 0x900  ; old frame pointer
        | 0x1    ; argument info word: there is 1 pointer argument
        | 0x01   ; local info word: there is 1 pointer local
        | 0xac0  ; the value of 'd'
        | 0x0    ; the value of 'e'
        | 0xac0  ; the call argument, i.e., 'd'
        | 0xdef  ; the return address
0x700:  | 0x800  ; old frame pointer
        | 0x1    ; argument info word: there is 1 pointer argument
        | 0x01   ; local info word: there is 1 pointer local
        | 0xad0  ; the value of 'd'
        | 0x0    ; the value of 'e'

</code></pre>

<p>
This is the stack after the first recursive call to 'bar'. the current
frame pointer is 0x700, which points to the most recent 'old frame
pointer' on the stack.
</p>

<ol class="org-ol">
<li>go to 0x700-4 to get the argument info word</li>
<li>there is 1 set bit: return 0x700+8 as the memory location of a pointer</li>
<li>go to 0x700-8 to get the local info word</li>
<li>there is 1 set bit: return 0x700-12 as the memory location of a pointer</li>
<li>set the current frame pointer as 0x800 (the address of the next most recent frame pointer)</li>
<li>go to 0x800-4 to get the argument info word</li>
<li>there is 1 set bit: return 0x800+8 as the memory location of a pointer</li>
<li>go to 0x800-8 to get the local info word</li>
<li>there is 1 set bit: return 0x800-12 as the memory location of a pointer</li>
<li>set the current frame pointer as 0x900 (the address of the next next most recent frame pointer)</li>
<li>go to 0x900-4 to get the argument info word</li>
<li>there are no pointer arguments</li>
<li>go to 0x900-8 to get the local info word</li>
<li>there is 1 set bit: return 0x900-12 as the memory location of a pointer</li>
<li>set the current frame pointer as 0x1000 (the address of the next next next most recent frame pointer)</li>
<li>say that 1000 is the base of the stack, so we're done.</li>
</ol>
</section>
</li>
</ol>
</div>

<div id="outline-container-orgc1ca14d" class="outline-4">
<h4 id="orgc1ca14d"><span class="section-number-4">6.3.7</span> Exercise</h4>
<section class="outline-text-4" id="text-6-3-7">
<p>
generate code for the following program (again assuming no caller- or callee-save registers):
</p>

<pre class="code"><code><span style="color: #a020f0;">struct</span> %foo {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">a</span>;
  %bar b;
};

<span style="color: #a020f0;">struct</span> %bar {
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">c</span>;
  <span style="color: #228b22;">int</span> <span style="color: #a0522d;">d</span>;
};

<span style="color: #228b22;">def</span> <span style="color: #a0522d;">fun</span>(%foo p, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">q</span>, %bar r) : <span style="color: #228b22;">int</span> {
  %foo s;
  <span style="color: #008b8b;">s</span> := p;
  <span style="color: #a020f0;">return</span> s.a;
}

%foo x;
<span style="color: #228b22;">int</span> <span style="color: #a0522d;">y</span>;

<span style="color: #008b8b;">x</span> := <span style="color: #a020f0;">new</span> %foo;
x.<span style="color: #008b8b;">b</span> := <span style="color: #a020f0;">new</span> %bar;
<span style="color: #008b8b;">y</span> := fun(x, 2, x.b);
<span style="color: #228b22;">output</span> <span style="color: #a0522d;">y</span>;

</code></pre>

<p>
SOLUTION
</p>

<pre class="code"><code><span style="color: #b22222;">; </span><span style="color: #b22222;">entry prologue</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">FR</span>
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">SR</span> FR
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">0b0</span>      <span style="color: #b22222;">; </span><span style="color: #b22222;">argument info: no pointer arguments</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">0b1</span>      <span style="color: #b22222;">; </span><span style="color: #b22222;">local info: x is a pointer</span>
<span style="color: #0000ff;">sub</span> <span style="color: #a020f0;">8</span> SR      <span style="color: #b22222;">; </span><span style="color: #b22222;">allocate stack space for x and y</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FR-4]  <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize x to nil</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FR-8]  <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize y to 0</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">x := new foo</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">2</span>        <span style="color: #b22222;">; </span><span style="color: #b22222;">argument to 'allocate': 2 words</span>
<span style="color: #0000ff;">call</span> <span style="color: #a020f0;">allocate</span>
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">4</span> SR      <span style="color: #b22222;">; </span><span style="color: #b22222;">deallocate stack space for argument</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [FR-4] <span style="color: #b22222;">; </span><span style="color: #b22222;">write return value to 'x'</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [RR]    <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize x.a to 0</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [RR+4]  <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize x.b to nil</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0b00000010010</span>...01 [RR-4] <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize header word</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">x.b := new bar</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">2</span>        <span style="color: #b22222;">; </span><span style="color: #b22222;">argument to 'allocate': 2 words</span>
<span style="color: #0000ff;">call</span> <span style="color: #a020f0;">allocate</span>
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">4</span> SR      <span style="color: #b22222;">; </span><span style="color: #b22222;">deallocate stack space for argument</span>
<span style="color: #0000ff;">ld</span> [FR-4] OR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get address of struct in heap from 'x'</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [OR+4] <span style="color: #b22222;">; </span><span style="color: #b22222;">write return value to 'x.b'</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [RR]    <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize x.b.c to 0</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [RR+4]  <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize x.b.d to 0</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0b00000010000</span>...01 [RR-4] <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize header word</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">y := fun(x, 2, x.b)</span>
<span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">address stored in 'x'</span>
<span style="color: #0000ff;">ld</span> [RR+4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">address stored in 'x.b'</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">RR</span>       <span style="color: #b22222;">; </span><span style="color: #b22222;">push 'x.b' argument to 'fun'</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">2</span>        <span style="color: #b22222;">; </span><span style="color: #b22222;">push '2' argument to 'fun'</span>
<span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">address stored in 'x'</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">RR</span>       <span style="color: #b22222;">; </span><span style="color: #b22222;">push 'x' argument to 'fun'</span>
<span style="color: #0000ff;">call</span> <span style="color: #a020f0;">FUN</span>
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">12</span> SR     <span style="color: #b22222;">; </span><span style="color: #b22222;">deallocate stack space for arguments</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [FR-8] <span style="color: #b22222;">; </span><span style="color: #b22222;">write return value to 'y'</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">output y</span>
<span style="color: #0000ff;">ld</span> [FR-8] RR

<span style="color: #b22222;">; </span><span style="color: #b22222;">entry epilogue</span>
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">FR</span> SR
<span style="color: #0000ff;">pop</span> <span style="color: #a020f0;">FR</span>
<span style="color: #0000ff;">ret</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">FOO prologue</span>
<span style="color: #0000ff;">FOO</span>:
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">FR</span>
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">SR</span> FR
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">0b101</span>    <span style="color: #b22222;">; </span><span style="color: #b22222;">argument info: first and third arguments are pointers</span>
<span style="color: #0000ff;">push</span> <span style="color: #a020f0;">0b1</span>      <span style="color: #b22222;">; </span><span style="color: #b22222;">local info: one local pointer</span>
<span style="color: #0000ff;">add</span> <span style="color: #a020f0;">4</span> SR      <span style="color: #b22222;">; </span><span style="color: #b22222;">allocate stack space for 's'</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">0</span> [FR-4]  <span style="color: #b22222;">; </span><span style="color: #b22222;">initialize 's' to nil</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">s := p</span>
<span style="color: #0000ff;">ld</span> [FR+16] RR <span style="color: #b22222;">; </span><span style="color: #b22222;">get value of 'p' param</span>
<span style="color: #0000ff;">store</span> <span style="color: #a020f0;">RR</span> [FR-4] <span style="color: #b22222;">; </span><span style="color: #b22222;">put it in 's'</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">return s.a</span>
<span style="color: #0000ff;">ld</span> [FR-4] RR  <span style="color: #b22222;">; </span><span style="color: #b22222;">get value of 's'</span>
<span style="color: #0000ff;">ld</span> [RR] RR    <span style="color: #b22222;">; </span><span style="color: #b22222;">get value of 's.a'</span>

<span style="color: #b22222;">; </span><span style="color: #b22222;">FOO epilogue</span>
<span style="color: #0000ff;">mov</span> <span style="color: #a020f0;">FR</span> SR
<span style="color: #0000ff;">pop</span> <span style="color: #a020f0;">FR</span>
<span style="color: #0000ff;">ret</span>
</code></pre>
</section>
</div>
</div>

<div id="outline-container-orgfc6c6a1" class="outline-3">
<h3 id="orgfc6c6a1"><span class="section-number-3">6.4</span> Memory management schemes</h3>
<section class="outline-text-3" id="text-6-4">
<p>
See memory management slides on Slack
</p>
</section>
</div>
<div id="outline-container-orgf3d4752" class="outline-3">
<h3 id="orgf3d4752"><span class="section-number-3">6.5</span> Further Reading</h3>
<section class="outline-text-3" id="text-6-5">
<ul class="org-ul">
<li>The e-book Crafting Interpreters has
<a href="https://craftinginterpreters.com/garbage-collection.html">a great
chapter on garbage collection</a> that showcases how to implement
mark-and-sweep algorithm. Beware that the language used in the book
has plenty of features we do not deal with (such as closures), and
it uses a virtual machine/interpreter which introduces interesting
trade-offs for garbage collection.</li>
<li>If you are familiar with some techniques not covered in this class
such as continuation-passing style, Henry Baker's paper
<a href="https://web.archive.org/web/20200223051632/home.pipeline.com/~hbaker1/CheneyMTA.html">Cheney
on the MTA</a> presents an interesting implementation for garbage
collection where everything is allocated on the stack and the stack
is garbage-collected.</li>
</ul>
</section>
</div>
</section>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara">The former allows
private repositories at least when you join the UCSB GitHub
organization.</div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara">We are going to go over what
these stages are in later lectures</div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-181-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;L&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;while&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;r&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;{&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;b&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;c&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;}&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5279" style="width: 17.359em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.943em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.375em, 1014.89em, 2.608em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-5280"><span class="texatom" id="MathJax-Span-5281"><span class="mrow" id="MathJax-Span-5282"><span class="mi" id="MathJax-Span-5283" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-5284" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-5285" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-5286" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5287" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5288" style="font-family: MathJax_Main; font-style: italic;">L</span><span class="mi" id="MathJax-Span-5289" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5290" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5291" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-5292" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-5293" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-5294"><span class="mtext" id="MathJax-Span-5295" style="font-family: MathJax_Typewriter;">while&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-5296"><span class="mrow" id="MathJax-Span-5297"><span class="mi" id="MathJax-Span-5298" style="font-family: MathJax_Main; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5299" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5300" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-5301" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="texatom" id="MathJax-Span-5302"><span class="mrow" id="MathJax-Span-5303"><span class="mtext" id="MathJax-Span-5304" style="font-family: MathJax_Typewriter;">&nbsp;{&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-5305"><span class="mrow" id="MathJax-Span-5306"><span class="mi" id="MathJax-Span-5307" style="font-family: MathJax_Main; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5308" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5309" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5310" style="font-family: MathJax_Main; font-style: italic;">c</span><span class="mi" id="MathJax-Span-5311" style="font-family: MathJax_Main; font-style: italic;">k</span></span></span><span class="texatom" id="MathJax-Span-5312"><span class="mrow" id="MathJax-Span-5313"><span class="mtext" id="MathJax-Span-5314" style="font-family: MathJax_Typewriter;">&nbsp;}</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.292em; border-left: 0px solid; width: 0px; height: 1.163em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">L</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">while&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;{&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">b</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">c</mi><mi class="MJX-tex-mathit" mathvariant="italic">k</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;}</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-181">\mathit{whileLoop} ::=
\texttt{while } \mathit{rexp} \texttt{ \{ } \mathit{block} \texttt{
\}} </script> is much more readable than <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-182-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;w&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;h&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;i&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;L&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;lt;WHILE &amp;gt;&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;r&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;e&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;x&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;p&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;&amp;lt; LBRACE &amp;gt;&amp;#xA0;&lt;/mtext&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;b&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;l&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;o&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;c&lt;/mi&gt;&lt;mi class=&quot;MJX-tex-mathit&quot; mathvariant=&quot;italic&quot;&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;&amp;#xA0;&amp;lt; RBRACE &amp;gt;&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5315" style="width: 30.693em; display: inline-block;"><span style="display: inline-block; position: relative; width: 26.437em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.269em, 1026.38em, 2.614em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-5316"><span class="texatom" id="MathJax-Span-5317"><span class="mrow" id="MathJax-Span-5318"><span class="mi" id="MathJax-Span-5319" style="font-family: MathJax_Main; font-style: italic;">w</span><span class="mi" id="MathJax-Span-5320" style="font-family: MathJax_Main; font-style: italic;">h</span><span class="mi" id="MathJax-Span-5321" style="font-family: MathJax_Main; font-style: italic;">i</span><span class="mi" id="MathJax-Span-5322" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5323" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5324" style="font-family: MathJax_Main; font-style: italic;">L</span><span class="mi" id="MathJax-Span-5325" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5326" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5327" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="mo" id="MathJax-Span-5328" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="texatom" id="MathJax-Span-5329" style="padding-left: 0.278em;"><span class="mrow" id="MathJax-Span-5330"><span class="mtext" id="MathJax-Span-5331" style="font-family: MathJax_Typewriter;">&lt;<span style="font-family: STIXGeneral, &quot;Arial Unicode MS&quot;, serif; font-size: 86%; font-style: normal; font-weight: normal;">
</span>WHILE <span style="margin-left: 0.275em;"></span>&gt;&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-5332"><span class="mrow" id="MathJax-Span-5333"><span class="mi" id="MathJax-Span-5334" style="font-family: MathJax_Main; font-style: italic;">r</span><span class="mi" id="MathJax-Span-5335" style="font-family: MathJax_Main; font-style: italic;">e</span><span class="mi" id="MathJax-Span-5336" style="font-family: MathJax_Main; font-style: italic;">x</span><span class="mi" id="MathJax-Span-5337" style="font-family: MathJax_Main; font-style: italic;">p</span></span></span><span class="texatom" id="MathJax-Span-5338"><span class="mrow" id="MathJax-Span-5339"><span class="mtext" id="MathJax-Span-5340" style="font-family: MathJax_Typewriter;">&nbsp;&lt; <span style="margin-left: 0.275em;"></span>LBRACE <span style="margin-left: 0.275em;"></span>&gt;&nbsp;</span></span></span><span class="texatom" id="MathJax-Span-5341"><span class="mrow" id="MathJax-Span-5342"><span class="mi" id="MathJax-Span-5343" style="font-family: MathJax_Main; font-style: italic;">b</span><span class="mi" id="MathJax-Span-5344" style="font-family: MathJax_Main; font-style: italic;">l</span><span class="mi" id="MathJax-Span-5345" style="font-family: MathJax_Main; font-style: italic;">o</span><span class="mi" id="MathJax-Span-5346" style="font-family: MathJax_Main; font-style: italic;">c</span><span class="mi" id="MathJax-Span-5347" style="font-family: MathJax_Main; font-style: italic;">k</span></span></span><span class="texatom" id="MathJax-Span-5348"><span class="mrow" id="MathJax-Span-5349"><span class="mtext" id="MathJax-Span-5350" style="font-family: MathJax_Typewriter;">&nbsp;&lt; <span style="margin-left: 0.275em;"></span>RBRACE <span style="margin-left: 0.275em;"></span>&gt;</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.299em; border-left: 0px solid; width: 0px; height: 1.293em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">w</mi><mi class="MJX-tex-mathit" mathvariant="italic">h</mi><mi class="MJX-tex-mathit" mathvariant="italic">i</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">L</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mo>::=</mo><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&lt;WHILE &gt;&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">r</mi><mi class="MJX-tex-mathit" mathvariant="italic">e</mi><mi class="MJX-tex-mathit" mathvariant="italic">x</mi><mi class="MJX-tex-mathit" mathvariant="italic">p</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;&lt; LBRACE &gt;&nbsp;</mtext></mrow><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-mathit" mathvariant="italic">b</mi><mi class="MJX-tex-mathit" mathvariant="italic">l</mi><mi class="MJX-tex-mathit" mathvariant="italic">o</mi><mi class="MJX-tex-mathit" mathvariant="italic">c</mi><mi class="MJX-tex-mathit" mathvariant="italic">k</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">&nbsp;&lt; RBRACE &gt;</mtext></mrow></math></span></span><script type="math/tex" id="MathJax-Element-182"> \mathit{whileLoop} ::= \texttt{<
WHILE > } \mathit{rexp} \texttt{ < LBRACE > } \mathit{block} \texttt{
< RBRACE >} </script></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara">we will use these
numbers in our derivations to show which rules are applied when</div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara">For
example, the grammar for the "dangling else" problem above is
ambiguous but there are unambiguous grammars for that language.</div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara">such as the concrete grammar given in the handout,
which is definitely ambiguous as it contains the part of the
arithmetic expressions above which we showed is ambiguous</div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara">The technique in
this grammar is what C uses to resolve this ambiguity.</div></div>

<div class="footdef"><sup><a id="fn.8" class="footnum" href="#fnr.8">8</a></sup> <div class="footpara">LR stands for <i>Left-to-right, Rightmost derivation in reverse</i></div></div>

<div class="footdef"><sup><a id="fn.9" class="footnum" href="#fnr.9">9</a></sup> <div class="footpara">LL
stands for <i>Left-to-right, Leftmost derivation</i> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-183-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5351" style="width: 0.635em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.517em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.375em, 1000.5em, 2.425em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-5352"><span class="mi" id="MathJax-Span-5353" style="font-family: MathJax_Math; font-style: italic;">k</span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.079em; border-left: 0px solid; width: 0px; height: 0.951em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-183"> k </script> is called
lookahead and determines how much peeking ahead the parser needs</div></div>

<div class="footdef"><sup><a id="fn.10" class="footnum" href="#fnr.10">10</a></sup> <div class="footpara">There is
only one part of the grammar that is not LL(1) and it turns out to be
LL(2) so our parser is still an LL(k) parser</div></div>

<div class="footdef"><sup><a id="fn.11" class="footnum" href="#fnr.11">11</a></sup> <div class="footpara">Every time we recursively call a
function we get a new instance of all the parameters and local
variables. This happens because the parameters and locals are stored
on the call stack; whenever a function is called a new "stack frame"
is pushed onto the stack; whenever a function returns its stack frame
is popped off of the stack.</div></div>

<div class="footdef"><sup><a id="fn.12" class="footnum" href="#fnr.12">12</a></sup> <div class="footpara">Like <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-184-Frame" tabindex="0" style="position: relative;" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;::=&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;E&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/math&gt;" role="presentation"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-5354" style="width: 7.302em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.264em; height: 0px; font-size: 116%;"><span style="position: absolute; clip: rect(1.319em, 1006.21em, 2.663em, -1000em); top: -2.241em; left: 0em;"><span class="mrow" id="MathJax-Span-5355"><span class="mi" id="MathJax-Span-5356" style="font-family: MathJax_Math; font-style: italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-5357" style="font-family: MathJax_Main; padding-left: 0.278em;">:<span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">:</span><span style="font-family: MathJax_Main; font-style: normal; font-weight: normal;">=</span></span><span class="mi" id="MathJax-Span-5358" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.278em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="mo" id="MathJax-Span-5359" style="font-family: MathJax_Main; padding-left: 0.222em;">+</span><span class="mi" id="MathJax-Span-5360" style="font-family: MathJax_Math; font-style: italic; padding-left: 0.222em;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.026em;"></span></span><span class="texatom" id="MathJax-Span-5361"><span class="mrow" id="MathJax-Span-5362"><span class="mo" id="MathJax-Span-5363" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-5364" style="font-family: MathJax_Math; font-style: italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.241em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.356em; border-left: 0px solid; width: 0px; height: 1.292em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>E</mi><mo>::=</mo><mi>E</mi><mo>+</mo><mi>E</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-184"> E ::= E + E | x </script>
for example.</div></div>

<div class="footdef"><sup><a id="fn.13" class="footnum" href="#fnr.13">13</a></sup> <div class="footpara">For
example, by specifying it along with the grammar and handling
precedence separately in the parser. One example of this is <i>Shunting
Yard Algorithm</i>.</div></div>

<div class="footdef"><sup><a id="fn.14" class="footnum" href="#fnr.14">14</a></sup> <div class="footpara">otherwise it would be non-productive as it cannot
terminate</div></div>

<div class="footdef"><sup><a id="fn.15" class="footnum" href="#fnr.15">15</a></sup> <div class="footpara">in our case, 1 token–except for when disambiguating assignments and
function calls in C♭.</div></div>

<div class="footdef"><sup><a id="fn.16" class="footnum" href="#fnr.16">16</a></sup> <div class="footpara">See the
top-down parsing chapter in Cooper &amp; Torczon or slide 3 of <a href="https://web.eecs.umich.edu/~weimerw/2008-415/reading/FirstFollowLL.pdf">this slide
deck</a>.</div></div>

<div class="footdef"><sup><a id="fn.17" class="footnum" href="#fnr.17">17</a></sup> <div class="footpara">See the same resources as the FIRST sets for the algorithm,
if you are curious about it.</div></div>

<div class="footdef"><sup><a id="fn.18" class="footnum" href="#fnr.18">18</a></sup> <div class="footpara">The additional information in the parse tree may be
useful for other applications such as code formatting tools that need
to keep track of the parentheses and other parsing-related
information.</div></div>

<div class="footdef"><sup><a id="fn.19" class="footnum" href="#fnr.19">19</a></sup> <div class="footpara">accessing
the wrong segment, although the virtual memory is vast these days and
segments are more interleaved however the term has carried on and this
simple mental image is useful</div></div>

<div class="footdef"><sup><a id="fn.20" class="footnum" href="#fnr.20">20</a></sup> <div class="footpara">Common
Language Runtime, the virtual machine that C# and other languages on
.Net platform compile to.</div></div>

<div class="footdef"><sup><a id="fn.21" class="footnum" href="#fnr.21">21</a></sup> <div class="footpara">When we were talking about
optimization scope and said that local optimizations operate on "small
fragments of code", what we really meant was basic blocks.</div></div>


</div>
</div></article>
<div id="postamble" class="status">
<p class="author">Author: Mehmet Emre</p>
<p class="date">Created: 2020-11-25 Wed 15:20</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px none; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px none; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-size-adjust: none; font-family: MathJax_SansSerif, sans-serif;"></div></div></body></html>